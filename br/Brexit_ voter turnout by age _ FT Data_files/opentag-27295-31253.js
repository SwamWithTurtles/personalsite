/*
 * Opentag, a tag deployment platform
 * Copyright 2011-2016, Qubit Group
 * http://opentag.qubitproducts.com
 */
(function(){var t=function(){return this}();t.qubit=t.qubit||{};t.qubit.SYSTEM_DEFAULTS={pingServerUrl:"pong.qubitproducts.com",tellLoadTimesProbability:1}})();(function(){var t={"id":"27295"};try{var a=function(){return this}();if(!a.qubit)a.qubit={};var v=a.qubit;if(!v.cs)v.cs={};v.CLIENT_CONFIG=t;var H=t.id||"efault";H="d"+H;if(!v.cs[H])v.cs[H]={};v.cs[H].ClientConfig=t;if(v.SYSTEM_DEFAULTS)v.cs[H].SystemDefaults=v.SYSTEM_DEFAULTS}catch(I){}})();
(function(){(function(){function t(){function b(e,y){y=k(y||{});y.meta=y.meta||{};y.meta.type=e;l.push(y);if(l.length===1)q(l[0]);w.listeners=g(w.listeners,function(x){return!x.disposed})}function q(e){w.events.push(e);h(w.listeners,function(y){if(y.disposed)return;if(!m(y.type,e.meta.type))return;try{y.callback.call(y.context,e)}catch(x){if(console&&console.error)console.error("Error emitting UV event",x.stack)}});l.shift();if(l.length>0)q(l[0])}function p(e,y,x){function A(){h(w.events,function(z){if(r.disposed)return;
if(!m(e,z.meta.type))return;y.call(x,z)});return u}function E(){r.disposed=true;return u}var r={type:e,callback:y,disposed:false,context:x||window};w.listeners.push(r);var u={replay:A,dispose:E};return u}function B(e,y,x){var A=w.on(e,function(){y.apply(x||window,arguments);A.dispose()});return A}function h(e,y){var x=e.length;for(var A=0;A<x;A++)y(e[A],A)}function k(e){var y={};for(var x in e)if(e.hasOwnProperty(x))y[x]=e[x];return y}function m(e,y){return typeof e==="string"?e===y:e.test(y)}function g(e,
y){var x=e.length;var A=[];for(var E=0;E<x;E++)if(y(e[E]))A.push(e[E]);return A}var l=[];var w={emit:b,on:p,once:B,events:[],listeners:[]};return w}function a(){return ia.uv}function v(){var b=a();if(!b||!b.emit)return false;if(!da){da=true;for(var q=0;q<X.length;q++){var p=X[q];if(p.on)b.on.apply(b,p.on);else if(p.emit)b.emit.apply(b,p.emit)}b.on(/.*/,function(B){var h=B.meta.type;var k=Y[h];if(!k)Y[h]={current:B,history:[B]};else{k.current=B;k.history.push(B)}}).replay();Z=true}return true}(function(){if(!Function.prototype.bind)Function.prototype.bind=
function(b){if(typeof this!=="function")throw new TypeError("Function.prototype.bind - what is trying "+"to be bound is not callable");var q=Array.prototype.slice.call(arguments,1);var p=this;var B=function(){};var h=function(){return p.apply(this instanceof B?this:b,q.concat(Array.prototype.slice.call(arguments)))};B.prototype=this.prototype;h.prototype=new B;return h}})();var H={__anonymous__:true};var I=null;try{I=(false||eval)("this")||function(){return this}()}catch(b){}H=I;var D=H.qubit||{};
if(!H.qubit)H.qubit=D;var ea="3.1.0-r1";if(D.VERSION&&D.VERSION!==ea)try{console.warn("There is already 'qubit.VERSION' set to: "+D.VERSION)}catch(b){}D.VERSION=ea;try{if(typeof module==="object")module.exports=H}catch(b){}var P=function(){};var fa;(function(){function b(){}function q(h,k,m,g,l){var w=h.split(".");var e=b.NAMESPACE_BASE||H;var y=null;var x=null;var A;if(l)e=I;var E=e;e=m||e;for(A=0;A<w.length-1;A+=1){y=e;x=w[A];e[x]=e[x]||{};e=e[x]}y=e;x=w[w.length-1];if(I.TAGSDK_NS_OVERRIDE)g=false;
if(I.TAGSDK_NS_FORCED_OVERRIDE_OPTION!==undefined)g=!I.TAGSDK_NS_FORCED_OVERRIDE_OPTION;if(k!==undefined){if(y[x]===undefined||!g)y[x]=k}else y[x]=y[x]||{};if(k){k.CLASSPATH=w.join(".");w.splice(w.length-1,1);k.PACKAGE_NAME=w.join(".")}return{root:E,object:y,instance:y[x]}}b.global=function(){return I};b.STANDARD_CS_NS="qubit.cs";b.clientSpaceClasspath=function(){if(window.qubit.CLIENT_CONFIG)return"qubit.cs.d"+window.qubit.CLIENT_CONFIG.id;return b.STANDARD_CS_NS};b.globalNamespace=function(h,k,
m,g){return q(h,k,m,g,true)};b.namespace=function(h,k,m,g){return q(h,k,m,g,false)};b.clientNamespace=function(h,k,m,g){return b.namespace(b.clientSpaceClasspath()+"."+h,k,m,g)};b.clazz=function(h,k,m,g,l){b.namespace(h,k,g,true);if(typeof m==="function"){k.SUPER=m;k.superclass=m;k.prototype=new m(l);k.prototype.SUPER=m;k.prototype.CLASS=k}var w=h.split(".");if(k.prototype){k.prototype.CLASSPATH=w.join(".");k.prototype.CLASS_NAME=w[w.length-1];w.splice(w.length-1,1);k.prototype.PACKAGE_NAME=w.join(".")}else{k.CLASSPATH=
w.join(".");k.STATIC_NAME=w[w.length-1];w.splice(w.length-1,1);k.PACKAGE_NAME=w.join(".")}return k};b.clazz("qubit.Define",b);b.clientClazz=function(h,k,m,g,l){return b.clazz(b.clientSpaceClasspath()+"."+h,k,m,g,l)};b.STANDARD_VS_NS="qubit.vs";b.vendorsSpaceClasspath=function(h){var k=D.VENDOR_SPACE_CP;var m=k===undefined||k===null?b.STANDARD_VS_NS:k;if(h)if(m)return m+"."+h;else return h;return m};var p=b.vendorsSpaceClasspath();var B;if(p)B=b.namespace(p,{},null,true).instance;else B=b.global();
b.getVendorSpace=function(){return B};b.vendorNamespace=function(h,k,m,g){h=b.vendorsSpaceClasspath(h);return b.namespace(h,k,m,g)};b.vendorClazz=function(h,k,m,g,l){h=b.vendorsSpaceClasspath(h);return b.clazz(h,k,m,g,l)}})();(function(){function b(h){}var q="abcdefghijklmnopqrstuvwxyz"+"0123456789"+"ABCDEFGHIJKLMNOPQRSTUVWXYZ"+"*!-#$\x26+()@"+"'%./:\x3c\x3e?["+'"]^_`{|}~'+"\\"+";\x3d";var p={};for(var B=0;B<q.length;B++)p[q.charAt(B)]=B;D.Define.clazz("qubit.Cookie",b);b.cookieAlphabet=q;b.cookieAlphabetMap=
p;b.decode=function(h){return unescape(h)};b.encode=function(h){return escape(h)};b.set=function(h,k,m,g,l){var w;if(m){var e=new Date;e.setTime(e.getTime()+m*24*60*60*1E3);w="; expires\x3d"+e.toGMTString()}else w="";if(!l){h=b.encode(h);k=b.encode(k)}var y=h+"\x3d"+k+w+"; path\x3d/;";if(g)y+=" domain\x3d"+g;document.cookie=y};b.get=function(h,k){var m=h+"\x3d";var g=document.cookie.split(";");for(var l=0;l<g.length;l++){for(var w=g[l];w.charAt(0)===" ";)w=w.substring(1,w.length);if(w.indexOf(m)===
0){var e=w.substring(m.length,w.length);if(!k)e=b.decode(e);return e}}return null};b.getAllForName=function(h,k){if(!h)return[];var m=h+"\x3d";var g=document.cookie.split(";");var l=[];for(var w=0;w<g.length;w++){for(var e=g[w];e.charAt(0)===" ";)e=e.substring(1,e.length);if(e.indexOf(m)===0){var y=e.substring(m.length,e.length);if(k)y=b.decode(y);l.push(y)}}return l};b.getAll=function(h){var k=document.cookie.split(";");var m=[];for(var g=0;g<k.length;g++){for(var l=k[g];l.charAt(0)===" ";)l=l.substring(1,
l.length);var w=l.substring(0,l.indexOf("\x3d"));var e=l.substring(w.length+1,l.length);if(h)e=b.decode(e);m.push([w,e])}return m};b.rm=function(h,k){b.set(h,"",-1,k)}})();(function(){function b(c){return l.addToArrayIfNotExist(l.ANON_VARS,c)}function q(c){return c.replace(/([.*+?^=!:${}()|\[\]\/\\])/g,"\\$1")}function p(c,f){var n=e.length;for(var C=0;C<n;C++)if(c===e[C][0])return e[C][1];e[e.length]=[c,f];return false}function B(c,f,n,C,F){var G=false;var J=false;var K=false;var M=false;var N=false;
var R=false;var S=false;if(f){N=!!f.all;G=N||f.nodes;M=N||f.win;J=N;S=!!f.emptyForMaxDeep;K=f.noFunctions&&!N;if(f.noOwn!==undefined)J=!!f.noOwn;if(f.noFunctions!==undefined)K=!!f.noFunctions;if(f.win!==undefined)M=!!f.win;if(f.nodes!==undefined)G=!!f.nodes;R=!!f.copyReference}if(n!==undefined&&!n){if(S)return;return c}else if(n!==undefined)n--;if(!c||!(c instanceof Object))return c;if(!G){try{if(c instanceof Node)return c}catch(aa){if(c instanceof ActiveXObject&&c.nodeType!==undefined)return c}if(c===
document)return c}if(!M)if(c===w)return c;var O=c instanceof Array?[]:{};if(c instanceof Date)O=new Date(c);if(!K&&c instanceof Function){var V=String(c).replace(/\s+/g,"");if(V.indexOf("{[nativecode]}")+14===V.length)O=function(){return c.apply(F||this,arguments)};else O=function(){return c.apply(this,arguments)}}if(C===undefined){e=[];C=0}var W=p(c,O);if(W)return W;var T;if(O instanceof Array)for(T=0;T<c.length;T++)if(c[T]===c[T])O[O.length]=B(c[T],f,n,C+1,c);else O[O.length]=c[T];else{T=0;for(var U in c){if(J||
c.hasOwnProperty(U))if(c[U]===c[U])O[U]=B(c[U],f,n,C+1,c);else O[U]=c[U];T++}}if(f.proto)O.prototype=B(c.prototype,f,n,C+1,c);if(R)O.___copy_ref=c;return O}function h(c,f){for(var n=0;n<f&&n<y.length;n++)if(c===y[n])return true;return false}function k(c,f,n,C,F,G,J,K){n=n||{};if(n.hasOwn===undefined)n.hasOwn=true;if(n.objectsOnly&&!(c instanceof Object))return;if(K!==undefined&&!K)return;else if(K!==undefined)K--;if(!n||!n.nodes)try{if(c instanceof Node)return}catch(V){if(c instanceof ActiveXObject&&
c.nodeType!==undefined)return}if(c===w)return;if(C===undefined){y=[];C=0}if(h(c,C))return;y[C]=c;F=F||c;if(F&&G&&F[G]!==F[G])return;var M=f(c,F,G,J);if(M)return;var N=0;var R="";for(var S in c){if(!n.hasOwn||c.hasOwnProperty(S))try{var O=c[S];if(n.track)R=J?J+"."+S:S;k(O,f,n,C+1,F,S,R,K)}catch(V){}N++}}var m=D.Define;var g=D.Cookie;var l=function(){};var w=m.global();m.clazz("qubit.opentag.Utils",l);l.global=m.global;l.namespace=m.namespace;l.clazz=m.clazz;l.getObjectUsingPath=function(c,f){f=f||
w;var n=c.split(".");for(var C=0;C<n.length;C++)if(f&&n[C])f=f[n[C]];return f};l.getParentObject=function(c){var f=c.lastIndexOf(".");var n=c.substring(0,f);return l.getObjectUsingPath(n)};l.variableExists=function(c){return c!==undefined&&c!==null};l.ANON_VARS=[];l.getAnonymousAcessor=function(c){var f=l.indexInArray(c,l.ANON_VARS);if(f===-1)f=b(c);return"qubit.opentag.Utils.ANON_VARS["+f+"]"};l.replaceAll=function(c,f,n){return c.replace(new RegExp(q(f),"g"),n)};l.secureText=function(c){if(typeof c!==
"string")c+="";c=c.replace(/</g,"\x26lt;");c=c.replace(/>/g,"\x26gt;");return c};l.getUrl=function(){return document.location.href};l.getQueryParam=function(c){var f;var n;var C;var F;var G;var J;var K;F=l.getUrl();if(F.indexOf("?")>0){J=F.substring(F.indexOf("?")+1).split("\x26");for(f=0,n=J.length;f<n;f+=1){G=J[f];if(G.indexOf("\x3d")>0){K=G.split("\x3d");if(K.length===2&&K[0]===c)return K[1]}}}return null};l.getElementValue=function(c){var f=document.getElementById(c);if(f)return f.textContent||
f.innerText;return null};var e=[];l.objectCopy=function(c,f){f=f||{};var n=B(c,f,f.maxDeep);e=[];return n};var y=[];l.traverse=function(c,f,n){var C;k(c,f,n,C,C,C,C,n.maxDeep)};l.prepareQuotedString=function(c){if(typeof c==="string")return'"'+c.replace(/\"/g,'\\"')+'"';else return c};l.expressionToFunction=function(c,f){f=f||"";var n="function ("+f+") {"+c+"}";return l.gevalAndReturn(n).result};l.defineWrappedClass=function(c,f,n,C,F){var G=function(){if(F)return F.apply(this,arguments);else return f.apply(this,
arguments)};m.clazz(c,G,f,C);for(var J in n)if(n.hasOwnProperty(J)&&J!=="CONSTRUCTOR")G.prototype[J]=n[J];return G};l.copyAandAddFromB=function(c,f,n){n=n||8;var C=this.objectCopy(c,{maxDeep:n});for(var F in f)if(f.hasOwnProperty(F))C[F]=f[F];return C};l.keys=function(c){if(c instanceof Object){if(Object.keys)return Object.keys(c);var f=[];for(var n in c)if(c.hasOwnProperty(n))f[f.length]=n;return f}else throw"keys() called on non-object!";};l.getSrcElement=function(c){var f;c=c||window.event;if(c.srcElement)f=
c.srcElement;else if(c.target)f=c.target;return f};l.addToArrayIfNotExist=function(c,f,n){var C=0;for(var F=false;C<c.length;C+=1){var G=n&&n(c[C],f);if(G||c[C]===f){F=true;break}}if(!F){c[c.length]=f;C=-1}return C};l.indexInArray=function(c,f){var n=0;for(var C=false;n<c.length;n++)if(c[n]===f){C=true;break}return C?n:-1};l.removeFromArray=function(c,f){var n=0;for(var C=0;n<c.length;)if(c[n]===f){c.splice(n,1);C++}else n++;return C};l.addClass=function(c,f){var n;try{c.classList.add(f)}catch(C){if(c.className===
null){c.className=f;return}n=c.className.split(" ");l.addToArrayIfNotExist(n,f);c.className=n.join(" ")}};l.removeClass=function(c,f){var n;try{c.classList.remove(f)}catch(C){if(c.className===null){c.className="";return}n=c.className.split(" ");l.removeFromArray(n,f);c.className=n.join(" ")}};var x="try{this.qubitopentagutilsgevalandreturn__var_test__\x3d(";var A=");}catch(ex){"+"this.qubitopentagutilsgevalandreturn__var_test__error \x3d ex;}";l.gevalAndReturn=function(c){var f=I;f.qubitopentagutilsgevalandreturn__var_test__=
undefined;f.qubitopentagutilsgevalandreturn__var_test__error=undefined;c=x+c+A;l.geval(c);var n=f.qubitopentagutilsgevalandreturn__var_test__;var C=f.qubitopentagutilsgevalandreturn__var_test__error;try{f.qubitopentagutilsgevalandreturn__var_test__=fa;f.qubitopentagutilsgevalandreturn__var_test__error=fa;delete f.qubitopentagutilsgevalandreturn__var_test__;delete f.qubitopentagutilsgevalandreturn__var_test__error}catch(F){}return{result:n,error:C}};l.trim=function(c){try{return String(c).trim()}catch(f){return String(c).replace(/^\s+|\s+$/g,
"")}};l.setIfUnset=function(c,f){if(c&&f)for(var n in f)if(f.hasOwnProperty(n)&&!c.hasOwnProperty(n))c[n]=f[n]};l.overrideFromLeftToRight=function(c,f){if(c&&f)for(var n in f)if(f.hasOwnProperty(n))c[n]=f[n];return c};l.geval=function(c){if(window&&window.execScript)return window.execScript(c===""?" ":c);else return function(){return w["eval"].call(w,c)}()};var E=[];l.bodyAvailable=function(c){var f=!!document.body;if(f){if(E){for(var n=0;n<E.length;n++)try{E[n]()}catch(C){}E=false}c()}else E.push(c)};
l.rmCookiesMatching=function(c){var f=g.getAll();for(var n=0;n<f.length;n++){var C=f[n][0];if(C.match(c)===0)g.rm(C)}};var r=[];var u=false;var z=false;l.bodyReady=function(c){if(z){if(c)c();return true}u=u||!!(document.body&&document.readyState==="complete");if(u){z=true;for(var f=0;f<r.length;f++)try{r[f]()}catch(n){}if(c)c()}else if(c)r.push(c);return u};var d=w.onload;w.onload=function(c){try{l.bodyReady()}catch(n){try{window.qubit.opentag.Utils.bodyReady()}catch(C){}}var f=false;try{f=d}catch(n){}if(f)f(c)};
(function(){var c;var f=false;var n=1;var C;var F;var G;var J;F=function(M){var N;if(M===true)n-=1;if(!n||M!==true&&!f){if(!document.body)return setTimeout(F,1);f=true;if(M!==true){n-=1;if(n>0)return}for(;C.length>0;){N=C.shift();N()}}};J=function(){if(f)return;try{document.documentElement.doScroll("left")}catch(M){setTimeout(J,1);return}F()};G=function(){if(C)return;C=[];if(document.readyState==="complete")return setTimeout(F,1);if(document.addEventListener){document.addEventListener("DOMContentLoaded",
c,false);window.addEventListener("load",F,false)}else if(document.attachEvent){document.attachEvent("onreadystatechange",c);window.attachEvent("onload",F);var M=false;try{M=window.frameElement===null||window.frameElement===undefined}catch(N){}if(document.documentElement.doScroll&&M)J()}};var K=function(M){G();if(f)setTimeout(M,1);else C.push(M)};if(document.addEventListener)c=function(){document.removeEventListener("DOMContentLoaded",c,false);F()};else if(document.attachEvent)c=function(){if(document.readyState===
"complete"){document.detachEvent("onreadystatechange",c);F()}};K(function(){u=true;l.bodyReady()})})()})();(function(){function b(x,A,E){this.collectLogs=!!b.isCollecting();this.collectLocally=E;this.collection=[];this.getPrefix=function(){var r="";if(A){if(typeof A==="function")r=A(this.ref);else if(A.CLASS_NAME)r=A.CLASS_NAME;else if(A.constructor&&A.constructor.name)r=A.constructor.name;if(r)r+=" -\x3e "}return(x||"")+r}}function q(x,A,E,r,u,z,d,c){var f;var n=h>=c;if(b.getCollectLevel()>=0||n){if(u)f=
[r,d,E];else f=[A+x.getPrefix()+r,z,E];f[3]=c;x.collect(f,c);if(n)x.printMessage.apply(x,f)}}var p=D.Define;var B=null;p.clazz("qubit.opentag.Log",b);b.LEVEL_FINEST=4;b.LEVEL_FINE=3;b.LEVEL_INFO=2;b.LEVEL_WARN=1;b.LEVEL_ERROR=0;b.LEVEL_NONE=-1;b.MAX_LOG_LEN=1E4;b.prototype.MAX_LOG_LEN=-1;var h=b.LEVEL_NONE;var k=b.LEVEL_NONE;var m=true;b.setLevelFromCookie=function(){var x=D.Cookie.get("qubit.opentag.Log.LEVEL");if(x){x=+x;if(!isNaN(x))if(x>0){var A=b.LEVEL_FINE;b.setCollectLevel(x>A?x:A);b.setLevel(+x)}}};
b.setCollecting=function(x){m=!!x};b.isCollecting=function(){return m||b.COLLECT};b.setLevel=function(x){h=+x};b.getLevel=function(){return h};b.setCollectLevel=function(x){k=+x};b.getCollectLevel=function(){return k};var g=[];b.logsCollection=g;b.rePrintAll=function(x,A,E,r){var u=h;if(x!==undefined)h=x;try{if(b.isCollecting()){try{if(!E)B.clear()}catch(f){}var z=r||b.logsCollection;var d=0;for(var c=0;c<z.length;c++)(function(f){var n=z[f];var C=n[3];if(C!==undefined&&h>=C){d++;if(!A)b.print.apply(b,
n);else D.opentag.Timed.setTimeout(function(){if(x!==undefined)h=x;try{b.print.apply(b,n)}finally{h=u}},d*A)}})(c)}}catch(f){}finally{h=u}};var l=p.global();var w=!!(l.webkitMediaStream||l.webkitURL||l.mozContact);b.isStyleSupported=function(){return w};var e={};b.setConsole=function(x){B=x||e;return B};b.delayPrint=-1;var y=(new Date).valueOf();b.prototype.printMessage=function(x,A,E,r){if(b.delayPrint>0){var u=b.delayPrint;var z=y-(new Date).valueOf();if(z>0)u+=z;try{D.opentag.Timed.setTimeout(function(){this.print(x,
A,E,r)}.bind(this),u)}catch(d){setTimeout(function(){this.print(x,A,E,r)}.bind(this),u)}y=(new Date).valueOf()+u}else this.print(x,A,E,r)};b.prototype.print=function(x,A,E,r){b.print(x,A,E,r)};b.print=function(x,A,E,r){if(r!==undefined&&h<r)return;try{if(B&&B.log)if(A&&b.isStyleSupported())if(E&&B[E])B[E]("%c"+x,A);else B.log("%c"+x,A);else if(E&&B[E])B[E](x);else B.log(x)}catch(u){}};b.prototype.collect=function(x,A){if(A===undefined)A=b.getCollectLevel();var E=false;var r=this.collectLogs&&b.isCollecting()&&
b.getCollectLevel()>=+A;if(r){g.push(x);E=true}if(this.collectLocally&&r){this.collection.push(x);E=true}if(b.MAX_LOG_LEN>0)if(g.length>b.MAX_LOG_LEN)g.splice(0,g.length-b.MAX_LOG_LEN);if(b.MAX_LOG_LEN>0||this.MAX_LOG_LEN>0){var u=b.MAX_LOG_LEN;if(this.MAX_LOG_LEN>0)u=this.MAX_LOG_LEN;if(this.collection.length>u)this.collection.splice(0,this.collection.length-u)}return E?x:null};b.clearAllLogs=function(){try{B.clear()}catch(x){}finally{g.splice(0,g.length)}};b.getCollectedByLevel=function(x,A){A=
A||g;var E=[];for(var r=0;r<A.length;r++){var u=A[r];var z=u[0];var d=z[4];if(d===x)E.push(u)}return E};b.prototype.rePrint=function(x,A,E){b.rePrintAll(x,A,!E,this.collection)};b.prototype.FINEST=function(x,A){q(this,"FINEST: ",false,x,A,"color:#CCCCCC;",false,b.LEVEL_FINEST)};b.prototype.FINE=function(x,A){q(this,"FINE: ",false,x,A,"color:#999999;",false,b.LEVEL_FINE)};b.prototype.INFO=function(x,A,E){q(this,"INFO: ","info",x,A,E,E,b.LEVEL_INFO)};b.prototype.WARN=function(x,A){q(this,"WARN: ","warn",
x,A,"color:#26A110;",false,b.LEVEL_WARN)};b.prototype.ERROR=function(x,A){q(this,"ERROR: ","error",x,A,"color:red;",false,b.LEVEL_ERROR)};b.setConsole(p.global().console);b.setLevelFromCookie()})();(function(){function b(p){if(p){this._rate=p.rate||10;this._smallestRate=-1;if(p.start)this.startPooling();this.config=p}this.inervals=[];this._lck_obj={};this._binded_pool=this._pool.bind(this)}D.Define.clazz("qubit.opentag.Timer",b);b.prototype.timers=[];b.prototype.startPooling=function(p){if(p&&this.config.dynamic)if(this._smallestRate<
0||this._smallestRate>p)this._smallestRate=Math.min(Math.floor(p/2),1500);if(!this.started){this.started=true;setTimeout(this._binded_pool,0)}};b.prototype._pool=function(){this.maxFrequent(function(){var B="";if(this.config&&this.config.name)B="["+this.config.name+"]"},5E3,this._lck_obj);this.callTimers();if(this.timers.length!==0){var p=this._smallestRate>this._rate?this._smallestRate:this._rate;setTimeout(this._binded_pool,p)}else{this.started=false;this._smallestRate=-1}};b.prototype.callTimers=
function(){this.lastCalled=(new Date).valueOf();for(var p=0;p<this.timers.length;p++){var B=this.timers[p];var h=(new Date).valueOf();if(h>=B.time){try{B.execute()}catch(k){}this.timers.splice(p,1);--p}}};b.prototype.cancellAll=function(){this.timers=[]};b.prototype.setRate=function(p){this._rate=p};b.prototype.maxFrequent=function(p,B,h){if(!h){p.__maxFrequent__timer_opentag_qubit_=p.__maxFrequent__timer_opentag_qubit_||{};h=p.__maxFrequent__timer_opentag_qubit_}var k=h.____last__timed__max__frequent____;
if(!k||(new Date).valueOf()-k>B){k=(new Date).valueOf();h.____last__timed__max__frequent____=k;p()}};b.prototype.runIfNotScheduled=function(p,B,h){h=h||p;if(h.__lastRun__&&(new Date).valueOf()<B+h.__lastRun__)return this.schedule(p,B,h);else{h.__lastRun__=(new Date).valueOf();p();return true}};b.prototype.schedule=function(p,B,h){if(h.___scheduled___)return false;else{h.___scheduled___=(new Date).valueOf();this.setTimeout(function(){h.___scheduled___=false;h.__lastRun__=(new Date).valueOf();p()},
B);return true}};var q=1;b.prototype.setTimeout=function(p,B){var h={id:q++,time:(new Date).valueOf()+ +B,execute:p};this.timers.push(h);this.startPooling(B);return h};b.prototype.setInterval=function(p,B){var h=setInterval(p,B);this.inervals.push(h);return h}})();(function(){D.Define.namespace("qubit.opentag.Timed",new D.opentag.Timer({rate:37,dynamic:true}));var b=D.opentag.Timed;b.tillTrue=function(q,p,B){var h=function(){if(!q())b.setTimeout(h,B||33);else p()};h()}})();var L={};L.html=L.html||
{};L.html.fileLoader={};L.html.fileLoader.load=function(b,q,p,B,h,k){var m;var g;var l;var w;var e;e=false;w=function(y){return function(){if(!e){e=true;if(y&&!l)l={url:document.location.href};p(b,l,y)}}};try{if(q)g=q(b)}catch(y){g=false;p(b,"Exception loading pre",true)}finally{if(g!==false){m=L.html.fileLoader.createScriptEl(b,h,false,k);if(p){m.onload=w(false);m.onerror=w(true);m.onreadystatechange=function(){if(this.readyState==="complete"||this.readyState==="loaded")setTimeout(function(){w(false)()},
1)}}if(!B)B=window.document.getElementsByTagName("head")[0];B.appendChild(m)}}};L.html.fileLoader.createScriptEl=function(b,q,p,B){var h;var k=document.createElement("script");k.type="text/javascript";k.src=L.html.fileLoader.tidyUrl(b)+(p?"?"+(new Date).getTime():"");if(q!==false){k.async="true";k.defer="true"}else{k.async="false";if(k.async!==false)k.async=false;k.defer="false";if(k.defer!==false)k.defer=false}for(h in B)if(B.hasOwnProperty(h))k.setAttribute(h,B[h]);return k};L.html.fileLoader.tidyUrl=
function(b){if(b.substring(0,5)==="http:")return b;if(b.substring(0,6)==="https:")return b;return"//"+b};(function(){function b(h){this.log=new D.opentag.Log("",function(){return this.CLASS_NAME+"["+this.config.name+"]"}.bind(this),"collectLogs");this.config={order:0,include:true,name:"Filter-"+p++,script:undefined,session:undefined};this.session=null;if(h){for(var k in h)if(h.hasOwnProperty(k))this.config[k]=h[k];if(h.session)this.setSession(h.session);this.register(this)}}var q=D.opentag.Utils;
var p=0;var B=[];D.Define.clazz("qubit.opentag.filter.BaseFilter",b);b.state={DISABLED:-3,SESSION:-2,PASS:-1,FAIL:0};b.prototype.reset=function(){this.enable()};b.prototype.disable=function(){this.config.disabled=true};b.prototype.enable=function(){this.config.disabled=false};b.prototype.match=function(){return true};b.prototype.setSession=function(h){this.session=h};b.prototype.getSession=function(){return this.session};b.prototype.getState=function(){var h=b.state.PASS;if(this.config.disabled)return b.state.DISABLED;
if(this.config.script)h=this.config.script.call(this,h);if(isNaN(+h))h=b.state.FAIL;this.lastState=+h;return h};b.getFilters=function(){return B};b.prototype.register=function(){b.register(this)};b.register=function(h){q.addToArrayIfNotExist(B,h)}})();(function(){var b=D.Define;var q={CONTAINS:"CONTAINS",MATCHES_EXACTLY:"MATCHES_EXACTLY",STARTS_WITH:"STARTS_WITH",ENDS_WITH:"ENDS_WITH",REGULAR_EXPRESSION:"REGULAR_EXPRESSION",ALL_URLS:"ALL_URLS"};b.namespace("qubit.opentag.filter.pattern.PatternType",
q)})();(function(){function b(k){this._lockObject={};var m={patternType:h.CONTAINS,pattern:""};if(k)for(var g in k)if(k.hasOwnProperty(g))m[g]=k[g];b.SUPER.call(this,m)}var q=D.opentag.Utils;var p=D.opentag.filter.BaseFilter;var B=D.opentag.Timed;var h=D.opentag.filter.pattern.PatternType;D.Define.clazz("qubit.opentag.filter.URLFilter",b,p);b.prototype.PATTERNS=h;b.prototype.getURL=function(k){return k||q.getUrl()};b.prototype.match=function(k){k=this.getURL(k);var m=true;var g=this.config.pattern;
switch(this.config.patternType){case h.CONTAINS:m=k.toLowerCase().indexOf(g.toLowerCase())>=0;break;case h.MATCHES_EXACTLY:m=k.toLowerCase()===this.config.pattern.toLowerCase();break;case h.STARTS_WITH:m=k.toLowerCase().indexOf(g.toLowerCase())===0;break;case h.ENDS_WITH:m=k.lastIndexOf(g.toLowerCase())+g.length===k.length;break;case h.REGULAR_EXPRESSION:m=(new RegExp(g)).test(k);break;case h.ALL_URLS:m=true;break}return m}})();(function(){function b(k){var m={};if(k){for(var g in k)if(k.hasOwnProperty(g)){if(g===
"customStarter"&&k[g])this.customStarter=k[g];else if(g==="customScript"&&k[g])this.customScript=k[g];m[g]=k[g]}this.uid="f"+h++}this.tagsToRun=[];b.SUPER.call(this,m)}var q=D.opentag.filter.BaseFilter;var p=D.opentag.filter.URLFilter;var B=D.opentag.Utils;var h=0;D.Define.clazz("qubit.opentag.filter.Filter",b,p);b.prototype.customStarter=function(k,m,g){m(false)};b.prototype.isSession=function(){if(this.config.sessionDisabled)return false;if(this.customStarter===null&&this.customScript===null)return false;
return true};b.prototype.customScript=function(k){return true};b.prototype.match=function(k){var m=true;try{if(this.customScript){if(this._matchState===undefined)this._matchState=!!this.customScript(this.getSession());m=this._matchState}}catch(g){m=false}return m&&b.SUPER.prototype.match.call(this,k)};b.prototype.runTag=function(k){B.addToArrayIfNotExist(this.tagsToRun,k);if(!this.starterExecuted){if(!this._starterWasRun){this._starterWasRun=true;var m=function(g){this.reRun=g;this.starterExecuted=
(new Date).valueOf();this._processQueuedTagsToRun()}.bind(this);if(this.customStarter)this.customStarter(this.getSession(),m,k);else b.prototype.customStarter.call(this,this.getSession(),m,k)}}else if(this.reRun===true)k.run();else k.runOnce()};b.prototype._processQueuedTagsToRun=function(){for(var k=0;k<this.tagsToRun.length;k++){var m=this.tagsToRun[k];if(this.reRun===true)m.run();else m.runOnce()}};b.prototype.getState=function(k){if(k)this.setSession(k);var m=b.SUPER.prototype.getState.call(this);
if(m===q.state.DISABLED)return q.state.DISABLED;if(m===q.state.PASS)if(this.isSession())m=q.state.SESSION;if(this.config.script)m=this.config.script.call(this,m,this.getSession());this.lastState=m;return m};b.prototype.reset=function(){this._matchState=undefined;b.SUPER.prototype.reset.call(this);this._starterWasRun=undefined;this.starterExecuted=undefined;this.tagsToRun=[];this.reRun=undefined}})();L.html.GlobalEval={};L.html.GlobalEval.globalEval=function(b){if(window.execScript)window.execScript(b===
""?" ":b);else{var q=function(){window["eval"].call(window,b)};q()}};L.html.HtmlInjector={};L.html.HtmlInjector.inject=function(b,q,p,B,h){var k;var m;var g;var l;var w;var e;var y;if(p.toLowerCase().indexOf("\x3cscript")>=0){g=document.createElement("div");g.innerHTML="a"+p;l=g.getElementsByTagName("script");w=[];for(k=0,m=l.length;k<m;k+=1)w.push(l[k]);y=[];for(k=0,m=w.length;k<m;k+=1){e=w[k];var x={attributes:L.html.HtmlInjector.getAttributes(e)};if(e.src)x.src=e.src;else x.script=e.innerHTML;
y.push(x);e.parentNode.removeChild(e)}if(g.innerHTML)if(g.innerHTML.length>0)g.innerHTML=g.innerHTML.substring(1);L.html.HtmlInjector.doInject(b,q,g);L.html.HtmlInjector.loadScripts(y,0,B,b)}else{g=document.createElement("div");g.innerHTML=p;L.html.HtmlInjector.doInject(b,q,g);if(B)B()}};L.html.HtmlInjector.doInject=function(b,q,p){if(p.childNodes.length>0){for(var B=document.createDocumentFragment();p.childNodes.length>0;)B.appendChild(p.removeChild(p.childNodes[0]));if(q)L.html.HtmlInjector.injectAtStart(b,
B);else L.html.HtmlInjector.injectAtEnd(b,B)}};L.html.HtmlInjector.injectAtStart=function(b,q){if(b.childNodes.length===0)b.appendChild(q);else b.insertBefore(q,b.childNodes[0])};L.html.HtmlInjector.injectAtEnd=function(b,q,p){if(!p)p=1;if(b===document.body&&document.readyState!=="complete"&&p<50)setTimeout(function(){L.html.HtmlInjector.injectAtEnd(b,q,p+1)},100);else b.appendChild(q)};L.html.HtmlInjector.loadScripts=function(b,q,p,B){var h;var k;var m=false;for(h=b.length;q<h;q+=1){k=b[q];if(k.src){m=
true;break}else L.html.GlobalEval.globalEval(k.script)}if(m)L.html.fileLoader.load(k.src,null,function(){L.html.HtmlInjector.loadScripts(b,q+1,p,B)},B,false,k.attributes);if(p&&q===h)p()};L.html.HtmlInjector.getAttributes=function(b){var q;var p;var B;var h;var k;var m={};if(b){B=b.attributes;p=B.length;for(q=0;q<p;q++){h=B[q].value;k=B[q].name.toLowerCase();if(h!==""&&(k==="id"||k==="class"||k==="charset"||k.substr(0,5)==="data-"))m[k]=h}return m}};(function(){function b(){y=y||{write:document.write,
writeln:document.writeln}}function q(){document.write=y.write;document.writeln=y.writeln;y=null}var p=D.opentag.filter.BaseFilter;var B=D.opentag.Utils;var h=L.html.HtmlInjector;var k=L.html.fileLoader;var m=D.opentag.filter.Filter;var g=function(){};D.Define.clazz("qubit.opentag.TagsUtils",g);var l=false;g.bodyLoaded=function(){if(l)return true;l=!!(document.body&&document.readyState!=="loading");return l};g.bodyAvailable=function(c){return!!document.body};var w={};var e={SUCCESS:"success",FAIL:"failure",
INIT:"not started"};g.loadScript=function(c){var f=c.url;var n=function(G,J,K){w[f].error=J;if(K){w[f].state=e.FAIL;c.onerror()}else{w[f].state=e.SUCCESS;c.onsuccess()}};if(w[f]){if(c.noMultipleLoad)return n(f,w[f].error,w[f].state===e.FAIL);w[f].count+=1}else w[f]={count:1,state:null};var C=!c.async;var F=g.bodyLoaded();if(C&&F);C=C&&!F;if(C)g.writeScriptURL(f,function(G,J){n(f,J,!G)});else k.load(f,false,n,c.node,c.async)};var y=null;g.redirectDocumentWritesToArray=function(c,f){var n=c;b();document.write=
function(C){n.push(C)};document.writeln=function(C){n.push(C)}};g.flushDocWritesArray=function(c,f,n,C,F){var G=f;if(G&&c){var J=c.splice(0,c.length);try{g.injectHTML(G,n,J.join("\n"),F||P);return true}catch(M){}}else{var K="Flushing location not found!";return false}if(F)F();return true};g.unlockDocumentWrites=function(){if(y)q()};var x=g.prototype.PACKAGE_NAME+".TagsUtils._writeScriptURL_callbacks";var A={};D.Define.namespace(x,A,I,true);var E=0;var r=(new Date).valueOf();g.writeScriptURL=function(c,
f){var n="_"+r+"_"+E++;var C=x+"."+n;var F=false;A[n]=function(R){if(F)return;F=true;if(R)f(false,"error while loading script "+c);else f(true);A[n]=undefined;delete g.writeScriptURL.callbacks[n]};var G='if(this.readyState \x3d\x3d\x3d "loaded" || '+'this.readyState \x3d\x3d\x3d "complete"){ try {'+C+"(true)"+"} catch (ex) {}}";var J="try{"+C+"(false)}catch(ex){}";var K="try{"+C+"(true)}catch(ex){}";var M="scr";var N;c=k.tidyUrl(c);N="\x3c"+M+"ipt onload\x3d'"+J+"'  onerror\x3d'"+K+"' onreadystatechange\x3d'"+
G+"' type\x3d'text/javascript' "+" src\x3d'"+c+"'\x3e"+"\x3c/"+M+"ipt\x3e";if(y){q();document.write(N);b()}else document.write(N);B.bodyReady(function(){if(!F){F=true;f(true)}})};g.writeScriptURL.callbacks={};var u=p.state.SESSION;var z=p.state.PASS;var d=p.state.FAIL;g.filtersState=function(c,f,n,C){c=c.sort(function(aa,ja){try{var ba=ja.config.order;var ca=aa.config.order;if(isNaN(-ca))ca=0;if(isNaN(-ba))ba=0;return ba-ca}catch(ka){return 0}});var F=z;if(!c||c.length===0)return F;var G=null;var J=
false;var K=false;var M=0;var N;var R;var S=[];var O;var V;for(var W=0;W<c.length;W++){O=c[W];O.setSession(f);if(O.match()){N=O.getState();if(N>0){if(M===0||M>N)M=N}else if(N===p.state.DISABLED)J=true;else if(N===u){K=true;G=O;R=O;S.push(O)}else G=O}else V=O}var T=false;if(G===null){T=true;if(!J)F=d;else F=z}else if(G.config.include)F=N;else F=N===z?d:z;if(M>0&&(F===z||T))F=M;if(F===u||F===z&&K){if(!R.config.include)return d;F=u;if(R instanceof m&&R.isSession())if(C)for(var U=0;U<S.length;U++)try{S[U].runTag(n)}catch(aa){}}if(n.config.dedupe&&
F===z)if(V&&V instanceof m&&V.isSession()){n.sendDedupePing=true;F=d}return F};g.injectHTML=function(c,f,n,C){return h.inject(c,!f?1:0,n,C||P)};g.getHTMLLocationForTag=function(c){var f;var n=c.prepareLocationObject(c.config.locationObject);switch(n){case "HEAD":f=document.getElementsByTagName("head")[0];break;case "BODY":f=document.body;break;default:if(n)f=document.getElementById(n);else f=document.body}return f}})();(function(){function b(g){this.config={};this.handlers=[];this.parameters=null;
this.callHandlersOnRead=false;if(g){this.uniqueId="BV"+h++;b.ALL_VARIABLES[this.uniqueId]=this;for(var l in g)if(g.hasOwnProperty(l)){this.config[l]=g[l];if(l==="value")this.value=g.value}var w=b.register(this);if(w&&w!==this);return w}}function q(g){if(m)return false;for(var l=0;l<k.length;l++)try{var w=k[l];w.getValue()}catch(e){}B.setTimeout(q,b.CHECK_POLL_RATE);return true}var p=D.opentag.Utils;var B=D.opentag.Timed;var h=0;D.Define.clazz("qubit.opentag.pagevariable.BaseVariable",b);b.ALL_VARIABLES=
{};var k=[];b.OBSERVED_VARIABLES=k;b.pageVariables=[];b.register=function(g){if(g instanceof b){for(var l=0;l<b.pageVariables.length;l++){var w=b.pageVariables[l];if(g===w)return w}b.pageVariables.push(g);return g}return null};b.prototype.getValue=function(){this._updateCurrentValue(this.value);return this.currentValue};b.prototype._updateCurrentValue=function(g){if(!this.valuesAreEqual(g,this.currentValue)){this.oldValue=this.currentValue;this.currentValue=g;if(!m||this.callHandlersOnRead)this._handleValueChanged();
return true}return false};b.prototype.getDefaultValue=function(){return this.defaultValue};b.prototype.setDefaultValue=function(g){this.defaultValue=g};b.prototype.exists=function(g){var l=p.variableExists(this.getValue());if(g)l=l||p.variableExists(this.getDefaultValue());return l};b.prototype.getRelativeValue=function(g,l){var w=this.getValue();if(!p.variableExists(w))w=l;var e;if(g&&!p.variableExists(w)){e=this.getDefaultValue();if(p.variableExists(e))w=e}return w};b.prototype.replaceToken=function(g,
l,w,e){var y=this.exists();var x=y?this.getValue():w;g="\\$\\{"+g+"\\}";if(e||x instanceof Array){var A;if(y)A=this.getValueAccessorString();else A=p.getAnonymousAcessor(x);return l.replace(new RegExp(g,"g"),A)}else return l.replace(new RegExp(g,"g"),x)};b.prototype.getAccessorString=function(){return"qubit.opentag.pagevariable.BaseVariable.ALL_VARIABLES."+this.uniqueId};b.prototype.getValueAccessorString=function(){return this.getAccessorString()+".getValue()"};b.prototype.onValueChanged=function(g,
l){if(p.addToArrayIfNotExist(this.handlers,g)===-1);if(l!==false)this.startObservingForChanges()};b.prototype.deatchOnValueChanged=function(g){if(p.removeFromArray(this.handlers,g)>0);};b.prototype._handleValueChanged=function(){var g={oldValue:this.oldValue,newValue:this.currentValue,variable:this};for(var l=0;l<this.handlers.length;l++)try{this.handlers[l](g)}catch(w){}};var m=true;b.CHECK_POLL_RATE=333;b.prototype.startObservingForChanges=function(){this.addToObservedVariables();m=false;q()};b.prototype.stopObservingForChanges=
function(){this.removeFromObservedVariables();if(k.length===0)m=true};b.prototype.addToObservedVariables=function(){p.addToArrayIfNotExist(k,this)};b.prototype.removeFromObservedVariables=function(){p.removeFromArray(k,this)};b.prototype.getObservedVariables=function(){return k};b.prototype.valuesAreEqual=function(g,l){return g===l}})();(function(){function b(B){this._lockExprObject={};b.SUPER.apply(this,arguments)}var q=D.opentag.Utils;var p=D.opentag.Timed;D.Define.clazz("qubit.opentag.pagevariable.Expression",
b,D.opentag.pagevariable.BaseVariable);b.prototype.getValue=function(){var B;var h;var k=this.value;try{if(k&&k.indexOf("[#]")===-1){var m=q.gevalAndReturn(k);B=m.result;this.failMessage=null;h=m.error}else B=b.parseUVArray(k)}catch(w){h=w}if(h){var g="could not read value of expression: \n"+k+"\nexact cause: "+h;if(this.failMessage!==g)this.failMessage=g;B=null}var l=this._updateCurrentValue(B);return B};b.parseUVArray=function(B){var h=B.split("[#]");var k=q.gevalAndReturn(h[0]).result;var m=[];
var g=h[1];if(g.indexOf(".")===0)g=g.replace(".","");for(var l=0;l<k.length;l++){var w=q.getObjectUsingPath(g,k[l]);m.push(w)}return m};b.prototype.replaceToken=function(B,h,k,m){if(this.getValue()instanceof Array)m=true;return b.SUPER.prototype.replaceToken.call(this,B,h,k,m)}})();(function(){function b(p){b.SUPER.apply(this,arguments)}var q=D.opentag.Utils;D.Define.clazz("qubit.opentag.pagevariable.DOMText",b,D.opentag.pagevariable.BaseVariable);b.prototype.getValue=function(){var p=q.getElementValue(this.value);
this._updateCurrentValue(p);return p}})();(function(){function b(q){b.SUPER.apply(this,arguments);this._lockObject={}}D.Define.clazz("qubit.opentag.pagevariable.Cookie",b,D.opentag.pagevariable.BaseVariable);b.prototype.getValue=function(){var q=D.Cookie.get(this.value);this._updateCurrentValue(q);return q}})();(function(){function b(p){b.SUPER.apply(this,arguments)}var q=D.opentag.Utils;D.Define.clazz("qubit.opentag.pagevariable.URLQuery",b,D.opentag.pagevariable.BaseVariable);b.prototype.getValue=
function(){var p=q.getQueryParam(this.value);this._updateCurrentValue(p);return p}})();(function(){function b(){}function q(u,z){var d=[];try{var c=u.parameters;if(c)for(var f=0;f<c.length;f++)if(u.getVariableForParameter(c[f])===z)d.push(c[f])}catch(n){}return d}var p=D.opentag.Utils;var B=D.opentag.TagsUtils;var h=D.opentag.Timed;var k=D.opentag.pagevariable.BaseVariable;var m=D.opentag.pagevariable.Expression;var g=D.opentag.pagevariable.UniversalVariable;var l=D.opentag.pagevariable.DOMText;var w=
D.opentag.pagevariable.Cookie;var e=D.opentag.pagevariable.URLQuery;D.Define.clazz("qubit.opentag.TagHelper",b);b.injectHTMLForLoader=function(u,z,d,c){var f=c!==undefined?c:u.getHtml();if(f){var n=u.config.locationPlaceHolder==="END";var C=B.getHTMLLocationForTag(u);u.injectHTMLNotFinished=true;try{if(C)B.injectHTML(C,n,f,function(){u.injectHTMLNotFinished=false;if(z)try{z()}catch(F){}}.bind(u));else if(d&&document.readyState==="loading"){document.write(f);u.injectHTMLNotFinished=false}else u.injectHTMLFailed=
(new Date).valueOf()}catch(F){u.injectHTMLNotFinished=false;u.injectHTMLFailed=(new Date).valueOf()}}};b.getAllVariablesWithParameters=function(u){var z=u.getPageVariables();var d=[];for(var c=0;c<z.length;c++){var f=z[c];var n=q(u,f);for(var C=0;C<n.length;C++)d.push({parameter:n[C],variable:f})}return d};var y={};b.allParameterVariablesReadyForTag=function(u,z){var d=z;var c=true;var f=u.getPageVariables();for(var n=0;n<f.length;n++){var C=f[n];try{var F=q(u,C);var G=C.exists();if(!G&&d){if(F.length>
0)G=!!F[0].defaultValue;G=G||C.exists(true)}if(!G){c=false;break}}catch(J){c=false;break}}return c};var x="2";var A="3";var E="4";var r="5";b.validateAndGetVariableForParameter=function(u){if(u.hasOwnProperty("variable")&&u.variable)u.variable=b.initPageVariable(u.variable);return u.variable};b.initPageVariable=function(u){if(!u||u instanceof k)return u;if(typeof u==="string"){var z=p.getObjectUsingPath(u);if(z&&z instanceof k)return z}switch(u.type){case x:return new m(u);case A:return new e(u);
case E:return new w(u);case r:return new l(u);case "EPRESSION":return new m(u);case "URL_PARAMETER":return new e(u);case "COOKIE_VALUE":return new w(u);case "DOM_VALUE":return new l(u);default:return new k(u)}}})();(function(){function b(B){this.calls={}}var q=D.Define;var p=D.opentag.Utils;b.prototype.on=function(B,h){if(!this.calls[B])this.calls[B]=[];return p.addToArrayIfNotExist(this.calls[B],h)};b.prototype.call=function(B,h){var k=this.calls[B];if(k)for(var m=0;m<k.length;m++)try{k[m](h)}catch(g){}};
b.prototype.remove=function(B,h){if(this.calls[B])return p.removeFromArray(this.calls[B],h);return null};b.prototype.removeAll=function(B){var h=0;for(var k in this.calls)if(this.calls.hasOwnProperty(k))h+=p.removeFromArray(this.calls[k],B);return h};b.prototype.clear=function(){this.calls={}};q.clazz("qubit.Events",b)})();(function(){function b(e){this.log=new g("",function(){return this.CLASS_NAME+"["+this.config.name+"]"}.bind(this),"collectLogs");this.urlsLoaded=0;this.urlsFailed=0;this.runCounter=
0;this.events=new D.Events({});this._depLoadedHandler=function(){if(this.dependenciesLoaded()&&this.awaitingDependencies)this._triggerLoadingAndExecution()}.bind(this);this.config={name:"Tag-"+m++,async:true,usesDocumentWrite:false,timeout:this.LOADING_TIMEOUT,dependencies:[],url:null,urlLocation:null,locationPlaceHolder:"END",locationObject:null,dontWaitForInjectionLocation:false,noMultipleLoad:false,loadDependenciesOnLoad:false};this.delayDocWrite=false;this.dependencies=[];this._lockObject={count:0};
this._lockObjectDepsLoaded={};this.genericDependencies=[];if(e){if(!e.name){var y="Tag-"+m++;this.config.name=y}this.addState("INITIAL");for(var x in e)this.config[x]=e[x];if(e.genericDependencies)this.genericDependencies=this.genericDependencies.concat(e.genericDependencies);if(e.dependencies)this.dependencies=e.dependencies.concat(this.dependencies);if(e.PACKAGE)this._package=e.PACKAGE;this.onInit()}}function q(){if(this.cancelled){this._handleCancel();return}this.waitForDependenciesFinished=(new Date).valueOf();
var e=this._fullBodyNeededAndUnLoaded();var y=this._bodyNeededButNotAvailable();if(e||y)this.waitForDependenciesFinished=false;else{if(!this.timeoutCountdownStart)this.timeoutCountdownStart=(new Date).valueOf();if(this.allDependenciesLoaded())this._markLoadedSuccesfuly();else if(this._loadingOutOfTimeFrames()){this.loadingTimedOut=(new Date).valueOf();if(this.allDependenciesLoaded(true))this._markLoadedSuccesfuly();else{this.addState("TIMED_OUT");this._markLoadingDependenciesFailed();this._triggerOnLoadTimeout()}}else this.waitForDependenciesFinished=
false}if(!this.waitForDependenciesFinished)this._setTimeout(q.bind(this),65);else this.addState("LOADED_DEPENDENCIES")}var p=D.opentag.Utils;var B=D.opentag.TagsUtils;var h=D.opentag.Timed;var k=D.opentag.TagHelper;var m=0;var g=D.opentag.Log;var l="after";var w="before";D.Define.clazz("qubit.opentag.GenericLoader",b);b.prototype.onInit=P;b.prototype.LOADING_TIMEOUT=5*1E3;b.prototype.getHtml=function(){if(this.config.html)return this.config.html;if(this.htmlContent)return p.trim(this.htmlContent);
return null};b.prototype._executeScript=function(){var e=false;try{this.script();e=true}catch(y){this.addState("EXECUTED_WITH_ERRORS");this.executedWithErrors=(new Date).valueOf();this._onError(y)}finally{this._onExecute(e)}};b.prototype.getTimeout=function(){return this._getTimeout()};b.prototype._getTimeout=function(e){var y=+this.config.timeout;var x=this.dependencies;if(y!==-1&&x.length>0){var A=0;e=e||[];var E=p.indexInArray(e,this)!==-1;if(!E){e[e.length]=this;for(var r=0;r<x.length;r++){var u=
x[r]._getTimeout(e);if(u>A)A=u}if(A>0)y+=A}else return 0}return y};b.prototype._onExecute=function(e){this.onExecute(e)};b.prototype.onExecute=P;b.prototype._flushDocWrites=function(e){var y=true;this._docWriteNotFlushed=false;try{var x=B.getHTMLLocationForTag(this);if(x&&this._securedWrites&&this._securedWrites.length>0){var A=this.config.locationPlaceHolder==="END";y=B.flushDocWritesArray(this._securedWrites,x,A,this.log,e);if(y)this._docWriteFlushed=(new Date).valueOf();else this._docWriteNotFlushed=
(new Date).valueOf()}}catch(E){this._onError(E)}if(e)e();if(this._securedWrites&&this._securedWrites.length>0){y=false;this._docWriteNotFlushed=(new Date).valueOf()}return y};b.prototype.log=P;b.prototype.finished=function(){return!!this.runIsFinished};b.prototype.script=function(){};b.prototype.before=function(){this.beforeRun=(new Date).valueOf();try{this.events.call(w,this)}catch(e){this._onError(e)}};b.prototype.onBefore=function(e){this.events.on(w,e)};b.prototype.after=function(e){this.afterRun=
(new Date).valueOf();try{this.events.call(l,{success:e,tag:this})}catch(y){this._onError(y)}};b.prototype.onAfter=function(e){this.events.on(l,e)};b.prototype.runOnce=function(){if(!this._runOnceTriggered&&!this.scriptExecuted){this._runOnceTriggered=(new Date).valueOf();this.run()}};b.CANCEL_ALL=false;b.prototype.run=function(){if(!isNaN(this.config.runningLimit))if(this.config.runningLimit<=this.runCounter)return false;if(this.cancelled||b.CANCEL_ALL){this._handleCancel();return false}if(this.isRunning)return false;
if(this.lastRun)this.reset();this.lastRun=this.isRunning=(new Date).valueOf();this.runCounter++;this._ignoreDeps=!!this.ignoreDependencies;if(!this._ignoreDeps&&!this.dependenciesLoaded()){this._attachDepsEventsToContinue();return false}return this._triggerLoadingAndExecution()};b.prototype._triggerLoadingAndExecution=function(){this.awaitingDependencies=-(new Date).valueOf();this.load();if(this._ignoreDeps)this.execute();else this.waitForDependenciesAndExecute();return true};b.prototype._attachDepsEventsToContinue=
function(){this.awaitingDependencies=(new Date).valueOf();var e=this.dependencies;for(var y=0;y<e.length;y++)try{e[y].events.on("success",this._depLoadedHandler)}catch(x){}};b.prototype.dependenciesLoaded=function(){var e=this.dependencies;for(var y=0;y<e.length;y++)if(e[y]!==this){var x=+e[y].scriptExecuted>0;if(!x)return false}return true};b.prototype._setTimeout=function(e,y){this._wasTimed=(new Date).valueOf();return h.setTimeout(e,y)};b.prototype._handleCancel=function(){this.addState("CANCELLED");
try{this.onCancel()}catch(e){this._onError(e)}};b.prototype.waitForDependenciesAndExecute=function(){if(this.cancelled){this._handleCancel();return}if(this.loadedDependencies)this.execute();else if(this.loadingDependenciesFailed){this._markFailure();this._markFinished()}else this._setTimeout(this.waitForDependenciesAndExecute.bind(this),30)};b.prototype.execute=function(){this._triggerExecution()};b.prototype._triggerExecution=function(){if(this.cancelled){this._handleCancel();return}if(this.scriptExecuted)return;
var e=true;if(this.shouldWaitForDocWriteProtection())e=false;else{if(!this._beforeEntered){this._beforeEntered=(new Date).valueOf();var y=false;try{y=this.before()}catch(A){this._onError(A)}if(y){this._markFailure();this._markFinished();return}}e=this.loadExecutionURLsAndHTML(this._triggerExecution.bind(this))}if(this.scriptExecuted)return;if(this.unexpectedFail)e=true;if(!e)this._setTimeout(this._triggerExecution.bind(this),30);else{this._flushDocWrites();if(this.scriptLoadingFailed||this.injectHTMLFailed||
this.unexpectedFail)this._markFailure();else{this.scriptExecuted=(new Date).valueOf();this.addState("EXECUTED");this._executeScript()}if(this.cancelled){this._handleCancel();return false}else{var x=this.scriptExecuted>0;try{if(!this.afterRun){this.afterRun=(new Date).valueOf();this.after(x)}}catch(A){this.executedWithErrors=(new Date).valueOf()}if(!this.executedWithErrors)if(x)this.events.call("success")}this._flushDocWrites();this._markFinished()}};b.prototype._markFailure=function(){this.scriptExecuted=
-(new Date).valueOf();this.addState("FAILED_TO_EXECUTE")};b.prototype._markFinished=function(){this.runIsFinished=(new Date).valueOf();this.isRunning=false;if(b.LOCK_DOC_WRITE===this){this._flushDocWrites();B.unlockDocumentWrites();b.LOCK_DOC_WRITE=false}this.onFinished(true)};b.prototype.onFinished=P;b.prototype.onCancel=P;b.prototype.onFinished=P;b.prototype.shouldWaitForDocWriteProtection=function(){if(this.willSecureDocumentWrite())if(!b.LOCK_DOC_WRITE){b.LOCK_DOC_WRITE=this;this._secureWriteAndCollectForExecution()}else if(b.LOCK_DOC_WRITE!==
this){if(!this._lockedDocWriteInformed)this._lockedDocWriteInformed=(new Date).valueOf();return true}return false};b.prototype.runWithoutDependencies=function(){this.ignoreDependencies=true;this.run()};b.prototype.loadExecutionURLsAndHTML=function(e){if(this.cancelled){this._handleCancel();return true}if(!this._loadExecutionURLsAndHTMLInformed)this._loadExecutionURLsAndHTMLInformed=true;this._triggerURLsLoading(e);if(!this.loadURLsNotFinished){this._flushDocWrites();this._triggerHTMLInjection();this._flushDocWrites();
if(!this.injectHTMLNotFinished){this._flushDocWrites();if(!this._docWriteNotFlushed){if(this._docWriteFlushed);return true}}}return false};b.prototype._triggerURLsLoading=function(e){if(!this._urlLoadTriggered&&this.config.url){this._urlLoadTriggered=true;this.loadURLs(false,e)}};b.prototype._triggerHTMLInjection=function(){if(!this._injectHTMLTriggered&&this.getHtml()){this._injectHTMLTriggered=true;this.injectHTML()}};b.prototype.STATE={INITIAL:0,STARTED:1,LOADING_DEPENDENCIES:2,LOADED_DEPENDENCIES:4,
LOADING_URL:8,LOADED_URL:16,EXECUTED:32,EXECUTED_WITH_ERRORS:64,FAILED_TO_LOAD_DEPENDENCIES:128,FAILED_TO_LOAD_URL:256,FAILED_TO_EXECUTE:512,TIMED_OUT:1024,UNEXPECTED_FAIL:2048,CANCELLED:2048*2};b.prototype.addState=function(e){if(this.STATE.hasOwnProperty(e)){this.state=this.state|this.STATE[e];try{this.onStateChange(e)}catch(y){this._onError(y)}}};b.prototype.onStateChange=P;b.prototype.cancel=function(){this.cancelled=(new Date).valueOf()};b.prototype.unCancel=function(){this.cancelled=undefined};
b.prototype.state=b.prototype.STATE.INITIAL;b.prototype._markLoadedSuccesfuly=function(){this.loadedDependencies=(new Date).valueOf();this.onAllDependenciesLoaded()};b.prototype._secureWriteAndCollectForExecution=function(){if(!this._securedWrites){this._securedWrites=[];B.redirectDocumentWritesToArray(this._securedWrites,this.log)}};b.prototype._markLoadingDependenciesFailed=function(){this.addState("FAILED_TO_LOAD_DEPENDENCIES");this.loadingDependenciesFailed=(new Date).valueOf()};b.prototype.allDependenciesLoaded=
function(e,y){return this.getDependenciesToBeLoaded(e,y).length===0};b.prototype.getDependenciesToBeLoaded=function(e,y){var x=y||[];if(!this.injectionLocationReady())x.push("injection location");var A;var E=this.dependencies;for(A=0;A<E.length;A++)if(E[A]!==this){var r=+E[A].scriptExecuted>0;if(!r){var u=E[A].config?E[A].config.name:"anonymous";x.push("dependant Tag with name -\x3e "+u)}}for(A=0;A<this.genericDependencies.length;A++){var z=this.genericDependencies[A](this);if(!z)x.push("this.genericDependencies["+
A+"] (index: "+A+")")}if(x!=="");return x};b.prototype.docWriteAsksToWaitForBody=function(){return!!(this.delayDocWrite&&this.config.usesDocumentWrite)};b.prototype._bodyNeededButNotAvailable=function(){if(this._dontWaitForInjections())return false;return this._isBodyLocationNeeded()&&!B.bodyAvailable()};b.prototype._isBodyLocationNeeded=function(){if(!this.isLoadingAsynchronously())return false;if(this._isBodyLocationSet())return true;else{var e=this.config.locationObject==="HEAD";return e&&this.config.locationPlaceHolder===
"END"}};b.prototype._isBodyLocationSet=function(){var e=this.config.locationObject;return!e||e==="BODY"};b.prototype._fullBodyNeededAndUnLoaded=function(){if(this._dontWaitForInjections())return false;var e=false;if(this._isBodyLocationNeeded())e=this.config.locationPlaceHolder==="END";e=e||(this.fullbodyNeeded||this.docWriteAsksToWaitForBody());return e&&!p.bodyReady()};b.prototype._dontWaitForInjections=function(){return this.config.dontWaitForInjectionLocation||this.dontWaitForInjectionLocation||
b.dontWaitForInjectionLocation};b.prototype.injectionLocationReady=function(){if(this._dontWaitForInjections())return true;if(this._fullBodyNeededAndUnLoaded())return false;if(!this.isLoadingAsynchronously())return true;return!!B.getHTMLLocationForTag(this)};b.prototype._loadingOutOfTimeFrames=function(){if(this.getTimeout()<0)return false;return(new Date).valueOf()-this.timeoutCountdownStart>this.getTimeout()};b.prototype.loadDependencies=function(){this._loadDependencies()};b.prototype.addClientDependenciesList=
function(e,y){return this.addDependenciesList(e,D.Define.clientSpaceClasspath())};b.prototype.addDependenciesList=function(e,y){if(!e||e.length===0)return;if(!this.failedDependenciesToParse)this.failedDependenciesToParse=[];var x=this.dependencies;for(var A=0;A<e.length;A++){var E=e[A];var r=false;if(E instanceof b)x.push(E);else if(typeof E==="string"){var u=E;if(y)E=y+"."+E;var z=p.getObjectUsingPath(E);if(z)if(z instanceof b)x.push(z);else r=true;else this.failedDependenciesToParse.push(u)}else r=
true;if(r){this.badDepsObjects=this.badDepsObjects||[];p.addToArrayIfNotExist(this.badDepsObjects,E)}}};b.prototype._loadDependencies=function(e){e=e||[];var y=this.dependencies;var x=p.indexInArray(e,this)!==-1;if(!x){e[e.length]=this;for(var A=0;A<y.length;A++)y[A].load(e)}};b.prototype.onError=P;b.prototype._onError=function(e){try{this.onError(e)}catch(y){}};b.prototype._triggerOnLoadTimeout=function(){this.onLoadTimeout()};b.prototype.onLoadTimeout=P;b.prototype.onScriptsLoadSuccess=P;b.prototype.onScriptLoadError=
P;b.prototype.onAllDependenciesLoaded=P;b.prototype.onBeforeLoad=null;b.prototype.load=function(){if(this.loadStarted)return;else{this.loadStarted=(new Date).valueOf();try{if(this.onBeforeLoad)this.onBeforeLoad()}catch(e){this._onError(e)}}this.addState("LOADING_DEPENDENCIES");try{if(!this._ignoreDeps&&this.config.loadDependenciesOnLoad)this.loadDependencies()}catch(e){throw e;}q.call(this)};b.prototype._singleUrlLoadHandler=function(e,y,x){++this.urlsLoaded;if(!e)++this.urlsFailed;if(this.urlsLoaded===
y.length){this.loadURLsNotFinished=false;if(e&&this.urlsFailed===0){this.addState("LOADED_URL");this.urlsLoaded=(new Date).valueOf();try{if(x)x(true)}catch(E){this._onError(E)}finally{this.onScriptsLoadSuccess()}}else{var A="error loading urls. Failed "+this.urlsFailed;this._onError(A);this.addState("FAILED_TO_LOAD_URL");this.urlsLoaded=-(new Date).valueOf();try{this.scriptLoadingFailed=true;if(x)x(false)}catch(E){this._onError(E)}finally{this.onScriptLoadError(A)}}}};b.prototype.loadURLs=function(e,
y){var x=e||this.config.url;this.addState("LOADING_URL");try{if(x&&!(x instanceof Array))x=[x];for(var A=0;A<x.length;A++){this.loadURLsNotFinished=true;var E=x[A];E=this.prepareURL(E);this.loadURL(E,function(r){this._singleUrlLoadHandler(r,x,y)}.bind(this))}}catch(r){this.loadURLsNotFinished=false;this.addState("UNEXPECTED_FAIL");this.unexpectedFail=(new Date).valueOf();this._onError(r)}};b.prototype.prepareLocationObject=function(e){return e};b.prototype.prepareURL=function(e){return e};b.prototype.prepareHTML=
function(e){return e};b.prototype.loadURL=function(e,y,x){var A=e;this.addState("LOADING_URL");B.loadScript({onsuccess:function(){try{if(y)y(true)}catch(E){}}.bind(this),onerror:function(){try{if(y)y(false)}catch(E){}}.bind(this),url:A,node:x||this.config.urlLocation,async:this.isLoadingAsynchronously(),noMultipleLoad:this.config.noMultipleLoad})};b.prototype.reset=function(){var e;this._injectHTMLTriggered=e;this._loadExecutionURLsAndHTMLInformed=e;this._lockedDocWriteInformed=e;this._runOnceTriggered=
e;this._urlLoadTriggered=e;this.afterRun=e;this.beforeRun=e;this.filtersRunTriggered=e;this.injectHTMLFailed=e;this.loadStarted=e;this.loadURLsNotFinished=e;this.loadedDependencies=e;this.loadingDependenciesFailed=e;this.loadingTimedOut=e;this.runIsFinished=e;this.scriptExecuted=e;this.scriptLoadingFailed=e;this.delayDocWrite=e;this._securedWrites=e;this.state=0;this.unexpectedFail=e;this.urlsFailed=0;this.urlsLoaded=0;this.waitForDependenciesFinished=e;this.isRunning=e;this._lastRun=e;this.cancelled=
e;this._beforeEntered=e;this.awaitingDependencies=e;this.timeoutCountdownStart=e;this.addState("INITIAL")};b.prototype.isLoadingAsynchronously=function(){if(this._wasTimed)return true;return!!(this.config.async||this.forceAsynchronous)};b.prototype.willSecureDocumentWrite=function(){return this.config.usesDocumentWrite&&this.isLoadingAsynchronously()};b.prototype.injectHTML=function(e){var y=!this.docWriteAsksToWaitForBody();var x=this.prepareHTML(this.getHtml());if(x)k.injectHTMLForLoader(this,e,
y,x)};b.prototype.clone=function(){var e=new b(this.config);return e}})();(function(){function b(d){var c={filterTimeout:d&&d.filterTimeout||this.FILTER_WAIT_TIMEOUT,PACKAGE:d&&d.PACKAGE,dedupe:false,needsConsent:false,inactive:false,variables:null,runner:null,disabled:false,locked:false,reRunOnVariableChange:false};p.setIfUnset(d,c);b.SUPER.apply(this,arguments);this.namedVariables={};this.parameters=[];this.filters=[];this.session=null;this.pingSent=false;this.reRunCounter=0;if(d){this.addState("INITIAL");
try{b.register(this)}catch(f){}this.setupConfig(d);this.uniqueRefString=null;if(d.init)try{d.init.call(this,d)}catch(f){}this.onTagInit();this.handleVariableChange=this._handleVariableChange.bind(this)}}function q(d,c){var f=d.namedVariables;var n=g.initPageVariable(f[c]);f[c]=n;return n}var p=D.opentag.Utils;var B=D.opentag.TagsUtils;var h=D.opentag.Timed;var k=D.opentag.filter.BaseFilter;var m=D.opentag.GenericLoader;var g=D.opentag.TagHelper;var l=D.opentag.pagevariable.BaseVariable;var w=D.Cookie;
var e=D.Define;e.clazz("qubit.opentag.BaseTag",b,m);b.prototype.setupConfig=function(d){if(!d)return;if(d.filters)this.addFilters(d.filters);if(d.parameters)this.addParameters(d.parameters);if(d.variables)for(var c in d.variables)if(d.variables.hasOwnProperty(c)){var f=this.getParameterByTokenName(c);if(f){var n=d.variables[c];f.variable=n;if(n.defaultValue!==undefined)f.defaultValue=n.defaultValue;if(n.uv!==undefined)f.uv=n.uv}}if(d.locked)this.lock()};b.prototype.valueForToken=function(d,c){var f=
this.getParameterByTokenName(d);if(f){if(c===undefined)if(this.loadingTimedOut)c=true;return this.getParameterValue(f,c)}var n=this.namedVariables;if(n&&n[d]){var C=q(this,d);if(C)return C.getRelativeValue(c)}return undefined};b.prototype.addParameters=function(d){this.parameters=this.parameters.concat(d)};b.prototype.LOADING_TIMEOUT=5*1E3;b.prototype.FILTER_WAIT_TIMEOUT=-1;b.prototype._isVariable=function(d){return d!==null&&d!==undefined};b.prototype.run=function(){if(this.destroyed)throw"Tag is destroyed.";
this.resolveAllDynamicData();var d=this.parameters;if(d)for(var c=0;c<d.length;c++){var f=this.getVariableForParameter(d[c]);if(!this._isVariable(f)){this._markLoadingDependenciesFailed();this._markFinished();return}}if(this.config.runner){var n=false;try{this.addState("AWAITING_CALLBACK");n=this._runner=(new Date).valueOf();this.config.runner.call(this)}catch(C){}return n}else{this._runner=false;return this.start()}};b.prototype.lock=function(){this.locked=true;this._unlock=null};b.prototype.unlock=
function(){this.locked=false;if(this._unlock){this._unlock();this._unlock=false}};b.prototype.start=function(){if(!this.locked)return b.SUPER.prototype.run.call(this);else{this._unlock=function(){return b.SUPER.prototype.run.call(this)}.bind(this);return false}};b.prototype.startOnce=function(){if(!this.locked)return b.SUPER.prototype.runOnce.call(this);else{this._unlock=function(){return b.SUPER.prototype.runOnce.call(this)}.bind(this);return false}};b.prototype.getFilters=function(){return this.filters};
b.prototype.runOnceIfFiltersPass=function(){if(!this._runOnceIfFiltersPassTriggered&&!this.scriptExecuted){this._runOnceIfFiltersPassTriggered=(new Date).valueOf();this.runIfFiltersPass()}};b.prototype.runIfFiltersPass=function(){if(this.destroyed)throw"Tag is destroyed.";this.resolveAllDynamicData();var d=this.filtersState(true);this.addState("FILTER_ACTIVE");if(!this.filtersRunTriggered)this.filtersRunTriggered=(new Date).valueOf();if(d===k.state.SESSION){this.addState("AWAITING_CALLBACK");this.awaitingCallback=
(new Date).valueOf()}else if(d===k.state.PASS){this.filtersPassed=(new Date).valueOf();try{this.onFiltersPassed()}catch(f){}this.run()}else if(d===k.state.FAIL){this._markFiltersFailed();this._markFinished()}else if(d>0){var c=this.config.filterTimeout;if(c<0||(new Date).valueOf()-this.filtersRunTriggered>c){if(!this._awaitingForFilterInformed){this._awaitingForFilterInformed=(new Date).valueOf();try{this.onFiltersDelayed()}catch(f){}}this._setTimeout(this.runIfFiltersPass.bind(this),d)}else{this._markFiltersFailed();
this._markFinished();this.filtersRunTimedOut=(new Date).valueOf()}}try{this.onFiltersCheck(d)}catch(f){}return d};b.prototype._markFiltersFailed=function(){this.addState("FILTERS_FAILED");this.filtersPassed=-(new Date).valueOf()};b.prototype.STATE={INITIAL:0,FILTER_ACTIVE:1,AWAITING_CALLBACK:2,FILTERS_FAILED:4,STARTED:8,LOADING_DEPENDENCIES:16,LOADED_DEPENDENCIES:32,LOADING_URL:64,LOADED_URL:128,EXECUTED:256,EXECUTED_WITH_ERRORS:512,FAILED_TO_LOAD_DEPENDENCIES:1024,FAILED_TO_LOAD_URL:2048,FAILED_TO_EXECUTE:4096,
TIMED_OUT:4096*2,UNEXPECTED_FAIL:4096*2*2,CANCELLED:4096*2*2*2};b.prototype.addState=function(d){b.SUPER.prototype.addState.call(this,d);try{b.onStateChange(this)}catch(C){}this.stateStack=[];var c=this.STATE;var f=this.state;var n=this.stateStack;if(f&c.INITIAL)n.push("Initial state.");if(f&c.FILTER_ACTIVE)n.push("Tag running with filters pass triggered.");if(f&c.FILTERS_FAILED)n.push("Filters failed to pass.");if(f&c.AWAITING_CALLBACK)n.push("Awaiting callback to run this tag. Not pooling.");if(f&
c.STARTED)n.push("Tag is initialized and loading has been started.");if(f&c.LOADING_DEPENDENCIES)n.push("Dependencies are being loaded.");if(f&c.LOADED_DEPENDENCIES)n.push("Dependencies loading process has been finished.");if(f&c.LOADING_URL)n.push("External URL is being loaded.");if(f&c.LOADED_URL)n.push("External URL has been loaded.");if(f&c.EXECUTED)n.push("Main script has been executed.");if(f&c.EXECUTED_WITH_ERRORS)n.push("Main script has been executed but errors occured.");if(f&c.FAILED_TO_LOAD_DEPENDENCIES)n.push("Dependencies has failed to load.");
if(f&c.FAILED_TO_LOAD_URL)n.push("URL location failed to load.");if(f&c.FAILED_TO_EXECUTE)n.push("Script failed to execute.");if(f&c.TIMED_OUT)n.push("Script timed out awaiting for dependencies.");if(f&c.UNEXPECTED_FAIL)n.push("Script occured UNEXPECTED exception and is failed.");if(f&c.CANCELLED)n.push("Tag has been cancelled.")};b.prototype.onTagInit=P;b.onStateChange=P;b.prototype.onFiltersDelayed=P;b.prototype.onFiltersPassed=P;b.prototype.onFiltersCheck=P;b.prototype.state=b.prototype.STATE.INITIAL;
b.prototype.arePageVariablesLoaded=function(d){return g.allParameterVariablesReadyForTag(this,d)};b.prototype.getDependenciesToBeLoaded=function(d,c){var f=c||[];if(!this.arePageVariablesLoaded(d))f.push("page variables");return b.SUPER.prototype.getDependenciesToBeLoaded.call(this,d,f)};b.prototype.resolveAllDynamicData=function(){this.resolvePageVariables();this.resolveDependencies();this.resolveFilters()};b.prototype.resolveDependencies=function(){var d=this.failedDependenciesToParse;if(d){this.failedDependenciesToParse=
null;this.addDependenciesList(d,e.clientSpaceClasspath())}return this.dependencies};b.prototype.addClientVariablesMap=function(d){this.unresolvedClientVariablesMap=this._addVariablesMap(d,e.clientSpaceClasspath());return this.unresolvedClientVariablesMap};b.prototype.resolvePageVariables=function(){var d=this.unresolvedClientVariablesMap;if(d){this.unresolvedClientVariablesMap=null;this.addClientVariablesMap(d)}d=this.unresolvedVariablesMap;if(d){this.unresolvedVariablesMap=null;this.addVariablesMap(d)}return this.getPageVariables()};
b.prototype.addVariablesMap=function(d){this.unresolvedVariablesMap=this._addVariablesMap(d);return this.unresolvedVariablesMap};b.prototype._addVariablesMap=function(d,c){if(!d)return;var f={};var n=this.namedVariables;for(var C in d)if(d.hasOwnProperty(C)){var F=d[C];if(F instanceof l)n[C]=F;else if(typeof F==="string"){var G=F;if(c)F=c+"."+F;var J=p.getObjectUsingPath(F);if(J)if(J instanceof l)n[C]=J;else n[C]=F;else f[C]=G}else;}return f};b.prototype.prepareURL=function(d){return this.replaceTokensWithValues(d)};
b.prototype.prepareLocationObject=function(d){return this.replaceTokensWithValues(d)};b.prototype.prepareHTML=function(d){if(d)d=this.replaceTokensWithValues(d);return d};b.prototype._executeScript=function(){if(this.config&&this.config.script)if(typeof this.config.script==="function")this.script=this.config.script;else{var d=this.replaceTokensWithValues(String(this.config.script));this.script=p.expressionToFunction(d).bind(this)}b.SUPER.prototype._executeScript.call(this)};b.prototype.replaceTokensWithValues=
function(d){if(!d||d.indexOf("${")===-1)return d;var c=this.parameters;if(c)for(var f=0;f<c.length;f++){var n=c[f];var C=this.getVariableForParameter(n);if(C){var F=c[f].token;var G=this.valueForToken(F);d=C.replaceToken(F,d,G)}}return d};b.prototype.getParameter=function(d){var c=this.parameters;var f=null;if(c)for(var n=0;n<c.length;n++)if(c[n].name===d)f=c[n];return f};b.prototype.setParameterValueByTokenName=function(d,c){var f=this.getParameterByTokenName(d);if(f!==null){f.variable={value:c};
return true}return false};b.prototype.getParameterValue=function(d,c){var f=typeof d==="string"?this.getParameter(d):d;if(f){var n=this.getVariableForParameter(f);if(n)try{var C;if(c&&f.defaultValue!=="")C=p.gevalAndReturn(f.defaultValue).result;C=n.getRelativeValue(c,C);return C}catch(F){return undefined}}return undefined};b.prototype.filtersState=function(d){var c=d;return B.filtersState(this.filters,this.session,this,c)};b.prototype.addFilter=function(d){p.addToArrayIfNotExist(this.filters,d)};
b.prototype.addFilters=function(d){for(var c=0;c<d.length;c++)this.addFilter(d[c])};b.prototype.addClientFiltersList=function(d){this.unresolvedClientFilterClasspaths=this.addFiltersList(d,e.clientSpaceClasspath());return this.unresolvedClientFilterClasspaths};b.prototype.resolveFilters=function(){var d=this.unresolvedClientFilterClasspaths;if(d){this.unresolvedClientFilterClasspaths=null;this.addClientFiltersList(d)}return this.filters};b.prototype.addFiltersList=function(d,c){var f=[];for(var n=
0;n<d.length;n++)try{var C=d[n];var F=C;var G=null;if(typeof C==="string"){G=C;if(c)C=c+"."+C;C=p.getObjectUsingPath(C)}if(typeof C==="function"){var J=C;C=new J}if(!C);if(!C instanceof k)C=null;if(C)this.addFilter(C);else if(G)p.addToArrayIfNotExist(f,G)}catch(K){this.failedFilters=this.failedFilters||[];this.failedFilters.push(d[n])}return f};b.prototype.reset=function(){b.SUPER.prototype.reset.call(this);var d;this.filtersPassed=d;this.dedupePingSent=d;this.pingSent=false;this._runOnceIfFiltersPassTriggered=
d;this.filtersRunTriggered=d;this._runner=d;this.reRunCounter=0;this.detachVariablesChangedListeners()};b.prototype.resetFilters=function(){for(var d=0;d<this.filters.length;d++)this.filters[d].reset()};b.prototype.getParameterByTokenName=function(d){var c=null;if(this.parameters){var f=this.parameters;for(var n=0;n<f.length;n++)if(f[n].token===d)c=f[n]}return c};b.prototype.removeFilter=function(d){p.removeFromArray(this.filters,d)};var y=0;var x=[];var A={};var E={};b.register=function(d){var c=
p.addToArrayIfNotExist(x,d);if(c===-1)d._tagIndex=x.length-1;else d._tagIndex=c;if(d.config.id){var f="Q"+d.config.id;E[f]=d;d.uniqueId=f}else E[d.CLASSPATH]=d};b.getById=function(d){return E[String(d)]};b.prototype.getById=b.getById;b.prototype.unregister=function(d){b.unregister(d||this)};b.prototype.destroy=function(){this.destroyed=true;this.cancel();b.unregister(this)};b.unregister=function(d){var c=p.removeFromArray(x,d);d._tagIndex=-1};b.getTags=function(){return x};b.getAccessorsMap=function(){return A};
b.prototype.getTags=function(){return x};b.prototype.getPageVariables=function(){var d=this.parameters;var c=[];if(d)for(var f=0;f<d.length;f++){var n=this.getVariableForParameter(d[f]);if(this._isVariable(n))p.addToArrayIfNotExist(c,n)}if(this.namedVariables)for(var C in this.namedVariables)p.addToArrayIfNotExist(c,q(this,C));return c};b.prototype.getAccessorString=function(){if(!this._accessorsMapKey){this._accessorsMapKey="_"+y++;A[this._accessorsMapKey]=this}return"qubit.opentag.BaseTag.getAccessorsMap()."+
this._accessorsMapKey};b.prototype.getVariableForParameter=function(d){var c;var f=this.namedVariables;if(f&&f[d.token])c=q(this,d.token);if(!c)c=g.validateAndGetVariableForParameter(d);return c};b.prototype.printVariablesState=function(){var d=[];var c=g.getAllVariablesWithParameters(this);for(var f=0;f<c.length;f++){var n=c[f].parameter;var C=c[f].variable;var F;if(n&&n.token)F=this.valueForToken(n.token);else F=C.getRelativeValue(true);var G={name:C.config.name,exists:C.exists(),token:n?n.token:
null,value:F,variable:C};d.push(G)}return d};b.prototype._triggerOnLoadTimeout=function(){this.onLoadTimeout()};b.prototype.getId=function(){return this._getUniqueId()};b.prototype._getUniqueId=function(){if(this.config.id)return this.config.id;if(String(this.CLASSPATH).indexOf(e.STANDARD_CS_NS)===0)return this.CLASSPATH.substring(e.STANDARD_CS_NS.length+1);else return this.CLASSPATH+"#"+this.config.name};var r="qubit.tag.forceRunning_";var u="qubit.tag.disableRunning_";var z="qubit.tag.forceAllToRun";
b.prototype.cookieSaysToRunEvenIfDisabled=function(){var d=this._getUniqueId();var c=!!w.get(z);if(!c)c=!!w.get(r+d);return c};b.prototype.setCookieForcingTagToRun=function(){var d=this._getUniqueId();w.set(r+d,"true")};b.setCookieForcingTagsToRun=function(){w.set(z,"true")};b.prototype.setCookieToDisable=function(){var d=this._getUniqueId();w.set(u+d,"true")};b.prototype.rmCookieToDisable=function(){var d=this._getUniqueId();w.rm(u+d)};b.prototype.disabledByCookie=function(){var d=this._getUniqueId();
return!!w.get(u+d)};b.rmCookieForcingTagsToRun=function(){w.rm(z)};b.prototype.rmCookieForcingTagToRun=function(){var d=this._getUniqueId();w.rm(r+d)};b.rmAllDisablingCookies=function(){p.rmCookiesMatching(u)};b.rmAllCookiesForcingTagToRun=function(){p.rmCookiesMatching(r);b.rmCookieForcingTagsToRun()};b.prototype.onVariableChanged=function(d){this.attachVariablesChangedListeners();this.events.on("variableChanged",d)};b.prototype._handleVariableChange=function(d){this.events.call("variableChanged",
d);if(!this.isRunning&&this.config.reRunOnVariableChange){if(!isNaN(this.config.reRunLimit))if(this.config.reRunLimit<=this.reRunCounter)return;var c=this.reRunCounter+1;this.reset();this.reRunCounter=c;this.resetFilters();this.runIfFiltersPass()}};b.prototype.attachVariablesChangedListeners=function(d){var c=this.getPageVariables();var f=!!(this.config.reRunOnVariableChange||this.config.observeVariables||d);if(f)for(var n=0;n<c.length;n++){var C=c[n];C.onValueChanged(this.handleVariableChange,f)}};
b.prototype.detachVariablesChangedListeners=function(){var d=this.getPageVariables();for(var c=0;c<d.length;c++){var f=d[c];f.deatchOnValueChanged(this.handleVariableChange)}};b.prototype._markFinished=function(){b.SUPER.prototype._markFinished.call(this);this.attachVariablesChangedListeners()}})();(function(){var b=D.opentag.Utils;var q=D.opentag.filter.BaseFilter;var p=function(){};D.Define.clazz("qubit.opentag.Tags",p);p.getById=function(h){return D.opentag.BaseTag.getById(String(h))};p.getAllTagsByState=
function(){return D.opentag.Container.getAllTagsByState(p.getTags())};p.findTagByName=function(h){var k=this.getTags();var m=[];for(var g=0;g<k.length;g++)if(k[g].config.name===h)m.push(k[g]);return m};p.findTagByMatch=function(h){var k=this.getTags();var m=[];for(var g=0;g<k.length;g++)if(k[g].config.name.match(h))m.push(k[g]);return m};p.findTagContainers=function(h){var k=p.getContainers();var m=[];for(var g=0;g<k.length;g++){var l=k[g].tags;for(var w in l)if(l[w]===h){m.push(k[g]);break}}return m};
p.getTags=function(){return D.opentag.BaseTag.getTags()};p.resetAllTags=function(h){var k=p.getTags();for(var m=0;m<k.length;m++){k[m].reset();if(!h)k[m].resetFilters()}};p.getContainersPageVariables=function(){var h=p.getContainers();var k=[];for(var m=0;m<h.length;m++)k=k.concat(h.getPageVariables());return k};p.getAllPageVariables=function(){var h=p.getTags();var k=[];for(var m=0;m<h.length;m++)k=k.concat(h[m].getPageVariables());return k};p.cancelAll=function(){var h=p.getTags();for(var k=0;k<
h.length;k++)h[k].cancel()};p.resetAll=function(h){var k=p.getTags();for(var m=0;m<k.length;m++){k[m].reset();if(!h)k[m].resetFilters()}};p.getPageVariableByName=function(h){var k=p.getAllPageVariables();var m=[];for(var g=0;g<k.length;g++)if(k[g].config.name===h)m.push(k[g]);return m};p.getLoadTime=function(h){var k=h.beforeRun;var m=h.runIsFinished;if(isNaN(m))return{tag:h,loadTime:null};else return{tag:h,loadTime:m-k}};p.getLoadTimes=function(h){var k=[];if(h instanceof D.opentag.BaseTag){k.push([p.getLoadTime(h[l])]);
return k}h=h||p.getTags();var m=h instanceof Array;if(m)for(var g=0;g<h.length;g++){if(h[g]instanceof D.opentag.BaseTag)k.push(p.getLoadTime(h[g]))}else for(var l in h)if(h[l]instanceof D.opentag.BaseTag)k.push(p.getLoadTime(h[l]));return k};p.forceAllContainersAndTagsToRunIfDisabled=function(){D.opentag.Container.setCookieForDisabledContainersToRun();D.opentag.BaseTag.setCookieForcingTagsToRun()};p.rmAllContainersAndTagsForcingFlags=function(){D.opentag.Container.rmCookieForDisabledContainersToRun();
D.opentag.BaseTag.rmAllCookiesForcingTagToRun()};p.getContainers=function(){return D.opentag.Container.getContainers()};p.findAllTagsByClassPath=function(h){var k=(new Date).valueOf();var m=[];var g=[];try{g.push(D.opentag.CustomTag);g.push(D.opentag.LibraryTag)}catch(y){}var l=p.getTags();for(var w=0;w<l.length;w++){var e=l[w];if(b.indexInArray(g,e)<0&&e.PACKAGE_NAME.indexOf(h)===0)m.push(e)}return m};p.findAllTags=function(h,k){var m=D.opentag.BaseTag;var g;var l=[];var w=(new Date).valueOf();try{l.push(D.opentag.CustomTag);
l.push(D.opentag.LibraryTag)}catch(e){}g=p.findAllInstances(h,m,l,k);return g};var B=function(h,k,m,g){var l=[];if(typeof h==="string")h=b.getObjectUsingPath(h);if(h){var w={objectsOnly:true};if(g)w.maxDeep=true;var e=function(y,x,A,E){if(k(y)){for(var r=0;r<m.length;r++)if(m[r]===y)return true;b.addToArrayIfNotExist(l,y);return true}return false}.bind(this);b.traverse(h,e,w)}return l};p.findAllInstances=function(h,k,m,g){var l=function(w){return w instanceof k};return B(h,l,m,g)};p.findAllInheriting=
function(h,k,m,g){var l=function(w){return w.prototype instanceof k};return B(h,l,m,g)};p.findAllFilters=function(h,k){var m=[];try{m.push(D.opentag.filter.Filter);m.push(D.opentag.filter.URLFilter)}catch(g){}return p.findAllInheriting(h,q,m,k)}})();L.cookie={};L.cookie.PageView={};L.cookie.PageView.update=function(){var b;var q;q=function B(){return Math.floor(1+Math.random()*65536).toString(36).substring(1)};if(!window.__pageViewId__){b=(new Date).getTime().toString(36);window.__pageViewId__=b+
q()+q()+q()}return window.__pageViewId__};L.html.PostData=function(b,q,p){var B;var h;var k;var m;var g;var l;var w;var e;var y;var x;x=2;y=5E3;w=false;e=function(){if(x>0)setTimeout(function(){if(!w){x-=1;B()}},y)};h=navigator.userAgent.toLowerCase();k=h.indexOf("msie")!==-1;m=h.indexOf("msie 9")!==-1;g=h.indexOf("msie 7")!==-1||h.indexOf("msie 6")!==-1;l=("https:"===document.location.protocol?"https:":"http:")+b;p=p||"POST";B=function(){var A;try{A=null;try{A=new XMLHttpRequest}catch(E){}if(A&&
!k)A.open(p,l,true);else if(typeof XDomainRequest!=="undefined"){A=new XDomainRequest;A.open(p,l)}else A=null;try{A.withCredentials=false}catch(E){}if(A.setRequestHeader)A.setRequestHeader("Content-Type","text/plain;charset\x3dUTF-8");A.onload=function(){w=true};A.onreadystatechange=function(){};A.ontimeout=function(){};A.onerror=function(){};A.onprogress=function(){};A.send(q)}catch(E){try{try{L.html.fileLoader.load(l)}catch(r){if(window.console&&window.console.log)window.console.log(E)}}catch(r){}}e()};
if(g){L.html.fileLoader.load(l);return}else B()};(function(){function b(){}D.Define.clazz("qubit.opentag.Ping",b);b.prototype.send=function(q,p){var B=q.config;var h="c\x3d"+B.clientId+"\x26"+"p\x3d"+q.getContainerId()+"\x26"+"l\x3d"+B.tellLoadTimesProbability+"\x26"+"pv\x3d"+L.cookie.PageView.update()+"\x26"+"d\x3d";var k=[];for(var m=0;m<p.length;m++){var g=p[m].tag;var l=p[m].loadTime;if(l===null||isNaN(l))continue;var w=b.getPingID(g);if(!g.pingSent&&w&&l!==null)if(w!==undefined){k.push('"'+w+
'":'+l);g.pingSent=true}else;else if(g.pingSent);else if(l===null);}if(B.pingServerUrl&&k.length>0){h+=encodeURIComponent("{"+k.join(",")+"}");var e="//"+B.pingServerUrl+"/tag2?"+h;L.html.PostData(e,null,"GET")}else{if(!k.length);if(!B.pingServerUrl);}};b.prototype.sendErrors=function(q,p){};b.prototype.sendDedupe=function(q,p){var B=q.config;var h="c\x3d"+B.clientId+"\x26"+"p\x3d"+q.getContainerId()+"\x26"+"l\x3d"+B.tellLoadTimesProbability+"\x26"+"pv\x3d"+L.cookie.PageView.update()+"\x26"+"dd\x3d";
var k=[];for(var m=0;m<p.length;m++){var g=p[m];var l=b.getPingID(g);if(l===undefined);else if(!g.dedupePingSent){k.push(l);g.dedupePingSent=true}}if(k.length>0&&B.pingServerUrl){h+=encodeURIComponent("["+k.join(",")+"]");L.html.PostData("//"+B.pingServerUrl+"/tag2?"+h,null,"GET")}else{if(!k.length);if(!B.pingServerUrl);}};b.getPingID=function(q){if(q.config.id)return q.config.id;var p=q.PACKAGE_NAME.lastIndexOf(".");if(p!==-1)return q.PACKAGE_NAME.substring(p+1);else return q.PACKAGE_NAME}})();L.cookie.SimpleSessionCounter=
{};L.cookie.SimpleSessionCounter._cookieName="_qst_s";L.cookie.SimpleSessionCounter._sessionCookie="_qsst_s";L.cookie.SimpleSessionCounter.update=function(b){var q;var p;var B;var h=30;q=D.Cookie.get(L.cookie.SimpleSessionCounter._cookieName);p=D.Cookie.get(L.cookie.SimpleSessionCounter._sessionCookie);if(!q)q=1;else{q=parseInt(q,10);if(!p||parseInt(p,10)<(new Date).getTime()-h*60*1E3)q+=1}D.Cookie.set(L.cookie.SimpleSessionCounter._cookieName,q,365,b);D.Cookie.set(L.cookie.SimpleSessionCounter._sessionCookie,
(new Date).getTime().toString(),null,b);return q};var Q={};(function(){function b(e){return e<10?"0"+e:e}function q(e){k.lastIndex=0;return k.test(e)?'"'+e.replace(k,function(y){var x=l[y];return typeof x==="string"?x:"\\u"+("0000"+y.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+e+'"'}function p(e){return isFinite(e.valueOf())?e.getUTCFullYear()+"-"+b(e.getUTCMonth()+1)+"-"+b(e.getUTCDate())+"T"+b(e.getUTCHours())+":"+b(e.getUTCMinutes())+":"+b(e.getUTCSeconds())+"Z":null}function B(e,y){var x;
var A;var E;var r;var u=m;var z;var d=y[e];if(d instanceof Date)d=p(d);else if(d instanceof String||d instanceof Number||d instanceof Boolean)d=d.valueOf();if(typeof w==="function")d=w.call(y,e,d);switch(typeof d){case "string":return q(d);case "number":return isFinite(d)?String(d):"null";case "boolean":case "null":return String(d);case "object":if(!d)return"null";m+=g;z=[];if(Object.prototype.toString.apply(d)==="[object Array]"){r=d.length;for(x=0;x<r;x+=1)try{z[x]=B(x,d)||"null"}catch(c){z[x]=
'{"stack_exceeded": null}'}E=z.length===0?"[]":m?"[\n"+m+z.join(",\n"+m)+"\n"+u+"]":"["+z.join(",")+"]";m=u;return E}if(w&&typeof w==="object"){r=w.length;for(x=0;x<r;x+=1)if(typeof w[x]==="string"){A=w[x];try{E=B(A,d)}catch(c){E='{"stack_exceeded": null}'}if(E)z.push(q(A)+(m?": ":":")+E)}}else for(A in d)if(Object.prototype.hasOwnProperty.call(d,A)){try{E=B(A,d)}catch(c){E='{"stack_exceeded": null}'}if(E)z.push(q(A)+(m?": ":":")+E)}E=z.length===0?"{}":m?"{\n"+m+z.join(",\n"+m)+"\n"+u+"}":"{"+z.join(",")+
"}";m=u;return E}}var h=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g;var k=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g;var m;var g;var l={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"};var w;if(typeof Q.stringify!=="function")Q.stringify=function(e,y,x){var A;m="";g="";if(typeof x==="number")for(A=0;A<x;A+=1)g+=" ";else if(typeof x===
"string")g=x;w=y;if(y&&typeof y!=="function"&&(typeof y!=="object"||typeof y.length!=="number"))throw new Error("JSON.stringify");return B("",{"":e})};if(typeof Q.parse!=="function")Q.parse=function(e,y){function x(E,r){var u;var z;var d=E[r];if(d&&typeof d==="object")for(u in d)if(Object.prototype.hasOwnProperty.call(d,u)){z=x(d,u);if(z!==undefined)d[u]=z;else delete d[u]}return y.call(E,r,d)}var A;e=String(e);h.lastIndex=0;if(h.test(e))e=e.replace(h,function(E){return"\\u"+("0000"+E.charCodeAt(0).toString(16)).slice(-4)});
if(/^[\],:{}\s]*$/.test(e.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,""))){A=eval("("+e+")");return typeof y==="function"?x({"":A},""):A}throw new SyntaxError("JSON.parse");}})();(function(){function b(l){if(l)if(l.alphabet){this.alphabet=l.alphabet;this.dict={};for(var w=0;w<this.alphabet.length;w++)this.dict[this.alphabet[w]]=w}else{this.alphabet=p;this.dict=k}}function q(l,w){for(var e in w)if(l===
w[e])return e;return null}var p=[];var B=Math.pow(2,8);for(var h=0;h<B;h++)p.push(String.fromCharCode(h));var k={};for(var m=0;m<p.length;m++)k[p[m]]=m;var g=D.Define;g.clazz("qubit.compression.LZW",b);b.prototype.encode=function(l){var w=this.alphabet.length;var e={};var y=[];var x=0;var A=l.charAt(x++);var E;for(var r=this.dict;!!(E=l.charAt(x++));){var u=A+E;if(r.hasOwnProperty(u)||e.hasOwnProperty(u))A=u;else{var z=r.hasOwnProperty(A)?r[A]:e[A];if(z===undefined)throw"Dictionary base is to small for those contents: "+
A;y.push(z);e[u]=w++;A=E}}if(A!=="")y.push(e.hasOwnProperty(A)?e[A]:r[A]);return y};b.prototype.decode=function(l){var w=this.dict;var e=this.alphabet.length;var y;var x={};var A=q(l[0],w);var E=A;var r=[A];for(var u=1;u<l.length;u++){var z=l[u];y=q(z,w);if(y===null){if(x.hasOwnProperty(z))y=x[z];if(y===null)y=E+A}r.push(y);A=y.charAt(0);x[e++]=E+A;E=y}return r.join("")}})();(function(){function b(r){var u=0;var z=r<0;if(z)r=-r;var d="";var c=true;do{u=r%x;if(c){d=w[y[u]];c=false}else d=y[u]+d;r=
(r-u)/x}while(r>0);if(z)return"-"+d;return d}function q(r){var u=0;var z=0;var d=true;for(var c=0;c<r.length;c++){var f=r.charAt(r.length-1-c);if(d){d=false;f=B.charAt(g[f])}u+=k[f]*Math.pow(x,z++)}return u}function p(r){}var B="abcdefghijklmnopqrstuvwxyz"+"0123456789"+"'%./:\x3c\x3e?[";var h="ABCDEFGHIJKLMNOPQRSTUVWXYZ"+"*!-+()@{|}"+'"]^_`~$\x26#';var k={};for(var m=0;m<B.length;m++)k[B.charAt(m)]=m;var g={};for(var l=0;l<B.length;l++)g[h.charAt(l)]=l;var w={};for(var e=0;e<B.length;e++)w[B.charAt(e)]=
h.charAt(e);var y=B.split("");var x=y.length;var A=new D.compression.LZW({});var E=D.Define;E.clazz("qubit.compression.Compressor",p);p.prototype.compress=function(r,u){var z=(u||A).encode(r);var d=[];for(var c=0;c<z.length;c++)d.push(String.fromCharCode(z[c]));return d.join("")};p.prototype.compressAnsi=function(r,u){var z=(u||A).encode(r);var d=[];for(var c=0;c<z.length;c++){var f=b(z[c]);d.push(f)}return d.join("")};p.prototype.decompressAnsi=function(r,u){var z=[];var d="";for(var c=0;c<r.length;c++){var f=
r.charAt(c);if(g.hasOwnProperty(f)){var n=d+f;d="";n=q(n);z.push(n)}else d+=f}return(u||A).decode(z)};p.prototype.decompress=function(r,u){var z=[];for(var d=0;d<r.length;d++)z.push(r.charCodeAt(d));return(u||A).decode(z)}})();(function(){function b(z){var d=[];for(var c=0;c<z.length;c++){var f=k(z[c][0]);d.push([new RegExp(f,"g"),"*"+z[c][1]])}return d}function q(z,d){for(var c=0;c<d.length;c++)if(d[c][1]===z)return d[c][0];return null}function p(z){this._regexDefs=y;this._defs=e;if(z)if(z.definitions){this._regexDefs=
b(z.definitions);this._defs=z.definitions}}function B(z,d){var c=[];for(var f=0;f<z.length;f++){var n=true;if(d)n=z.charCodeAt(f)<=d;var C=w.cookieAlphabetMap.hasOwnProperty(z.charAt(f));if(n&&!C)c.push("*"+z.charCodeAt(f)+".");else c.push(z.charAt(f))}return c.join("")}function h(z,d){d=d.replace(/@/g,"@@");var c=[];var f=0;for(var n=0;f<z.length;f++){var C=z[f][0];var F=new RegExp(k(C),"g");var G=d.replace(F,"@"+n+"-");if(G!==d){c.push(z[f][0]);n++;d=G}}return[d,c]}function k(z){return z.replace(/([.*+?^=!:${}()|\[\]\/\\])/g,
"\\$1")}function m(z){var d={};var c="";for(var f=0;f<z.length;f++){var n=z.charAt(f);if(!A[n]){if(isNaN(d[c]))d[c]=z.split(c).length-1;c=""}else c+=n}var C=[];for(var F in d)if(d.hasOwnProperty(F)){var G=d[F];if(G>=u&&F.length>=r)C.push([F,G])}C=C.sort(function(J,K){if(J[0].length===K[0].length)return 0;if(K[0].length>J[0].length)return 1;else return-1});return C}function g(z,d){if(!d||d.length===0||!z)return z;var c="";var f=false;var n=false;var C="";for(var F=0;F<z.length;F++){var G=z.charAt(F);
if(G==="@"||f||n)if(f||n){f=false;if(G==="@")c+="@";else if(!isNaN(+("-"+G))){n=true;C=C+G}else if(n){if(d&&G==="-"&&d[+C])c+=d[+C];else c+="@"+C+G;C="";n=false}else c+="@"+G}else f=true;else c+=G}if(C)c+="@"+C;if(f)c+="@";return c}var l=D.Define;var w=D.Cookie;var e=[['","referrer":[{"url":"http://',"1-"],['","referrer":[{"url":"https://',"2-"],[',"referrer":[{"url":"http://',"3-"],[',"referrer":[{"url":"https://',"4-"],[',"sessionStartTime":',"5-"],["www.google.co.uk","6-"],["www.google.","7-"],
['"sessionStartTime":',"8-"],['"landing":"',"9-"],["http%3A%2F%2Fwww","10-"],['"landing":',"L"],['"time":',"A"],['"pageViews":',"P"],['"sessionCount":',"B"],['"referrer":',"R"],['"url":"http://www.',"J"],['"url":"https://www.',"M"],['"url":"',"I"],['"url":',"U"],["http://www.","W"],["https://www.","V"],["%2Fen%2Ftsuk%2F","K"],['"sessionLandingPage":',"F"],["http%3A%2F%2F","D"],["http://","H"],["https://","X"],['""',"O"],['",',"Y"],['":{}}',"z"],["\x3c","S"],["\x3e","G"],["[","Z"],["]","E"],["{","a"],
["}","b"],["(","c"],[")","d"],["!","e"],["#","f"],["$","g"],["!","q"],["'","i"],[":","j"],["?","k"],["^","x"],["`","m"],["|","n"],["~","o"],["%","v"],[",","C"]];var y=b(e);l.clazz("qubit.opentag.compression.Encoder",p);p.prototype.encode=function d(c,f){var n=c.replace(/\*/g,"**");var C=m(n);for(var F=0;F<this._regexDefs.length;F++){var G=this._regexDefs[F];n=n.replace(G[0],G[1])}n=n.replace(/;/g,"*-");n=n.replace(/&/g,"*.");n=n.replace(/\\/g,"*/");n=n.replace(/=/g,"*+");n=n.replace(/\n/g,"*N");n=
n.replace(/ /g,"*_");n=n.replace(/\t/g,"*T");n=n.replace(/"/g,"*Q");var J=m(n);J.concat(C);var K=h(J,n);var M=K[1];var N=M.length>0;if(N)n=K[0];if(!f)n=B(n);else n=B(n,f);if(N)return"Y"+M.join("*")+"@"+n;else return"N"+n};var x="abcdefghijklmnopqrstuvwxyz0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ+_.";var A={};for(var E=0;E<x.length;E++)A[x.charAt(E)]=true;var r=4;var u=2;p.prototype.decode=function(d){var c=null;if(d.charAt(0)==="N")d=d.substring(1);else if(d.charAt(0)==="Y"){var f=d.indexOf("@");if(f>=
0){c=d.substring(1,f);c=c.split("*");d=d.substring(f+1);d=g(d,c)}}var n="";var C=false;var F=false;var G="";for(var J=0;J<d.length;J++){var K=d.charAt(J);if(K==="*"||C||F)if(C||F){C=false;if(!isNaN(+("-"+K))){G=G+K;F=true}else if(F){if(K===".")n+=String.fromCharCode(+G);else if(K==="-"&&q(G+"-",this._defs))n+=q(G+"-",this._defs);else n+="*"+G+K;G="";F=false}else if(K==="*")n+="*";else if(K==="-")n+=";";else if(K==="/")n+="\\";else if(K===".")n+="\x26";else if(K==="+")n+="\x3d";else if(K==="N")n+=
"\n";else if(K==="_")n+=" ";else if(K==="T")n+="\t";else if(K==="Q")n+='"';else if(q(K,this._defs)!==null){var M=q(K,this._defs);n+=M}else n+="*"+K}else C=true;else n+=K}if(G)n+="*"+G;if(C)n+="*";return n}})();(function(){function b(h){this.testBinary=false;this.binSupported=B;if(h){this.compressor=new D.compression.Compressor;this.encoder=new D.opentag.compression.Encoder({})}}var q=D.Define;var p=D.Cookie;var B=false;q.clazz("qubit.opentag.compression.CookieCompressor",b);b.prototype.compress=function(h,
k){if(typeof h!=="string"||h==="")return h;var m=this.encoder.encode(h);var g;if(this.binSupported||this.testBinary){var l=this.compressor.compress(m);g='"B'+this.encoder.encode(l,128)+'"';p.set("__qtag_test_bin__",g,undefined,undefined,true);var w=p.get("__qtag_test_bin__",true);p.rm("__qtag_test_bin__");if(w&&w!==g)g=null}var e;var y=this.encoder.encode(this.compressor.compressAnsi(m));if(!k&&m.length<=y.length)e="E"+m;else e="C"+y;if(g&&g.length<e.length)return g;else return e};b.prototype.decompress=
function(h){if(typeof h!=="string"||h==="")return h;if(h.charAt(0)==='"')h=h.substring(1,h.length-1);var k=h.charAt(0);h=h.substring(1);switch(k){case "E":return this.encoder.decode(h);case "C":var m=this.compressor.decompressAnsi(this.encoder.decode(h));return this.encoder.decode(m);case "B":var g=this.compressor.decompress(this.encoder.decode(h));return this.encoder.decode(g);default:throw"This code is not supported! Code: "+k;}}})();(function(){var b=D.Cookie;var q=D.opentag.Utils;var p=function(){};
D.Define.clazz("qubit.opentag.Session",p);var B=new D.opentag.compression.CookieCompressor({});p.readCompressedCookie=function(h){var k=b.get(h,true);return B.decompress(k)};p.setupSession=function(h){var k=h.config;var m;var g;var l;var w;var e;var y;m={};m.sessionCount=L.cookie.SimpleSessionCounter.update(k.cookieDomain);e="qtag_"+h.getContainerId();var x="x_qtag_"+h.getContainerId();l=b.get(e);var A=!!l;if(l===null){l=b.get(x,true);l=B.decompress(l)}if(l)try{l=Q.parse(l)}catch(r){l={sc:0,sessionCount:0,
pageViews:0,sessionStartTime:0,referrer:[],sessionLandingPage:"",__v:{}}}else l={sc:0,sessionCount:0,pageViews:0,sessionStartTime:0,referrer:[],sessionLandingPage:"",__v:{}};y=(new Date).getTime();if(m.sessionCount!==parseInt(l.sc,10)){l.sessionStartTime=y;l.sc=m.sessionCount;l.sessionCount+=1;l.referrer.push({url:p.getReferrer(),landing:q.getUrl().substring(0,300),time:y});l.sessionLandingPage=q.getUrl().substring(0,300)}else if(p.isReferrerDifferent())if(!p.referrerIsSameAsPrevious(l.referrer,y,
30*60*1E3)){l.referrer.push({url:p.getReferrer(),landing:q.getUrl().substring(0,300),time:y});l.sessionLandingPage=q.getUrl().substring(0,300);l.sessionStartTime=y;l.sessionCount+=1}m.sessionCount=l.sessionCount;m.sessionStartTime=l.sessionStartTime;m.pageStartTime=y;l.pageViews+=1;m.pageViews=l.pageViews;m.sessionLandingPage=l.sessionLandingPage;m.referrer=l.referrer;if(m.referrer.length>5)m.referrer.splice(2,m.referrer.length-5);w=Q.stringify(l);for(g=0;B.compress(w).length>k.maxCookieLength&&g<
5;){if(l.referrer.length>=3)l.referrer.splice(2,1);else if(l.referrer.length===2)l.referrer=[l.referrer[0]];else if(l.referrer.length===1)l.referrer=[];w=Q.stringify(l);g+=1}m.referrer=l.referrer;if(A)b.rm(e);var E=B.compress(w);b.rm(x);if(k.maxCookieLength>0)b.set(x,E,365,k.cookieDomain,true);m.setVariable=function(r,u,z){var d=!!z?z:0;l.__v[r]=[u,d];var c=B.compress(Q.stringify(l));if(k.maxCookieLength>0)b.set(x,c,365,k.cookieDomain,true);else b.rm(x)};m.getCookie=function(r,u){var z=b.get(r,true);
if(z&&(u||r.indexOf("x_")===0))try{z=B.decompress(z)}catch(d){}else if(z!==null)z=b.decode(z);return z};m.getVariable=function(r){var u;var z;var d;u=l.__v[r];if(u){z=u[1];if(z===0||z>(new Date).getTime())return u[0]}return null};m.on=function(r,u,z){if(u.attachEvent)u.attachEvent("on"+r,z);else if(u.addEventListener)u.addEventListener(r,z,false)};m.getTagCookie=function(){return p.readCompressedCookie(x)};p.lastSession=m;return m};p.referrerIsSameAsPrevious=function(h,k,m){var g;var l;var w;if(h.length>
0){g=p.getReferrer();l=q.getUrl().substring(0,300);w=h[h.length-1];return w.url===g&&w.landing===l&&w.time+m>k}return false};p.isReferrerDifferent=function(){var h;var k;var m;m=p.getReferrer();h=m.indexOf("://");if(h===-1)return true;h+=3;try{if(m.substring(h).indexOf(p.getDomain())!==0)return true;return false}catch(g){return true}};p.getReferrer=function(){if(document.referrer)return document.referrer.substring(0,300);return"direct"};p.getDomain=function(){return document.location.host}})();(function(){function b(h){p.setIfUnset(h,
b.defaultConfig);if(this.singleton){var k=this.PACKAGE_NAME+"."+this.CLASS_NAME;var m=D.opentag.Utils.getObjectUsingPath(k,H);if(m.__instance)return m.__instance;m.__instance=this}b.SUPER.call(this,h)}function q(h,k){var m=h.toString();m=m.replace(/\s*function\s*\([\w\s,_\d\$]*\)\s*\{/,"");m=m.substring(0,m.lastIndexOf("}"));m=m.replace(/(["']\s*\+\s*)\s*_*\w+\s*\.\s*valueForToken\s*\(\s*'([^']*)'\s*\)/g,'$1"${$2}"');m=m.replace(/\s*_*\w+\s*\.\s*valueForToken\s*\(\s*'([^']*)'\s*\)(\s*\+\s*["'])/g,
'"${$1}"$2');m=m.replace(/(["']\s*\+\s*)\s*_*\w+\s*\.\s*valueForToken\s*\(\s*"([^"]*)"\s*\)/g,'$1"${$2}"');m=m.replace(/\s*_*\w+\s*\.\s*valueForToken\s*\(\s*"([^"]*)"\s*\)(\s*\+\s*["'])/g,'"${$1}"$2');m=m.replace(/(\s*)_*\w+\s*\.\s*valueForToken\s*\(\s*'([^']*)'(\s*)\)/g,"$1${$2}$3");m=m.replace(/(\s*)_*\w+\s*\.\s*valueForToken\s*\(\s*"([^"]*)"(\s*)\)/g,"$1${$2}$3");m=k.replaceTokensWithValues(m);p.geval(m)}var p=D.opentag.Utils;var B=D.Define;D.Define.clazz("qubit.opentag.LibraryTag",b,D.opentag.BaseTag);
b.defaultConfig={vendor:null,imageUrl:null,description:"",async:false,isPrivate:false,upgradeable:true,html:"",parameters:[],prePostWindowScope:false};b.prototype.pre=function(){};b.prototype.post=function(){};b.prototype.before=function(){b.SUPER.prototype.before.call(this);try{var h=this.config;if(h&&h.pre)if(typeof h.pre==="function")this.pre=h.pre;else{var k=this.replaceTokensWithValues(String(h.pre));this.pre=p.expressionToFunction(k).bind(this)}if(this.config.prePostWindowScope&&this.pre!==
b.prototype.pre&&this.pre.toString)q(this.pre,this);else this.pre()}catch(m){return true}return false};b.prototype.after=function(h){b.SUPER.prototype.after.call(this,h);try{var k=this.config;if(k&&k.post)if(typeof k.post==="function")this.post=k.post;else{var m=this.replaceTokensWithValues(String(k.post));this.post=p.expressionToFunction(m).bind(this)}if(this.config.prePostWindowScope&&this.post!==b.prototype.post&&this.post.toString)q(this.post,this);else this.post(h)}catch(g){}};b.define=function(h,
k){h=h.replace(/^[\.]+/g,"").replace(/[\.]+$/g,"").replace(/\.+/g,".");h=D.Define.vendorsSpaceClasspath(h);var m={};if(k.getDefaultConfig)m=k.getDefaultConfig();var g=k.CONSTRUCTOR;var l={};for(var w in k)if(w!=="config")l[w]=k[w];var e=function(A){A=A||{};A=p.overrideFromLeftToRight(m,A);var E=D.opentag.LibraryTag.call(this,A);if(g)g.call(this,A);if(E)return E};var y=D.opentag.Utils.defineWrappedClass(h,b,l,I,e);var x=B.STANDARD_VS_NS+".";if(h.indexOf(x)!==0)p.namespace(x+h,y);return y};b.getLibraryByClasspath=
function(h){return p.getObjectUsingPath(h,D.Define.getVendorSpace())}})();(function(){function b(){}var q=D.opentag.LibraryTag;var p=D.Define;b.library=function(){return q.define.apply(q,arguments)};b.libraryRef=function(){return q.getLibraryByClasspath.apply(q.getLibraryByClasspath,arguments)};p.namespace("qubit.Quick",b)})();(function(){function b(r){this.runQueue=[];this.tags={};this.config={cookieDomain:"",maxCookieLength:1E3,gzip:true,delayDocWrite:false,clientId:"",name:"",tellLoadTimesProbability:null,
pingServerUrl:null,trackSession:null,disabled:false,containerId:"",scanTags:false,noPings:false};this.ignoreTagsState=false;if(r){this.setConfig(r);if(!r.name)this.config.name="Cont-"+e++;b.register(this);if(b.NO_PINGS)this.config.noPings=true;this.ping=new D.opentag.Ping(this.config);this._sendPingsTrigger=this.sendPings.bind(this);if(r.init)try{r.init.call(this,r)}catch(z){}var u=this;this._tagLoadedHandler=function(z){if(u._containerAlreadySentPings){u.sendPingsNotTooOften();if(z.success);}}}return this}
function q(r,u,z){if(r[z]){x[z]=x[z]||1;z+="("+x[z]+")";x[z]++}r[z]=u}var p=D.opentag.Utils;var B=D.opentag.filter.BaseFilter;var h=D.opentag.filter.Filter;var k=D.opentag.BaseTag;var m=D.opentag.Timed;var g=D.opentag.Tags;var l=D.opentag.Session;var w=D.Cookie;var e=1;try{window.opentag_consentGiven=function(){b.consentIsGiven=true;var r=b.getContainers();for(var u=0;u<r.length;u++)try{r[u].run()}catch(z){}}.bind(this)}catch(r){}D.Define.clazz("qubit.opentag.Container",b);var y=[];b.register=function(r){p.addToArrayIfNotExist(y,
r)};b.prototype.isTellingLoadTimes=function(){var r=this.config.tellLoadTimesProbability;if(r===null)r=0;return r>Math.random()};b.prototype.destroy=function(r){this.destroyed=true;this.unregister();if(r)for(var u in this.tags){var z=this.tags[u];if(z instanceof k){z.destroy();this.tags[u]=null;delete this.tags[u]}}var d=this.PACKAGE_NAME.split(".");d=d[d.length-1];var c=p.getParentObject(this.PACKAGE_NAME);c[d]=null;delete c[d]};b.findContainersByName=function(r){var u=this.getContainers();var z=
[];for(var d=0;d<u.length;d++)if(u[d].config.name===r)z.push(u[d]);return z};b.getById=function(r){var u=this.getContainers();for(var z=0;z<u.length;z++)if(u[z].getContainerId()===r)return u[z];return null};b.prototype.unregister=function(r){b.unregister(this,r)};b.unregister=function(r,u){p.addToArrayIfNotExist(y,r);var z=p.removeFromArray(y,r);if(u)for(var d in this.tags){var c=this.tags[d];if(c instanceof k){c.unregister();this.tags[d]=null;delete this.tags[d]}}if(!z||z.length===0);};b.prototype.hasConsent=
function(){return w.get("qubitconsent")==="Accepted"};b.prototype.register=function(r){b.register(r||this)};b.getContainers=function(){return y};b.prototype.getContainers=function(){return b.getContainers()};b.prototype.onTagRegistered=function(r){};b.prototype.registerTag=function(r){var u=r.config.name;if(this.tags[u]);else{this.tags[u]=r;r.onAfter(this._tagLoadedHandler);try{this.onTagRegistered(r)}catch(z){}}};b.prototype.registerTags=function(r){for(var u=0;u<r.length;u++)this.registerTag(r[u])};
b.prototype.setConfig=function(r){for(var u in r)this.config[u]=r[u]};b.prototype.run=function(){this.runTags({command:"runOnceIfFiltersPass"})};b.prototype.runWithoutFilters=function(){this.runTags({command:"run"})};b.prototype.getTagByname=function(r){return this.tags[r]};b.prototype.containerScriptLoadedSynchronously=function(){var r;var u;var z;var d;var c;d=document.getElementsByTagName("script");for(r=0,u=d.length;r<u;r+=1){z=d[r];c=z.getAttribute("src");if(!!c&&c.indexOf(""+this.config.clientId+
"-"+this.getContainerId()+".js")>0)return z.getAttribute("async")===null&&(z.getAttribute("defer")===false||z.getAttribute("defer")===""||z.getAttribute("defer")===null)}return true};b.prototype.prepareSessionIfNeeded=function(){var r=this.config.trackSession;if(r!==true&&r!==false){var u=this.tags;for(var z in u)if(u.hasOwnProperty(z)){var d=u[z];d.resolveAllDynamicData();var c=d.getFilters();for(var f=0;f<c.length;f++){var n=c[f];if(n instanceof h&&n.isSession()){this.trackSession=true;break}}if(this.trackSession)break}}else this.trackSession=
r;if(b.TRACK_SESSION)this.trackSession=true;if(this.trackSession)this.session=l.setupSession(this);if(this.session);};b.prototype.runTags=function(r,u){if(this.destroyed)throw"Container has been destroyed.";if(!u)if(b.LOCKED||p.global().QUBIT_CONTAINERS_LOCKED)return;if(this.onBeforeRun)try{this.onBeforeRun()}catch(N){}var z=!this.containerScriptLoadedSynchronously();var d="runIfFiltersPass";if(r&&r.command)d=r.command;this.runningStarted=(new Date).valueOf();var c={};if(this.config.scanTags)if(!this._scanned){this.scanForTags();
this._scanned=(new Date).valueOf()}this.prepareSessionIfNeeded();var f=this.getTagsInOrder();for(var n=0;n<f.length;n++)try{var C=f[n];var F=C.config.name;if(this.includedToRun(C)){var G=C.resolveDependencies();if(G.length>0)for(var J=0;J<G.length;J++){var K=G[J];var M=K.config.name;if(!c[M]&&this.tags[M]){c[M]=K;this._tagRunner(K,d,z)}}if(!c[F]){c[F]=C;this._tagRunner(C,d,z)}}}catch(N){}m.setTimeout(function(){this.sendPingsNotTooOften()}.bind(this),1100);this.waitForAllTagsToFinish()};b.prototype.getTagsInOrder=
function(){var r=[];for(var u in this.tags){var z=this.tags[u];var d=z.config.priority;if(+d>0){var c=0;for(var f=0;f<r.length;f++){var n=r[f];if(n){var C=+n.config.priority;if(C>0&&C>d)c++;else break}}r.splice(c,0,z)}else r.push(z)}return r};b.prototype._tagRunner=function(r,u,z){try{if(this.includedToRun(r)){if(z)r.forceAsynchronous=true;if(this.config.delayDocWrite)r.delayDocWrite=true;r.session=r.session||this.session;r[u]()}}catch(d){}};b.prototype.getContainerId=function(){if(this.config.containerId)return this.config.containerId;
else{if(this._pkgName)return this._pkgName;var r=this.PACKAGE_NAME.split(".");r=r[r.length-1];this._pkgName=r;return r}};b.prototype.includedToRun=function(r){if(!r)return false;var u=r.config;if(u.inactive)return false;if(u.disabled)if(!r.cookieSaysToRunEvenIfDisabled())return false;if(r.disabledByCookie())return false;var z=b.consentIsGiven||!u.needsConsent||this.hasConsent();var d=r.state===k.prototype.STATE.INITIAL;return this.ignoreTagsState||z&&d};b.prototype.scanForTags=function(r,u){if(r)this.tags=
{};var z;if(u&&typeof u==="object")z=this.findAllTags(u);else z=this.findAllTagsByClassPath();this.registerTags(z);return z};b.prototype.findAllTags=function(r,u){r=r||this.tagsPackageName||this.PACKAGE_NAME;return g.findAllTags(r,u)};b.prototype.findAllTagsByClassPath=function(r){r=r||this.PACKAGE_NAME;return g.findAllTagsByClassPath(r)};b.prototype.findAllFilters=function(r,u){r=r||this.tagsPackageName||this.PACKAGE_NAME;return g.findAllFilters(r,u)};b.prototype.waitForAllTagsToFinish=function(){if(this._waitForAllTagsToFinishWaiting)return;
if(!this._lastWaited)this._lastWaited=(new Date).valueOf();var r=(new Date).valueOf()-this._lastWaited>15*1E3;var u=this.allTagsFinished()||r;if(!this._showFinishedOnce&&u){this._lastWaited=null;if(r);this._showFinishedOnce=true;this.runningFinished=(new Date).valueOf();this._containerAlreadySentPings=(new Date).valueOf();this.sendPingsNotTooOften();if(this.onTagsInitiallyRun)this.onTagsInitiallyRun()}else if(!u){this._waitForAllTagsToFinishWaiting=true;this._showFinishedOnce=false;m.setTimeout(function(){this._waitForAllTagsToFinishWaiting=
false;this.waitForAllTagsToFinish()}.bind(this),100)}else;};b.prototype.onTagsInitiallyRun=P;b.prototype.resetAllTags=function(r){for(var u in this.tags)if(this.tags.hasOwnProperty(u)){var z=this.tags[u];z.reset();if(!r)z.resetFilters()}};b.prototype.reset=function(r){this.runningFinished=undefined;this._waitForAllTagsToFinishWaiting=undefined;this.runningStarted=undefined;this._showFinishedOnce=undefined;this.resetAllTags(r)};b.prototype.sendPingsNotTooOften=function(){this._sndLck=this._sndLck||
{};m.runIfNotScheduled(this._sendPingsTrigger,2E3,this._sndLck)};b.prototype.sendPings=function(){if(this.config.noPings)return;var r;if(this.isTellingLoadTimes()){var u=this.getAllTagsByState();var z=this;var d;if(u.run){d=g.getLoadTimes(u.run);this.lastPingsSentTime=(new Date).valueOf();this.ping.send(this,d)}d=g.getLoadTimes();var c=[];for(r=0;r<d.length;r++){var f=d[r].tag;if(f.config.dedupe&&f.sendDedupePing)c.push(f)}if(c.length>0){this.lastDedupePingsSentTime=(new Date).valueOf();this.ping.sendDedupe(this,
c)}if(u.other){d=g.getLoadTimes(u.other);var n=[];for(r=0;r<d.length;r++)n.push(d[r]);if(n.length>0)this.ping.send(this,n)}if(u.awaiting){d=g.getLoadTimes(u.awaiting);var C=[];for(r=0;r<d.length;r++)C.push(d[r]);if(C.length>0)this.ping.send(this,C)}}};b.prototype.getAllTagsByState=function(){return b.getAllTagsByState(this.tags)};b.getAllTagsByState=function(r){var u=null;var z=null;var d=null;var c=null;var f=null;var n=null;var C=k.prototype.STATE.EXECUTED_WITH_ERRORS;for(var F in r){var G=r[F];
if(G instanceof k){var J=G.config.name;if(G.scriptExecuted>0){u=u||{};q(u,G,J)}else if(G.locked){n=n||{};q(n,G,J)}else if(G.scriptExecuted<0||G.state>=C){c=c||{};q(c,G,J)}else if(G.filtersState()===B.state.SESSION||G.filtersState()>0){d=d||{};q(d,G,J)}else if(G.config.needsConsent){f=f||{};q(f,G,J)}else{z=z||{};q(z,G,J)}}}return{run:u,failed:c,awaiting:d,consent:f,locked:n,other:z}};var x={};b.prototype.allTagsFinished=function(){for(var r in this.tags)if(this.tags.hasOwnProperty(r)){var u=this.tags[r];
if(u instanceof D.opentag.BaseTag){var z=u.filtersState();if(!u.config.disabled){var d=u.filtersState()<0&&!u.locked;var c=!(u.finished()||u.config.runner&&!u.isRunning);if(d&&c){var f=z!==B.state.SESSION;var n=+u.awaitingDependencies>0;if(f&&!n)return false}}}}return true};b.prototype.getPageVariables=function(){var r=[];for(var u in this.tags)if(this.tags.hasOwnProperty(u)){var z=this.tags[u].getPageVariables();for(var d=0;d<z.length;d++)p.addToArrayIfNotExist(r,z[d])}return r};b.getPageVariableByName=
function(r){var u=this.getAllPageVariables();var z=[];for(var d=0;d<u.length;d++)if(u[d].config.name===r)z.push(u[d]);return z};var A="qubit.opentag.disableContainerRunning_";var E="qubit.opentag.forceContainerRunning";b.prototype._getCookieNameForDisabling=function(){return A+this.getContainerId()+this.config.name};b.prototype.disabledByCookie=function(){return!!w.get(this._getCookieNameForDisabling())};b.prototype.setCookieToDisable=function(){w.set(this._getCookieNameForDisabling(),"true")};b.prototype.rmCookieToDisable=
function(){w.rm(this._getCookieNameForDisabling())};b.rmAllDisablingCookies=function(){p.rmCookiesMatching(A)};b.setCookieForDisabledContainersToRun=function(){w.set(E,"true")};b.rmCookieForDisabledContainersToRun=function(){w.rm(E)}})();(function(){function b(p){var B={url:null,html:"",locationPlaceHolder:"NOT_END",locationObject:"BODY",async:true};q.setIfUnset(p,B);b.SUPER.call(this,p)}var q=D.opentag.Utils;D.Define.clazz("qubit.opentag.CustomTag",b,D.opentag.LibraryTag)})();(function(){function b(g){return g.replace(/^\s+/,
"").replace(/\s+$/,"")}var q={callbacks:{},unfired_events:[],early_callbacks:null,currentUV:null};var p;var B="universal_variable";var h=0;var k=500;var m;q._isArray=function(g){return Object.prototype.toString.call(g)==="[object Array]"};q._targetChanged=function(g,l,w){var e;var y;var x;if(w===null)if(l==="null")return false;else return true;else if(w===undefined)if(l===w)return false;else return true;else{e=Q.parse(l);y=q._getNested(e,g);x=q._getNested(w,g);return!q._jsonIsEqual(y,x)}};q._processCallbacks=
function(){var g;if(q.early_callbacks&&q.early_callbacks.length>0){for(g=0;g<q.early_callbacks.length;g+=1)q.push(q.early_callbacks[g]);q.early_callbacks=null}};q._keyStringToArr=function(g){g=b(g);if(g==="")return[];else{g=g.replace(/\[(\w+)\]/g,".$1");g=g.replace(/^\./,"");return g.split(".")}};q._getNested=function(g,l){var w=q._keyStringToArr(l);for(var e;w.length>0;){e=w.shift();if(g.hasOwnProperty(e))g=g[e];else return}return g};q._jsonIsEqual=function(g,l){if(typeof g!=="string")g=Q.stringify(g,
q._stripEvents);if(typeof l!=="string")l=Q.stringify(l,q._stripEvents);return g===l};q._stripEvents=function(g,l){if(g!=="events")return l;else return undefined};q._on=function(g,l){var w;var e;w=g.split(":");g=w[0];e=w[1];q.callbacks[g]=q.callbacks[g]||[];if(e)q.callbacks[g].push({keyString:e,func:l});else q.callbacks[g].push({func:l})};q._trigger=function(g,l){var w;var e;if(q.callbacks[g])for(w=0;w<q.callbacks[g].length;w+=1)if(typeof q.callbacks[g][w].func==="function"){e=q.callbacks[g][w].keyString;
if(e){if(g==="change"&&q._targetChanged(e,q.currentUV,p))q.callbacks[g][w].func(l)}else q.callbacks[g][w].func(l)}};q._eventsPush=function(g){var l;var w;p.events[p.events.length]=g;g.time=g.time||(new Date).getTime();if(q.callbacks.event){l=0;w=q.callbacks.event.length;for(l;l<w;l+=1)q.callbacks.event[l].func(g)}g.has_fired=true};q._getUnfiredEvents=function(){var g=0;for(g=0;g<p.events.length;g+=1)if(!p.events[g].has_fired){q.unfired_events.push(p.events.splice(g,1)[0]);g-=1}};q._fireEvents=function(){for(;q.unfired_events.length>
0;)p.events.push(q.unfired_events.shift())};q._resetEventsPush=function(){p.events=p.events||[];if(p.events.push.toString().indexOf("[native code]")!==-1){p.events.push=q._eventsPush;q._getUnfiredEvents();q._fireEvents()}};q._checkForChanges=function(){if(q.callbacks.change&&q.callbacks.change.length>0)if(!q._jsonIsEqual(q.currentUV,p)){q._trigger("change",p);q.currentUV=Q.stringify(p,q._stripEvents)}};q._setUVLocation=function(g){B=g;q._initUV()};q._initUV=function(){window[B]=window[B]||{events:[]};
p=window[B];if(!p.events)p.events=[]};q.push=function(g){if(!q._isArray(g))return;if(g[0]==="on")q._on(g[1],g[2]);else if(g[0]==="trigger"&&g[1])q._trigger(g[1])};q.init=function(g,l){if(l)B=l;q._initUV();if(!window.uv_listener||q._isArray(window.uv_listener)){q.early_callbacks=window.uv_listener||null;window.uv_listener=q;if(!g)q.start()}else if(l)window.uv_listener._setUVLocation(B)};q.start=function(){q.currentUV=Q.stringify(p,q._stripEvents);m=setInterval(function(){q._initUV();q._resetEventsPush();
q._checkForChanges()},k);q._processCallbacks()};L.html.UVListener=q})();(function(){function b(){}function q(){var l=false;if(m.get("opentag_debug")||document.location.href.indexOf("opentag_debug")>=0)l=true;return l}function p(){var l=false;if(m.get("opentag_debug_tool")||document.location.href.indexOf("opentag_debug_tool")>=0)l=true;return l}function B(){try{var l=I.TAGSDK_MAIN_DISABLED_FUNCTION;if(l&&l())return true}catch(w){}if(document.location.href.indexOf("opentag_disabled\x3dtrue")>=0)return true;
return false}function h(l,w,e){if(e&&(l[w]===undefined||l[w]===""||l[w]===null))l[w]=e}function k(l){var w=D.opentag.Utils.getParentObject(l.PACKAGE_NAME);var e=w.ClientConfig;if(e&&e.clientId)return e.clientId;else{var y=l.PACKAGE_NAME.split(".");return y[y.length-2].substring(1)}}var m=D.Cookie;var g=D.opentag.Utils;D.opentag.Log.setLevelFromCookie();b.run=function(){var l=false;if(B())return;var w=false;var e=p();var y=e||q();if(!w&&y){if(!D.DEBUG_MODE)I.TAGSDK_NS_OVERRIDE=true;else I.TAGSDK_NS_OVERRIDE=
false;l=true}if(D.DEBUG_MODE)I.TAGSDK_NS_OVERRIDE=false;try{L.html.UVListener.init()}catch(x){}b.runAllContainers(l)};b.runAllContainers=function(l){try{var w=D.opentag.Container.getContainers();for(var e=0;e<w.length;e++){var y=w[e];var x=y.config;if(!y.runningStarted&&!y.configuredInMain){x.scanTags=true;var A=g.getParentObject(y.PACKAGE_NAME).ClientConfig;if(A)h(y.config,"clientId",A.id);var E=g.getParentObject(y.PACKAGE_NAME).SystemDefaults;if(E){h(x,"pingServerUrl",E.pingServerUrl);h(x,"tellLoadTimesProbability",
E.tellLoadTimesProbability)}y.configuredInMain=true;if(l){y.destroy(true);b.loadDebugVersion(y)}else if(!I.QUBIT_OPENTAG_STOP_MAIN_EXECUTION)y.run();else(function(){var r=D.opentag.RUN_STOPPED_EXECUTON;D.opentag.RUN_STOPPED_EXECUTON=function(){try{if(r)r()}finally{y.run()}}})(y)}}}catch(r){}};b.loadDebugVersion=function(l){var w=document.createElement("script");var e;var y=l.config.scriptURL;var x=k(l);var A=l.getContainerId();if(y){e=y;var E="-debug.js".length;if(e.lastIndexOf("-debug.js")!==e.length-
E){e=e.substring(0,e.length-".js".length);e+="-debug.js"}}var r="//d3c3cq33003psk.cloudfront.net/opentag-"+x+"-"+A+"-debug.js";if(e&&r!==e)w.src=e;else w.src="//s3-eu-west-1.amazonaws.com/opentag/opentag-"+x+"-"+A+"-debug.js";document.getElementsByTagName("head")[0].appendChild(w)};D.Define.namespace("qubit.opentag.Main",b)})();var ga=false;try{if(typeof module==="object"&&module.exports){module.exports=t;ga=true}}catch(b){}if(!ga&&window)window.uv=t();var Y={};var X=[];var da=false;var Z=false;var ia=
D.Define.global();var ha={allEventsByType:Y,subscribe:function(b,q){if(Z){var p=a();p.on(b,q)}else X.push({on:[b,q]})},getEventHistory:function(b){return this.allEventsByType[b]},publish:function(b,q){if(Z){var p=a();p.emit(b,q)}else X.push({emit:[b,q]})},connect:function(){v()}};ha.connect();D.Define.namespace("qubit.qprotocol.PubSub",ha);(function(){function b(h){b.SUPER.apply(this,arguments)}var q=D.qprotocol.PubSub;var p=D.opentag.Utils;var B=":";D.Define.clazz("qubit.opentag.pagevariable.QProtocolVariable",
b,D.opentag.pagevariable.BaseVariable);b.prototype.init=function(){if(this.initialized)return false;else this.initialized=(new Date).valueOf();this.callHandlersOnRead=true;if(!this.handlerAttached){var h=this;var k=this.getValueAndPath(this.value);this.eventName=k[0];this.objectPath=k[1];this.updateValue();q.subscribe(this.eventName,function(m){h.updateValue(m)});this.handlerAttached=(new Date).valueOf()}};b.prototype.getValueAndPath=function(h){var k=h;var m;if(k){var g=h.indexOf(B);if(g!==-1){k=
h.substring(0,g);m=h.substring(g+1)}}return[k,m]};b.prototype.getValue=function(){this.init();return this.currentValue};b.prototype.getEventsHistory=function(){return q.getEventHistory(this.eventName)};b.prototype.updateValue=function(h){if(!h){var k=this.getEventsHistory();if(k)h=k.current}var m;var g=this.objectPath;if(h&&g)m=p.getObjectUsingPath(g,h);else m=h;this._updateCurrentValue(m);return m};b.prototype.startObservingForChanges=function(){};b.prototype.stopObservingForChanges=function(){}})();
(function(){function b(q){b.SUPER.apply(this,arguments)}D.Define.clazz("qubit.opentag.pagevariable.UniversalVariable",b,D.opentag.pagevariable.Expression)})()})()})();(function(){})();(function(){var t=qubit.opentag.pagevariable.BaseVariable;var a=new t({"name":"Max number of Krux Segments"});var v="prodfalcon.variables.MaxNumberOfKruxSegments";qubit.Define.clientNamespace(v,a);a.value="70"})();
(function(){var t=qubit.opentag.pagevariable.BaseVariable;var a=new t({"name":"remove krux interchange and control tag"});var v="prodfalcon.variables.RemoveKruxInterchangeAndControlTag";qubit.Define.clientNamespace(v,a);a.value="false"})();(function(){var t=qubit.opentag.pagevariable.BaseVariable;var a=new t({"name":"Guest Pass Base Url (via AKAMAI)"});var v="prodfalcon.variables.GuestPassBaseUrlViaAKAMAI";qubit.Define.clientNamespace(v,a);a.value="http://reg.ft-static.com/guestpass"})();
(function(){var t=qubit.opentag.pagevariable.BaseVariable;var a=new t({"name":"takeover-background"});var v="prodfalcon.variables.TakeoverBackground";qubit.Define.clientNamespace(v,a);a.value="FFFFFF"})();(function(){var t=qubit.opentag.pagevariable.BaseVariable;var a=new t({"name":"The version of the advertising lib to be loaded"});var v="prodfalcon.variables.TheVersionOfTheAdvertisingLibToBeLoaded";qubit.Define.clientNamespace(v,a);a.value="14.4.0"})();
(function(){var t=qubit.opentag.pagevariable.BaseVariable;var a=new t({"name":"Personalisation Application Base URL"});var v="prodfalcon.variables.PersonalisationApplicationBaseURL";qubit.Define.clientNamespace(v,a);a.value="http://personalisation.ft.com/"})();
(function(){var t=qubit.opentag.filter.Filter;var a=new t({"include":false,"name":"Exclude articles with pay wall","pattern":"Authorised\x3dfalse.html","patternType":"CONTAINS","priority":5});var v="prodfalcon.filters.ExcludeArticlesWithPayWall";qubit.Define.clientNamespace(v,a);a.customStarter=null;a.customScript=null;a.lexicalPattern=""})();
(function(){var t=qubit.opentag.filter.Filter;var a=new t({"include":true,"name":"Check Logged In","priority":1});var v="prodfalcon.filters.CheckLoggedIn";qubit.Define.clientNamespace(v,a);a.customStarter=function(H,I){I(false)};a.customScript=function(H){return H.getCookie("FTSession")||""};a.lexicalPattern='{\n    "rows": [{\n        "variables": [{\n            "type": "cookie",\n            "comparator": "0",\n            "value": [\n                "FTSession",\n                ""\n            ]\n        }],\n        "starters": [],\n        "operators": []\n    }],\n    "operators": []\n}'})();
(function(){var t=qubit.opentag.filter.Filter;var a=new t({"include":true,"name":"Default filter: Match all(4)","pattern":"ft.com/cms/","patternType":"CONTAINS","priority":1});var v="prodfalcon.filters.DefaultFilterMatchAll4";qubit.Define.clientNamespace(v,a);a.customStarter=null;a.customScript=null;a.lexicalPattern=""})();
(function(){var t=qubit.opentag.filter.Filter;var a=new t({"include":false,"name":"Exclude from www.ft.com/fastft","pattern":"www.ft.com/fastft","patternType":"CONTAINS","priority":1});var v="prodfalcon.filters.ExcludeFromWwwFtComFastft";qubit.Define.clientNamespace(v,a);a.customStarter=null;a.customScript=null;a.lexicalPattern=""})();
(function(){var t=qubit.opentag.filter.Filter;var a=new t({"include":true,"name":"Default filter: Match all(3)","pattern":"/world/americas/regulation","patternType":"ALL_URLS","priority":4});var v="prodfalcon.filters.DefaultFilterMatchAll3";qubit.Define.clientNamespace(v,a);a.customStarter=null;a.customScript=null;a.lexicalPattern=""})();
(function(){var t=qubit.opentag.filter.Filter;var a=new t({"include":true,"name":"Only on unsubscribe page (with intl in path)","pattern":"ft.com/intl/thirdpartywrapper/unsubscribe","patternType":"CONTAINS","priority":1});var v="prodfalcon.filters.OnlyOnUnsubscribePageWithIntlInPath";qubit.Define.clientNamespace(v,a);a.customStarter=null;a.customScript=null;a.lexicalPattern=""})();
(function(){var t=qubit.opentag.filter.Filter;var a=new t({"include":true,"name":"Default filter: Match all(1)","pattern":"checkUsCookieConsent","patternType":"ALL_URLS","priority":7});var v="prodfalcon.filters.DefaultFilterMatchAll1";qubit.Define.clientNamespace(v,a);a.customStarter=null;a.customScript=null;a.lexicalPattern=""})();
(function(){var t=qubit.opentag.filter.Filter;var a=new t({"include":true,"name":"Enable if FT_Comments_Test cookie is set","priority":1});var v="prodfalcon.filters.EnableIfFT_Comments_TestCookieIsSet";qubit.Define.clientNamespace(v,a);a.customStarter=function(H,I){I(false)};a.customScript=function(H){return H.getCookie("FT_Comments_Test")||""};a.lexicalPattern='{\n    "rows": [{\n        "variables": [{\n            "type": "cookie",\n            "comparator": "0",\n            "value": [\n                "FT_Comments_Test",\n                ""\n            ]\n        }],\n        "starters": [],\n        "operators": []\n    }],\n    "operators": []\n}'})();
(function(){var t=qubit.opentag.filter.Filter;var a=new t({"include":true,"name":"Include on session variable","priority":1});var v="prodfalcon.filters.IncludeOnSessionVariable";qubit.Define.clientNamespace(v,a);a.customStarter=function(H,I){I(false)};a.customScript=function(H){return(H.getCookie("env-switch")||"")==="test"};a.lexicalPattern='{\n    "rows": [{\n        "variables": [{\n            "type": "cookie",\n            "comparator": "1",\n            "value": [\n                "env-switch",\n                "test"\n            ]\n        }],\n        "starters": [],\n        "operators": []\n    }],\n    "operators": []\n}'})();
(function(){var t=qubit.opentag.filter.Filter;var a=new t({"include":true,"name":"Default filter: Match all(7)","pattern":"clippings_test\x3d1$","patternType":"REGULAR_EXPRESSION","priority":1});var v="prodfalcon.filters.DefaultFilterMatchAll7";qubit.Define.clientNamespace(v,a);a.customStarter=null;a.customScript=null;a.lexicalPattern=""})();
(function(){var t=qubit.opentag.filter.Filter;var a=new t({"include":false,"name":"Exclude from Methode preview","pattern":"story.internal.ft.com","patternType":"CONTAINS","priority":2});var v="prodfalcon.filters.ExcludeFromMethodePreview";qubit.Define.clientNamespace(v,a);a.customStarter=null;a.customScript=null;a.lexicalPattern=""})();
(function(){var t=qubit.opentag.filter.Filter;var a=new t({"include":false,"name":"Exclude internal","pattern":"internal","patternType":"CONTAINS","priority":1});var v="prodfalcon.filters.ExcludeInternal";qubit.Define.clientNamespace(v,a);a.customStarter=null;a.customScript=null;a.lexicalPattern=""})();
(function(){var t=qubit.opentag.filter.Filter;var a=new t({"include":true,"name":"Include on session cookie","priority":1});var v="prodfalcon.filters.IncludeOnSessionCookie";qubit.Define.clientNamespace(v,a);a.customStarter=function(H,I){I(false)};a.customScript=function(H){return(H.getCookie("env-switch")||"")==="int"};a.lexicalPattern='{\n    "rows": [{\n        "variables": [{\n            "type": "cookie",\n            "comparator": "1",\n            "value": [\n                "env-switch",\n                "int"\n            ]\n        }],\n        "starters": [],\n        "operators": []\n    }],\n    "operators": []\n}'})();
(function(){var t=qubit.opentag.filter.Filter;var a=new t({"include":true,"name":"Default filter: Match all(8)","pattern":"ft_clippings_test\x3d1","patternType":"CONTAINS","priority":1});var v="prodfalcon.filters.DefaultFilterMatchAll8";qubit.Define.clientNamespace(v,a);a.customStarter=null;a.customScript=null;a.lexicalPattern=""})();
(function(){var t=qubit.opentag.filter.Filter;var a=new t({"include":true,"name":"FT.com only","pattern":"www.ft.com","patternType":"CONTAINS","priority":1});var v="prodfalcon.filters.FTComOnly";qubit.Define.clientNamespace(v,a);a.customStarter=null;a.customScript=null;a.lexicalPattern=""})();
(function(){var t=qubit.opentag.filter.Filter;var a=new t({"include":false,"name":"Exclude internal stories","pattern":"story.internal","patternType":"CONTAINS","priority":4});var v="prodfalcon.filters.ExcludeInternalStories";qubit.Define.clientNamespace(v,a);a.customStarter=null;a.customScript=null;a.lexicalPattern=""})();
(function(){var t=qubit.opentag.filter.Filter;var a=new t({"include":false,"name":"Exclude Presscuttings Articles","pattern":"/presscuttings/s/\\d/articleText/.+","patternType":"REGULAR_EXPRESSION","priority":1});var v="prodfalcon.filters.ExcludePresscuttingsArticles";qubit.Define.clientNamespace(v,a);a.customStarter=null;a.customScript=null;a.lexicalPattern=""})();
(function(){var t=qubit.opentag.filter.Filter;var a=new t({"include":false,"name":"Exclude from video.ft.com","pattern":"video.ft.com","patternType":"CONTAINS","priority":2});var v="prodfalcon.filters.ExcludeFromVideoFtCom";qubit.Define.clientNamespace(v,a);a.customStarter=null;a.customScript=null;a.lexicalPattern=""})();
(function(){var t=qubit.opentag.filter.Filter;var a=new t({"include":true,"name":"Include if not CTM","priority":1});var v="prodfalcon.filters.IncludeIfNotCTM";qubit.Define.clientNamespace(v,a);a.customStarter=function(H,I){I()};a.customScript=function(H){if(cutsTheMustard===true)return false;else return true};a.lexicalPattern=""})();
(function(){var t=qubit.opentag.filter.Filter;var a=new t({"include":true,"name":"FT_BETAFEATURES cookie present","priority":2});var v="prodfalcon.filters.FT_BETAFEATURESCookiePresent";qubit.Define.clientNamespace(v,a);a.customStarter=function(H,I){I(false)};a.customScript=function(H){return H.getCookie("FT_BETAFEATURES")||""};a.lexicalPattern='{\n    "rows": [{\n        "variables": [{\n            "type": "cookie",\n            "comparator": "0",\n            "value": [\n                "FT_BETAFEATURES",\n                "true"\n            ]\n        }],\n        "starters": [],\n        "operators": []\n    }],\n    "operators": []\n}'})();
(function(){var t=qubit.opentag.filter.Filter;var a=new t({"include":true,"name":"Articles","pattern":"/cms/s/","patternType":"CONTAINS","priority":1});var v="prodfalcon.filters.Articles";qubit.Define.clientNamespace(v,a);a.customStarter=null;a.customScript=null;a.lexicalPattern=""})();
(function(){var t=qubit.opentag.filter.Filter;var a=new t({"include":false,"name":"Exclude previews","pattern":"preview\x3dtrue","patternType":"CONTAINS","priority":3});var v="prodfalcon.filters.ExcludePreviews";qubit.Define.clientNamespace(v,a);a.customStarter=null;a.customScript=null;a.lexicalPattern=""})();
(function(){var t=qubit.opentag.filter.Filter;var a=new t({"include":true,"name":"Default filter: Match all(2)","pattern":"popunder","patternType":"ALL_URLS","priority":1});var v="prodfalcon.filters.DefaultFilterMatchAll2";qubit.Define.clientNamespace(v,a);a.customStarter=null;a.customScript=null;a.lexicalPattern=""})();
(function(){var t=qubit.opentag.filter.Filter;var a=new t({"include":false,"name":"Disable on OSB TV Screens","pattern":"disablecookieconsent\x3dtrue","patternType":"CONTAINS","priority":1});var v="prodfalcon.filters.DisableOnOSBTVScreens";qubit.Define.clientNamespace(v,a);a.customStarter=null;a.customScript=null;a.lexicalPattern=""})();
(function(){var t=qubit.opentag.filter.Filter;var a=new t({"include":true,"name":"http://www.ft.com/thirdpartywrapper/emealertshub","pattern":"^http://www\\.ft\\.com/thirdpartywrapper/emealertshub","patternType":"REGULAR_EXPRESSION","priority":1});var v="prodfalcon.filters.HttpWwwFtComThirdpartywrapperEmealertshub";qubit.Define.clientNamespace(v,a);a.customStarter=null;a.customScript=null;a.lexicalPattern=""})();
(function(){var t=qubit.opentag.filter.Filter;var a=new t({"include":true,"name":"FT Alphaville","pattern":"ftalphaville.ft.com","patternType":"CONTAINS","priority":1});var v="prodfalcon.filters.FTAlphaville";qubit.Define.clientNamespace(v,a);a.customStarter=null;a.customScript=null;a.lexicalPattern=""})();
(function(){var t=qubit.opentag.filter.Filter;var a=new t({"include":true,"name":"Alphaville feature flag","pattern":"enableSentry","patternType":"CONTAINS","priority":1});var v="prodfalcon.filters.AlphavilleFeatureFlag";qubit.Define.clientNamespace(v,a);a.customStarter=null;a.customScript=null;a.lexicalPattern=""})();
(function(){var t=qubit.opentag.filter.Filter;var a=new t({"include":true,"name":"Default filter: Match all(6)","pattern":"newslines.ft.com/clippings","patternType":"CONTAINS","priority":1});var v="prodfalcon.filters.DefaultFilterMatchAll6";qubit.Define.clientNamespace(v,a);a.customStarter=null;a.customScript=null;a.lexicalPattern=""})();
(function(){var t=qubit.opentag.filter.Filter;var a=new t({"include":true,"name":"FT_BETAFEATURES","pattern":"FT_BETAFEATURES","patternType":"CONTAINS","priority":1});var v="prodfalcon.filters.FT_BETAFEATURES";qubit.Define.clientNamespace(v,a);a.customStarter=null;a.customScript=null;a.lexicalPattern=""})();
(function(){var t=qubit.opentag.filter.Filter;var a=new t({"include":false,"name":"Exclude Preditor","pattern":"preditor.ft.com","patternType":"CONTAINS","priority":6});var v="prodfalcon.filters.ExcludePreditor";qubit.Define.clientNamespace(v,a);a.customStarter=null;a.customScript=null;a.lexicalPattern=""})();
(function(){var t=qubit.opentag.filter.Filter;var a=new t({"include":false,"name":"Exclude if Comments TEST mode is on (has cookie FT_Comments_Test)(1)","priority":1});var v="prodfalcon.filters.ExcludeIfCommentsTESTModeIsOnHasCookieFT_Comments_Test1";qubit.Define.clientNamespace(v,a);a.customStarter=function(H,I){I(false)};a.customScript=function(H){return H.getCookie("FT_Comments_Test")||""};a.lexicalPattern='{\n    "rows": [{\n        "variables": [{\n            "type": "cookie",\n            "comparator": "0",\n            "value": [\n                "FT_Comments_Test",\n                ""\n            ]\n        }],\n        "starters": [],\n        "operators": []\n    }],\n    "operators": []\n}'})();
(function(){var t=qubit.opentag.filter.Filter;var a=new t({"include":true,"name":"Filter to a percentage of users","priority":5});var v="prodfalcon.filters.FilterToAPercentageOfUsers";qubit.Define.clientNamespace(v,a);a.customStarter=function(H,I){I()};a.customScript=function(H){return true};a.lexicalPattern=""})();
(function(){var t=qubit.opentag.filter.Filter;var a=new t({"include":true,"name":"Default filter: Match all(5)","pattern":"clippings.ft.com","patternType":"CONTAINS","priority":1});var v="prodfalcon.filters.DefaultFilterMatchAll5";qubit.Define.clientNamespace(v,a);a.customStarter=null;a.customScript=null;a.lexicalPattern=""})();
(function(){var t=qubit.opentag.filter.Filter;var a=new t({"include":false,"name":"Exclude-fastFT","pattern":"/fastft","patternType":"CONTAINS","priority":1});var v="prodfalcon.filters.ExcludeFastFT";qubit.Define.clientNamespace(v,a);a.customStarter=null;a.customScript=null;a.lexicalPattern=""})();
(function(){var t=qubit.opentag.filter.Filter;var a=new t({"include":false,"name":"Exclude articles","pattern":"[a-fA-F0-9]{8}-[a-fA-F0-9]{4}-[a-fA-F0-9]{4}-[a-fA-F0-9]{4}-[a-fA-F0-9]{12}","patternType":"REGULAR_EXPRESSION","priority":2});var v="prodfalcon.filters.ExcludeArticles";qubit.Define.clientNamespace(v,a);a.customStarter=null;a.customScript=null;a.lexicalPattern=""})();
(function(){var t=qubit.opentag.filter.Filter;var a=new t({"include":true,"name":"Video hub only","pattern":"video.ft.com","patternType":"CONTAINS","priority":1});var v="prodfalcon.filters.VideoHubOnly";qubit.Define.clientNamespace(v,a);a.customStarter=null;a.customScript=null;a.lexicalPattern=""})();
(function(){var t=qubit.opentag.filter.Filter;var a=new t({"include":true,"name":"Default filter: match all","pattern":"changeme","patternType":"ALL_URLS","priority":1});var v="prodfalcon.filters.DefaultFilterMatchAll";qubit.Define.clientNamespace(v,a);a.customStarter=null;a.customScript=null;a.lexicalPattern=""})();
(function(){var t=qubit.opentag.filter.Filter;var a=new t({"include":false,"name":"Free articles","pattern":"/cms/s/2/","patternType":"CONTAINS","priority":2});var v="prodfalcon.filters.FreeArticles";qubit.Define.clientNamespace(v,a);a.customStarter=null;a.customScript=null;a.lexicalPattern=""})();
(function(){var t=qubit.opentag.filter.Filter;var a=new t({"include":true,"name":"Various site referral AND Article","priority":4});var v="prodfalcon.filters.SearchEngineReferralANDArticle";qubit.Define.clientNamespace(v,a);a.customStarter=function(H,I){I(false)};a.customScript=function(H){return(document.referrer.indexOf&&document.referrer.indexOf(".google.")>=0||document.referrer.indexOf&&document.referrer.indexOf(".facebook.")>=0||document.referrer.indexOf&&document.referrer.indexOf(".yahoo.")>=
0||document.referrer.indexOf&&document.referrer.indexOf(".twitter.")>=0||document.referrer.indexOf&&document.referrer.indexOf(".linkedin.")>=0||document.referrer.indexOf&&document.referrer.indexOf(".bing.")>=0)&&(document.location.href.indexOf&&document.location.href.indexOf("/cms/s/")>=0)&&(document.location.href.indexOf&&document.location.href.indexOf("GCS_TEST")===-1)};a.lexicalPattern='{"rows":[{"variables":[{"type":"pageReferrer","comparator":"3","value":".google."},{"type":"pageReferrer","comparator":"3","value":".facebook."},{"type":"pageReferrer","comparator":"3","value":".yahoo."},{"type":"pageReferrer","comparator":"3","value":".twitter."},{"type":"pageReferrer","comparator":"3","value":".linkedin."},{"type":"pageReferrer","comparator":"3","value":".bing."}],"starters":[],"operators":["or","or","or","or","or"]},{"variables":[{"type":"currentUrl","comparator":"3","value":"/cms/s/"}],"starters":[],"operators":[]},{"operators":[],"starters":[],"variables":[{"type":"currentUrl","comparator":"4","value":"GCS_TEST"}]}],"operators":["and","and"]}'})();
(function(){var t=qubit.opentag.filter.Filter;var a=new t({"include":true,"name":"Has Beta Features cookie and Ferret Feature cookie and is on 'A high stakes brand merger...' article","priority":1});var v="prodfalcon.filters.HasBetaFeaturesCookieAndFerretFeatureCookieAndIsOnAHighStakesBrandMergerArticle";qubit.Define.clientNamespace(v,a);a.customStarter=function(H,I){I(false)};a.customScript=function(H){return(H.getCookie("FT_BETAFEATURES")||"")&&(H.getCookie("FTBF_FERRET")||"")&&(document.location.href.indexOf&&
document.location.href.indexOf("/cms/s/0/f52ab3bc-842e-11e3-b72e-00144feab7de.html")>=0||document.location.href.indexOf&&document.location.href.indexOf("/cms/s/0/c6f6714a-8747-11e3-9c5c-00144feab7de.html")>=0)};a.lexicalPattern='{\n    "rows": [\n        {\n            "variables": [\n                {\n                    "type": "cookie",\n                    "comparator": "0",\n                    "value": [\n                        "FT_BETAFEATURES",\n                        ""\n                    ]\n                },\n                {\n                    "type": "cookie",\n                    "comparator": "0",\n                    "value": [\n                        "FTBF_FERRET",\n                        ""\n                    ]\n                }\n            ],\n            "starters": [],\n            "operators": ["and"]\n        },\n        {\n            "variables": [\n                {\n                    "type": "currentUrl",\n                    "comparator": "3",\n                    "value": "\\/cms\\/s\\/0\\/f52ab3bc-842e-11e3-b72e-00144feab7de.html"\n                },\n                {\n                    "type": "currentUrl",\n                    "comparator": "3",\n                    "value": "\\/cms\\/s\\/0\\/c6f6714a-8747-11e3-9c5c-00144feab7de.html"\n                }\n            ],\n            "starters": [],\n            "operators": ["or"]\n        }\n    ],\n    "operators": ["and"]\n}'})();
(function(){var t=qubit.opentag.filter.Filter;var a=new t({"include":true,"name":"ALL URLs","pattern":"","patternType":"ALL_URLS","priority":1});var v="prodfalcon.filters.ALLURLs";qubit.Define.clientNamespace(v,a);a.customStarter=null;a.customScript=null;a.lexicalPattern=""})();
(function(){var t=qubit.opentag.filter.Filter;var a=new t({"include":false,"name":"Exclude logged in users","priority":3});var v="prodfalcon.filters.ExcludeLoggedInUsers";qubit.Define.clientNamespace(v,a);a.customStarter=function(H,I){I(false)};a.customScript=function(H){return H.getCookie("FT_U")||""||(H.getCookie("FT_Remember")||"")};a.lexicalPattern='{\n    "rows": [{\n        "variables": [\n            {\n                "type": "cookie",\n                "comparator": "0",\n                "value": [\n                    "FT_U",\n                    ""\n                ]\n            },\n            {\n                "type": "cookie",\n                "comparator": "0",\n                "value": [\n                    "FT_Remember",\n                    ""\n                ]\n            }\n        ],\n        "starters": [],\n        "operators": ["or"]\n    }],\n    "operators": []\n}'})();
(function(){var t=qubit.opentag.filter.Filter;var a=new t({"include":false,"name":"Exclude if Comments TEST mode is on (has cookie FT_Comments_Test)(3)","priority":1});var v="prodfalcon.filters.ExcludeIfCommentsTESTModeIsOnHasCookieFT_Comments_Test3";qubit.Define.clientNamespace(v,a);a.customStarter=function(H,I){I(false)};a.customScript=function(H){return H.getCookie("FT_Comments_Test")||""};a.lexicalPattern='{\n    "rows": [{\n        "variables": [{\n            "type": "cookie",\n            "comparator": "0",\n            "value": [\n                "FT_Comments_Test",\n                ""\n            ]\n        }],\n        "starters": [],\n        "operators": []\n    }],\n    "operators": []\n}'})();
(function(){var t=qubit.opentag.filter.Filter;var a=new t({"include":false,"name":"Exclude if Comments TEST mode is on (has cookie FT_Comments_Test)(2)","priority":1});var v="prodfalcon.filters.ExcludeIfCommentsTESTModeIsOnHasCookieFT_Comments_Test2";qubit.Define.clientNamespace(v,a);a.customStarter=function(H,I){I(false)};a.customScript=function(H){return H.getCookie("FT_Comments_Test")||""};a.lexicalPattern='{\n    "rows": [{\n        "variables": [{\n            "type": "cookie",\n            "comparator": "0",\n            "value": [\n                "FT_Comments_Test",\n                ""\n            ]\n        }],\n        "starters": [],\n        "operators": []\n    }],\n    "operators": []\n}'})();
(function(){var t=qubit.opentag.filter.Filter;var a=new t({"include":true,"name":"Always run on TPG","pattern":"static.ft.com","patternType":"CONTAINS","priority":1});var v="prodfalcon.filters.AlwaysRunOnTPG";qubit.Define.clientNamespace(v,a);a.customStarter=null;a.customScript=null;a.lexicalPattern=""})();
(function(){var t=qubit.opentag.filter.Filter;var a=new t({"include":true,"name":"FTBF_AUTHOR_ALERTS_BLOGS","priority":1});var v="prodfalcon.filters.FTBF_AUTHOR_ALERTS_BLOGS";qubit.Define.clientNamespace(v,a);a.customStarter=function(H,I){I(false)};a.customScript=function(H){return H.getCookie("FTBF_AUTHOR_ALERTS_BLOGS")||""};a.lexicalPattern='{\n    "rows": [{\n        "variables": [{\n            "type": "cookie",\n            "comparator": "0",\n            "value": [\n                "FTBF_AUTHOR_ALERTS_BLOGS",\n                ""\n            ]\n        }],\n        "starters": [],\n        "operators": []\n    }],\n    "operators": []\n}'})();
(function(){var t=qubit.opentag.filter.Filter;var a=new t({"include":true,"name":"Include if '[?|\x26]setBetaFeatureCookie' is in URL","pattern":"[\\?\\\x26]setBetaFeatureCookie","patternType":"REGULAR_EXPRESSION","priority":2});var v="prodfalcon.filters.IncludeIfSetBetaFeatureCookieIsInURL";qubit.Define.clientNamespace(v,a);a.customStarter=null;a.customScript=null;a.lexicalPattern=""})();
(function(){var t=qubit.opentag.filter.Filter;var a=new t({"include":false,"name":"MobileRedirectTesting","priority":1});var v="prodfalcon.filters.MobileRedirectTesting";qubit.Define.clientNamespace(v,a);a.customStarter=function(H,I){I(false)};a.customScript=function(H){return H.getCookie("MobileRedirectTesting")||""};a.lexicalPattern='{\n    "rows": [{\n        "variables": [{\n            "type": "cookie",\n            "comparator": "0",\n            "value": [\n                "MobileRedirectTesting",\n                ""\n            ]\n        }],\n        "starters": [],\n        "operators": []\n    }],\n    "operators": []\n}'})();
(function(){var t=qubit.opentag.filter.Filter;var a=new t({"include":true,"name":"All URLs(1)","pattern":"ftalphaville.ft.com/marketslive","patternType":"ALL_URLS","priority":2});var v="prodfalcon.filters.AllURLs1";qubit.Define.clientNamespace(v,a);a.customStarter=null;a.customScript=null;a.lexicalPattern=""})();
(function(){var t=qubit.opentag.filter.Filter;var a=new t({"include":true,"name":"Only article pages (intl)","pattern":"^http://www\\.ft\\.com/intl/cms/s","patternType":"REGULAR_EXPRESSION","priority":3});var v="prodfalcon.filters.OnlyArticlePagesIntl";qubit.Define.clientNamespace(v,a);a.customStarter=null;a.customScript=null;a.lexicalPattern=""})();
(function(){var t=qubit.opentag.filter.Filter;var a=new t({"include":true,"name":"Blogs","pattern":"blogs.ft.com","patternType":"CONTAINS","priority":2});var v="prodfalcon.filters.Blogs";qubit.Define.clientNamespace(v,a);a.customStarter=null;a.customScript=null;a.lexicalPattern=""})();
(function(){var t=qubit.opentag.filter.Filter;var a=new t({"include":true,"name":"MarketsLive","pattern":"ftalphaville.ft.com/marketslive","patternType":"CONTAINS","priority":1});var v="prodfalcon.filters.MarketsLive";qubit.Define.clientNamespace(v,a);a.customStarter=null;a.customScript=null;a.lexicalPattern=""})();
(function(){var t=qubit.opentag.filter.Filter;var a=new t({"include":false,"name":"exclude_preditor","pattern":"preditor","patternType":"CONTAINS","priority":2});var v="prodfalcon.filters.Exclude_preditor";qubit.Define.clientNamespace(v,a);a.customStarter=null;a.customScript=null;a.lexicalPattern=""})();
(function(){var t=qubit.opentag.filter.Filter;var a=new t({"include":false,"name":"Exclude barriers","pattern":"Authorised\x3dfalse","patternType":"CONTAINS","priority":3});var v="prodfalcon.filters.ExcludeBarriers";qubit.Define.clientNamespace(v,a);a.customStarter=null;a.customScript=null;a.lexicalPattern=""})();
(function(){var t=qubit.opentag.filter.Filter;var a=new t({"include":true,"name":"Only article pages","pattern":"^http://www\\.ft\\.com/cms/s","patternType":"REGULAR_EXPRESSION","priority":4});var v="prodfalcon.filters.OnlyArticlePages";qubit.Define.clientNamespace(v,a);a.customStarter=null;a.customScript=null;a.lexicalPattern=""})();
(function(){var t=qubit.opentag.filter.Filter;var a=new t({"include":false,"name":"Exclude if Comments TEST mode is on (has cookie FT_Comments_Test)(4)","priority":1});var v="prodfalcon.filters.ExcludeIfCommentsTESTModeIsOnHasCookieFT_Comments_Test4";qubit.Define.clientNamespace(v,a);a.customStarter=function(H,I){I(false)};a.customScript=function(H){return H.getCookie("FT_Comments_Test")||""};a.lexicalPattern='{\n    "rows": [{\n        "variables": [{\n            "type": "cookie",\n            "comparator": "0",\n            "value": [\n                "FT_Comments_Test",\n                ""\n            ]\n        }],\n        "starters": [],\n        "operators": []\n    }],\n    "operators": []\n}'})();
(function(){var t=qubit.opentag.filter.Filter;var a=new t({"include":true,"name":"Only on unsubscribe page","pattern":"ft.com/thirdpartywrapper/unsubscribe","patternType":"CONTAINS","priority":2});var v="prodfalcon.filters.OnlyOnUnsubscribePage";qubit.Define.clientNamespace(v,a);a.customStarter=null;a.customScript=null;a.lexicalPattern=""})();
(function(){var t=qubit.opentag.filter.Filter;var a=new t({"include":true,"name":"Include if '[?|\x26]clearBetaFeatureCookie' is in URL","pattern":"[\\?\\\x26]clearBetaFeatureCookie","patternType":"REGULAR_EXPRESSION","priority":1});var v="prodfalcon.filters.IncludeIfClearBetaFeatureCookieIsInURL";qubit.Define.clientNamespace(v,a);a.customStarter=null;a.customScript=null;a.lexicalPattern=""})();
(function(){var t=qubit.opentag.filter.Filter;var a=new t({"include":true,"name":"CTM","priority":3});var v="prodfalcon.filters.CTM";qubit.Define.clientNamespace(v,a);a.customStarter=function(H,I){I()};a.customScript=function(H){if(typeof cutsTheMustard!=="undefined"&&cutsTheMustard===true)return true;else return false};a.lexicalPattern=""})();
(function(){var t=qubit.opentag.filter.Filter;var a=new t({"include":false,"name":"exclude with session cookie","priority":1});var v="prodfalcon.filters.ExcludeWithSessionCookie";qubit.Define.clientNamespace(v,a);a.customStarter=function(H,I){I(false)};a.customScript=function(H){return H.getCookie("env-switch")||""};a.lexicalPattern='{\n    "rows": [{\n        "variables": [{\n            "type": "cookie",\n            "comparator": "0",\n            "value": [\n                "env-switch",\n                ""\n            ]\n        }],\n        "starters": [],\n        "operators": []\n    }],\n    "operators": []\n}'})();
(function(){var t=qubit.opentag.filter.Filter;var a=new t({"include":false,"name":"Exclude if Comments TEST mode is on (has cookie FT_Comments_Test)","priority":1});var v="prodfalcon.filters.ExcludeIfCommentsTESTModeIsOnHasCookieFT_Comments_Test";qubit.Define.clientNamespace(v,a);a.customStarter=function(H,I){I(false)};a.customScript=function(H){return H.getCookie("FT_Comments_Test")||""};a.lexicalPattern='{\n    "rows": [{\n        "variables": [{\n            "type": "cookie",\n            "comparator": "0",\n            "value": [\n                "FT_Comments_Test",\n                ""\n            ]\n        }],\n        "starters": [],\n        "operators": []\n    }],\n    "operators": []\n}'})();
(function(){var t=qubit.opentag.filter.Filter;var a=new t({"name":"Google Consumer Survey Test","pattern":"GCS"});var v="prodfalcon.filters.GoogleConsumerSurveyTest";qubit.Define.clientNamespace(v,a);a.customStarter=null;a.customScript=null;a.lexicalPattern=""})();
(function(){var t=qubit.opentag.filter.Filter;var a=new t({"include":false,"name":"Exclude from preditor","pattern":"preditor.internal.ft.com","patternType":"CONTAINS","priority":3});var v="prodfalcon.filters.ExcludeFromPreditor";qubit.Define.clientNamespace(v,a);a.customStarter=null;a.customScript=null;a.lexicalPattern=""})();
(function(){var t=qubit.opentag.filter.Filter;var a=new t({"include":false,"name":"Corporate IP Access (_27 equals anything other than PVT)","priority":1});var v="prodfalcon.filters.CorporateIPAccess_27EqualsAnythingOtherThanPVT";qubit.Define.clientNamespace(v,a);a.customStarter=function(H,I){I(false)};a.customScript=function(H){return(new RegExp("_27(?![^_]*PVT)")).test(H.getCookie("AYSC")||"")};a.lexicalPattern='{\n    "rows": [{\n        "variables": [{\n            "type": "cookie",\n            "comparator": "9",\n            "value": [\n                "AYSC",\n                "_27(?![^_]*PVT)"\n            ]\n        }],\n        "starters": [],\n        "operators": []\n    }],\n    "operators": []\n}'})();
(function(){var t=qubit.opentag.filter.Filter;var a=new t({"include":true,"name":"NBE page","pattern":"^http://nbe\\.ft\\.com/","patternType":"REGULAR_EXPRESSION","priority":1});var v="prodfalcon.filters.NBEPage";qubit.Define.clientNamespace(v,a);a.customStarter=null;a.customScript=null;a.lexicalPattern=""})();
(function(){var t=qubit.opentag.CustomTag;var a=new t({"dedupe":false,"locationPlaceHolder":"END","needsConsent":false,"active":true,"url":"","timeout":5E3,"async":true,"usesDocumentWrite":false,"name":"US34984: Essence DFA tags","disabled":false,"id":11119936,"locked":false,"locationObject":"BODY"});var v="prodfalcon.tags.us34984essencedfatags.Tag";qubit.Define.clientNamespace(v,a);a.htmlContent="\x3cscript\x3e\n/*global Track*/\n(function (Track) {\n\n    var params \x3d {\n        src :   4235225, // Same for all campaigns\n        u1 :    Track.Util.getValueFromCookie(/_EID\x3d([0-9]+):/), // [Erights ID]\n        u2 :    '', // [Package Type]\n        u5 :    Track.Util.findSubType(Track.Util.getValueFromCookie(/FT_P\x3d[A-Za-z0-9\x3d\x26|]*prod\x3d([A-Za-z0-9\x3d|]*);?/)), // [Subscription Type]\n        u7 :    Track.Util.getValueFromCookie(/AYSC\x3d[^;]*_14([a-zA-Z0-9%]+)/), // [Country]\n        u8 :    '', // [Currency]\n        u10 :   Track.Util.getValueFromCookie(/spoor-id\x3d([^;]+)/), // [SPOOR]\n        cost :  '', // [Revenue]\n        ord :   1,\n        num :   Math.random() * 10000000000000\n    };\n\n    function addTag(url) {\n        // Taken from http://www.lognormal.com/blog/2012/12/12/the-script-loader-pattern/ to avoid blocking onload\n        var where, iframe \x3d document.createElement('iframe');\n        iframe.src \x3d 'javascript:false';\n        iframe.title \x3d \"\";\n        iframe.role \x3d \"presentation\";  // a11y\n        (iframe.frameElement || iframe).style.cssText \x3d \"width: 0; height: 0; border: 0; display:none\";\n        where \x3d document.getElementsByTagName('script');\n        where \x3d where[where.length - 1];\n        where.parentNode.insertBefore(iframe, where);\n\n        iframe.src \x3d url;\n    }\n\n    /*\n     * Activity ID: 1390878\n     * Activity Name: FT - Home\n     * Activity Group Name: home\n     */\n    addTag([\n        'http://4235225.fls.doubleclick.net/activityi;src\x3d', params.src, ';',\n        'type\x3dhomeo886;',\n        'cat\x3dft-ho780;',\n        'u7\x3d', params.u7, ';',\n        'u5\x3d', params.u5, ';',\n        'u1\x3d', params.u1, ';',\n        'u10\x3d', params.u10, ';',\n        'ord\x3d1;',\n        'num\x3d', params.num,\n        '?'\n    ].join(''));\n\n    /*\n     * Activity ID: 1390902\n     * Activity Name: FT - Login\n     * Activity Group Name: home\n     */\n    // Only send when registered user logged in.\n    if (params.u5 \x3d\x3d\x3d 2) {\n        addTag([\n            'http://4235225.fls.doubleclick.net/activityi;src\x3d', params.src, ';',\n            'type\x3dlogin104;',\n            'cat\x3dft-lo079;',\n            'u7\x3d', params.u7, ';',\n            'u1\x3d', params.u1, ';',\n            'u10\x3d', params.u10, ';',\n            'ord\x3d1;',\n            'num\x3d', params.num,\n            '?'\n        ].join(''));\n    }\n    // Only send when subscribed user logged in.\n    if (params.u5 \x3d\x3d\x3d 3) {\n        addTag([\n            'http://4235225.fls.doubleclick.net/activityi;src\x3d', params.src, ';',\n            'type\x3dlogin104;',\n            'cat\x3dlogin412;',\n            'u7\x3d', params.u7, ';',\n            'u1\x3d', params.u1, ';',\n            'u10\x3d', params.u10, ';',\n            'ord\x3d1;',\n            'num\x3d', params.num,\n            '?'\n        ].join(''));\n    }\n\n}(Track));\n\x3c/script\x3e";
a.addClientFiltersList(["prodfalcon.filters.ALLURLs"]);a.addClientVariablesMap({});a.addParameters([]);a.genericDependencies=[];a.addClientDependenciesList([]);a.pre=function(){};a.script=function(){};a.post=function(){}})();
(function(){var t=qubit.opentag.CustomTag;var a=new t({"dedupe":false,"locationPlaceHolder":"END","needsConsent":false,"active":true,"url":"","timeout":5E3,"async":true,"usesDocumentWrite":false,"name":"Author alerts for blogs and ftalphaville","disabled":true,"id":17792156,"locked":false,"locationObject":"BODY"});var v="prodfalcon.tags.authoralertsforblogsandftalphaville.Tag";qubit.Define.clientNamespace(v,a);a.htmlContent="\x3cscript\x3e\n(function() {\n\t\"use strict\";\n\n\tvar getArticleId \x3d function () {\n\t\tvar articleId;\n\t\tif (FT \x26\x26 FT.page \x26\x26 FT.page.metadata) {\n\t\t\t//on a FT blogs page...\n\t\t\tarticleId \x3d FT.page.metadata.articleUuid;\n\t\t} else if (window.articleUUID) {\n\t\t\tarticleId \x3d window.articleUUID;\n\t\t} else {\n\t\t\t//on an ft cms page\n\t\t\tarticleId \x3d document.body.getAttribute('data-article-uid');\n\t\t}\n\n\t\treturn articleId;\n\t};\n\n\tvar button;\n\tvar articleId \x3d getArticleId();\n\t// Only proceed if we have a suitable byline element and article metadataa\n\tif (articleId) {\n\t\tvar added \x3d false;\n\n\t\tbutton \x3d document.createElement('div');\n\t\tbutton.className \x3d 'o-author-alerts o-author-alerts--theme';\n\t\tbutton.setAttribute('data-o-component', 'o-author-alerts');\n\t\tbutton.setAttribute('data-o-author-alerts-article-id', articleId);\n\n\t\tif (document.querySelector('.entry-header .entry-guest-author')) {\n\t\t\t//a -list\n\t\t\tdocument.querySelector('.entry-header .entry-guest-author').appendChild(button);\n\t\t\tadded \x3d true;\n\t\t} else if (document.querySelector('.entry-meta strong')) {\n\t\t\t//new blogs\n\t\t\tvar el \x3d document.querySelector('.entry-meta strong');\n\t\t\tel.parentNode.insertBefore(button, el.nextSibling);\n\t\t\tadded \x3d true;\n\t\t} else if (document.querySelector('.entry-header .entry-meta')) {\n\t\t\t//old alphaville\n\t\t\tdocument.querySelector('.entry-header .entry-meta').appendChild(button);\n\t\t\tadded \x3d true;\n\t\t} else if (document.querySelector('.byline .author_byline')) {\n\t\t\t//old blogs.ft.com\n\t\t\tdocument.querySelector('.byline .author_byline').appendChild(button);\n\t\t\tadded \x3d true;\n\t\t} else if (!document.querySelector('.entry-meta.byline') \x26\x26 document.querySelector('.byline')) {\n\t\t\t//ft.com cms\n\t\t\tdocument.querySelector('.byline').appendChild(button);\n\t\t\tadded \x3d true;\n\t\t}\n\n\t\tif (added \x26\x26 window.origamiBundles \x26\x26 origamiBundles['o-author-alerts']) {\n\t\t\torigamiBundles['o-author-alerts'].init();\n\t\t}\n\t}\n})();\n\x3c/script\x3e";
a.addClientFiltersList(["prodfalcon.filters.Blogs","prodfalcon.filters.FTAlphaville"]);a.addClientVariablesMap({});a.addParameters([]);a.genericDependencies=[];a.addClientDependenciesList([]);a.pre=function(){};a.script=function(){};a.post=function(){}})();
(function(){var t=qubit.opentag.CustomTag;var a=new t({"dedupe":false,"locationPlaceHolder":"END","needsConsent":false,"active":true,"url":"https://spoor-client.herokuapp.com/beacon.js","timeout":5E3,"async":true,"usesDocumentWrite":false,"name":"Spoor - Beacon","disabled":true,"id":40279156,"locked":false,"locationObject":"BODY"});var v="prodfalcon.tags.spoorbeacon.Tag";qubit.Define.clientNamespace(v,a);a.htmlContent="";a.addClientFiltersList(["prodfalcon.filters.ALLURLs","prodfalcon.filters.Exclude_preditor"]);
a.addClientVariablesMap({});a.addParameters([]);a.genericDependencies=[];a.addClientDependenciesList([]);a.pre=function(){};a.script=function(){};a.post=function(){}})();
(function(){var t=qubit.opentag.CustomTag;var a=new t({"dedupe":false,"locationPlaceHolder":"NOT_END","needsConsent":false,"active":true,"url":"http://s2.media.ft.com/m/resources/cookieconsent/js/cookieConsent-min.js","timeout":-1,"async":true,"usesDocumentWrite":false,"prePostWindowScope":true,"name":"US21222 CookieConsent File Reference","disabled":false,"id":1158291,"locked":false,"locationObject":"BODY"});var v="prodfalcon.tags.us21222cookieconsentfilereference.Tag";qubit.Define.clientNamespace(v,
a);a.htmlContent="";a.addClientFiltersList(["prodfalcon.filters.ALLURLs","prodfalcon.filters.ExcludePreditor","prodfalcon.filters.ExcludeArticlesWithPayWall","prodfalcon.filters.ExcludeInternalStories","prodfalcon.filters.ExcludePreviews","prodfalcon.filters.ExcludeFromVideoFtCom","prodfalcon.filters.DisableOnOSBTVScreens","prodfalcon.filters.ExcludeFromWwwFtComFastft"]);a.addClientVariablesMap({});a.addParameters([]);a.genericDependencies=[];a.addClientDependenciesList([]);a.pre=function(){};a.script=
function(){};a.post=function(){cookieConsent.init()}})();
(function(){var t=qubit.opentag.CustomTag;var a=new t({"dedupe":false,"locationPlaceHolder":"END","needsConsent":false,"active":true,"url":"","timeout":5E3,"async":true,"usesDocumentWrite":false,"name":"Sourcepoint","disabled":false,"id":56640325,"locked":false,"locationObject":"BODY"});var v="prodfalcon.tags.sourcepoint.Tag";qubit.Define.clientNamespace(v,a);a.htmlContent='\x3cscript type\x3d"text/javascript"\x3e\n  (function() {\n\tif (!window.cutsTheMustard) {\n        return;\n    }\n    document.addEventListener(\'sp.blocking\', function (e) {\n    \tdocument.body.dispatchEvent(new CustomEvent(\'oTracking.event\', { \n        \tdetail: {\n        \t\tcategory: \'ads\',\n        \t\taction: \'blocked\'\n     \t\t}, \n          \tbubbles: true \n \t\t}));\n\t});\n  }());\n\n\x3c/script\x3e\n\n\x3cscript async\x3d"async" data-client-id\x3d"pHQAcgfacNTVtzm" type\x3d"text/javascript" src\x3d"//www.ft-static.com/sp/prod/long/sp/sp-2.js"\x3e\x3c/script\x3e';a.addClientFiltersList(["prodfalcon.filters.ALLURLs"]);
a.addClientVariablesMap({});a.addParameters([]);a.genericDependencies=[];a.addClientDependenciesList(["prodfalcon.tags.ctm.Tag","prodfalcon.tags.ngdaprojecttracking.Tag"]);a.pre=function(){};a.script=function(){};a.post=function(){}})();
(function(){var t=qubit.opentag.CustomTag;var a=new t({"dedupe":false,"locationPlaceHolder":"NOT_END","needsConsent":false,"active":true,"url":"","timeout":5E3,"async":false,"usesDocumentWrite":false,"name":"Polyfill service","disabled":false,"id":31453738,"locked":false,"locationObject":"HEAD"});var v="prodfalcon.tags.polyfillservice.Tag";qubit.Define.clientNamespace(v,a);a.htmlContent='\x3cscript src\x3d"https://cdn.polyfill.io/v2/polyfill.min.js?cachebust\x3d193"\x3e\x3c/script\x3e';a.addClientFiltersList(["prodfalcon.filters.ALLURLs"]);
a.addClientVariablesMap({});a.addParameters([]);a.genericDependencies=[];a.addClientDependenciesList([]);a.pre=function(){};a.script=function(){};a.post=function(){}})();
(function(){var t=qubit.opentag.CustomTag;var a=new t({"dedupe":false,"locationPlaceHolder":"END","needsConsent":false,"active":true,"url":"","timeout":5E3,"async":false,"usesDocumentWrite":false,"name":"US22216 Personalisation","disabled":true,"id":1686775,"locked":false,"locationObject":"BODY"});var v="prodfalcon.tags.us22216personalisation.Tag";qubit.Define.clientNamespace(v,a);a.htmlContent="\x3cscript\x3e\n// Browsers are caching the personalisation script and it is being executed before jQuery is ready\n// This is a problem because it has a dependency on jQuery. This snippet will poll for jQuery\n// and inject the script when it is ready\n(function () {\n  var checkCounter \x3d 0, retries \x3d 10, retryInterval \x3d 200;\n  function addScript (script) {\n    if (typeof $ !\x3d\x3d 'undefined') {\n      $(function () {\n        $(document).one('scroll', function () {\n          var url \x3d '${PERSONALISATION_URL}assets/js/personalisation.min.js';\n          var script \x3d document.createElement('script');\n          script.type \x3d 'text/javascript';\n          script.async \x3d true;\n          script.setAttribute('id', 'p13n_script');\n          script.setAttribute('data-features', 'a');\n          script.setAttribute('data-base', '${PERSONALISATION_URL}');\n          script.src \x3d url;\n          var s \x3d document.getElementsByTagName('script')[0];\n          s.parentNode.insertBefore(script, s);\n        });\n      });\n    } else {\n      checkCounter++;\n      if (checkCounter \x3c retries) {\n        setTimeout(function (script) {\n          addScript(script);\n        }, retryInterval);\n      }\n    }\n  }\n  addScript();\n}());\n\x3c/script\x3e";
a.addClientFiltersList(["prodfalcon.filters.ALLURLs","prodfalcon.filters.Exclude_preditor","prodfalcon.filters.ExcludeWithSessionCookie"]);a.addClientVariablesMap({"PERSONALISATION_URL":"prodfalcon.variables.PersonalisationApplicationBaseURL"});a.addParameters([{"name":"Personalisation Application Base URL","description":null,"token":"PERSONALISATION_URL"}]);a.genericDependencies=[];a.addClientDependenciesList([]);a.pre=function(){};a.script=function(){};a.post=function(){}})();
(function(){var t=qubit.opentag.CustomTag;var a=new t({"dedupe":false,"locationPlaceHolder":"NOT_END","needsConsent":false,"active":true,"url":"","timeout":5E3,"async":true,"usesDocumentWrite":false,"name":"test-clippings-popup-ft-com","disabled":true,"id":52363491,"locked":false,"locationObject":"HEAD"});var v="prodfalcon.tags.testclippingspopupftcom.Tag";qubit.Define.clientNamespace(v,a);a.htmlContent='\x3cscript type\x3d"text/javascript"\x3e\n  FT.$(document).ready(function(e){ \n      FT.$(\'.syndicationHeadline\').append("\x3cscript type\x3d\'text/javascript\'\x3e"+\n                                          "function pushNotification(){ "+ \n                                          "var content \x3d \'\x3cdiv id\x3d\\"cp-notification\\" style\x3d\\"width: 370px; min-height: 140px; border: 1px solid #B90A0A;margin-top:5px;margin-bottom:5px;background-color: #ffffff; margin: 5px 0 10px 0;\\"\x3e" +\n                                          "\x3cdiv style\x3d\\"background-color: #B90A0A;height:20px;color:#ffffff;text-align:center;\\"\x3ePLANNED DOWNTIME MESSAGE\x3c/div\x3e"+\n                                          "\x3cdiv style\x3d\\"font-size:16px;margin: 20px 0 10px 10px;\\"\x3e"+\n                                          "\x3cdiv style\x3d\\"float:left;margin-right: 5px;\\"\x3e"+\n                                          "\x3cdiv style\x3d\\"font-size:16px; margin: 0 0 10px 10px;\\"\x3e\x3cspan style\x3d\\"font-weight: bold;\\"\x3eNotice:\x3c/span\x3e Planned downtime \x3cspan style\x3d\\"font-weight: bold;\\"\x3e*8th December 2015*\x3c/span\x3e\x3c/div\x3e"+\n                                          "\x3cdiv style\x3d\\"font-size:16px; margin: 0 0 10px 10px;\\"\x3eFT\u2019s Clippings tool service will be unavailable on 8th December 2015\x3c/div\x3e"+\n                                          "\x3cdiv style\x3d\\"margin: 0 0 10px 10px;\\"\x3eClippings is changing from December 2015. We will resume a new service soon after the upgrade. FT\u2019s Clippings will be relaunched as part of myFT on our new site, \x3ca style\x3d\\"text-decoration:none;\\" href\x3d\\"http://next.ft.com\\"\x3enext.ft.com\x3c/a\x3e.\x3c/div\x3e"+\n                                          "\x3cdiv style\x3d\\"margin: 0 0 10px 10px;\\"\x3eIn the meantime you can start using our new site by opting in \x3ca style\x3d\\"text-decoration: none;\\" href\x3d\\"http://next.ft.com/__opt-in?optedvia\x3dbutton\\" target\x3d\\"_blank\\"\x3ehere\x3c/a\x3e. Your existing clipped articles and lists from Clippings will only appear in myFT after the upgrade is complete.\x3c/div\x3e"+\n                                          "\x3cdiv style\x3d\\"margin: 10px; 0 10px; 10px;\\"\x3eFor any more questions \x3ca style\x3d\\"text-decoration: none;\\" href\x3d\\"http://help.ft.com/tools-services/clippings/\\" target\x3d\\"_blank\\"\x3eclick here\x3c/a\x3e\x3c/div\x3e"+\n                                          "\x3c/div\x3e"+\n                                          "\x3cdiv style\x3d\\"clear:both;\\"\x3e"+\n                                          "\x3c/div\x3e"+\n                                          "\x3cdiv style\x3d\\"clear:both;\\"\x3e"+\n                                          "\x3c/div\x3e\'; if (FT.$(\'div.ftclippings-form div#cp-notification\').length \x3d\x3d 0){FT.$(\'div.ftclippings-form form.clipthisform\').prepend(content);} }"+\n                                          "function clippings_notification_display(){ setTimeout(pushNotification,2000); }"+\n                                          "FT.$(\'body\').on(\'click\',\'a.ftclippings-clipthislink\',function(){ clippings_notification_display(); });\x3c\\/script\x3e");\n                                          \n  });\n\x3c/script\x3e';
a.addClientFiltersList(["prodfalcon.filters.DefaultFilterMatchAll8"]);a.addClientVariablesMap({});a.addParameters([]);a.genericDependencies=[];a.addClientDependenciesList([]);a.pre=function(){};a.script=function(){};a.post=function(){}})();
(function(){var t=qubit.opentag.CustomTag;var a=new t({"dedupe":false,"locationPlaceHolder":"END","needsConsent":false,"active":true,"url":"","timeout":5E3,"async":true,"usesDocumentWrite":false,"name":"FT-ClippingsLists-On-ClippingsFT","disabled":false,"id":47130619,"locked":false,"locationObject":"HEAD"});var v="prodfalcon.tags.ftclippingslistsonclippingsft.Tag";qubit.Define.clientNamespace(v,a);a.htmlContent='\x3cscript type\x3d"text/javascript"\x3e\n  \nvar content \x3d \'\x3cdiv style\x3d"width: 600px; min-height: 140px; border: 1px solid #B90A0A;margin-top:5px;margin-bottom:5px;background-color: #ffffff; margin: 10px 0 10px 0;"\x3e\'+\n        \'\x3cdiv style\x3d"background-color: #B90A0A;height:20px;color:#ffffff;text-align:center;"\x3ePLANNED DOWNTIME MESSAGE\x3c/div\x3e\'+\n        \'\x3cdiv style\x3d"font-size:16px;margin: 20px 0 10px 10px;"\x3e\'+\n          \'\x3cdiv style\x3d"width:75%;float:left;margin-right: 40px;"\x3e\'+\n           \'\x3cdiv style\x3d"font-size:16px; margin: 0 0 10px 10px;"\x3e\x3cspan style\x3d"font-weight: bold;"\x3eNotice:\x3c/span\x3e Planned downtime \x3cspan style\x3d"font-weight: bold;"\x3e*9th December 2015*\x3c/span\x3e\x3c/div\x3e\'+\n           \'\x3cdiv style\x3d"font-size:16px; margin: 0 0 10px 10px;"\x3eFT\u2019s Clippings tool service will be unavailable on 9th December 2015\x3c/div\x3e\'+\n           \'\x3cdiv style\x3d"margin: 0 0 10px 10px;"\x3eClippings is changing from December 2015. We will resume a new service soon after the upgrade. FT\u2019s Clippings will be relaunched as part of myFT on our new site, \x3ca style\x3d"text-decoration:none;" href\x3d"http://next.ft.com"\x3enext.ft.com\x3c/a\x3e.\x3c/div\x3e\'+\n           \'\x3cdiv style\x3d"margin: 10px; 0 10px; 10px;"\x3eFor any more questions \x3ca style\x3d"text-decoration: none;" href\x3d"http://help.ft.com/tools-services/clippings/" target\x3d"_blank"\x3eclick here\x3c/a\x3e\x3c/div\x3e\'+\n          \'\x3c/div\x3e\'+\n          \'\x3cdiv style\x3d"width:16%;height:100%;float:left;"\x3e\x3cimg style\x3d"margin-top: -5px;" src\x3d"http://blogs.ft.com/brusselsblog/files/2015/09/survey-icon.png" alt\x3d"Clippings Notification" title\x3d"Clippings Notification"/\x3e\x3c/div\x3e\'+\n          \'\x3cdiv style\x3d"clear:both;"\x3e\'+\n        \'\x3c/div\x3e\'+\n    \'\x3c/div\x3e\';\n\nFT.$(document).ready(function(e){\n\t"use strict";\n  if (window.location.pathname \x3d\x3d \'/\'){\n    if(FT.$(\'#content ul.mylists\').length) {\n        //this user already has some clipings\n      \tFT.$(\'#content ul.mylists\').prepend(content);\n    } else if(FT.$(\'#content div#clipthisabout\').length) {\n        //this user do not have any clippings\n      \tFT.$(\'#content div#clipthisabout\').prepend(content);\n    }\n  } else {\n      FT.$(\'#content\').prepend(content);\n  }\n});\n\n\x3c/script\x3e';
a.addClientFiltersList(["prodfalcon.filters.DefaultFilterMatchAll5"]);a.addClientVariablesMap({});a.addParameters([]);a.genericDependencies=[];a.addClientDependenciesList([]);a.pre=function(){};a.script=function(){};a.post=function(){}})();
(function(){var t=qubit.opentag.CustomTag;var a=new t({"dedupe":false,"locationPlaceHolder":"NOT_END","needsConsent":false,"active":true,"url":"","timeout":-1,"async":true,"usesDocumentWrite":false,"name":"US23874 Personalisation Switch 2","disabled":true,"id":2383191,"locked":false,"locationObject":"BODY"});var v="prodfalcon.tags.us23874personalisationswitch2.Tag";qubit.Define.clientNamespace(v,a);a.htmlContent='\x3cscript id\x3d"p13n_script" data-base\x3d"http://p13n-test.herokuapp.com/" data-features\x3d"a" src\x3d"http://p13n-test.herokuapp.com/assets/js/personalisation.min.js" async\x3e\x3c/script\x3e';
a.addClientFiltersList(["prodfalcon.filters.IncludeOnSessionVariable"]);a.addClientVariablesMap({});a.addParameters([]);a.genericDependencies=[];a.addClientDependenciesList([]);a.pre=function(){};a.script=function(){};a.post=function(){}})();
(function(){var t=qubit.opentag.CustomTag;var a=new t({"dedupe":false,"locationPlaceHolder":"NOT_END","needsConsent":false,"active":true,"url":"http://reg.ft-static.com/social/social.js","timeout":-1,"async":true,"usesDocumentWrite":false,"prePostWindowScope":true,"name":"US28006 Social Login","disabled":false,"id":7239480,"locked":false,"locationObject":"HEAD"});var v="prodfalcon.tags.us28006sociallogin.Tag";qubit.Define.clientNamespace(v,a);a.htmlContent="";a.addClientFiltersList(["prodfalcon.filters.ALLURLs"]);
a.addClientVariablesMap({});a.addParameters([]);a.genericDependencies=[];a.addClientDependenciesList([]);a.pre=function(){};a.script=function(){};a.post=function(){function H(){if(FT.social&&document.URL.indexOf("Authorised\x3dfalse")===-1){var I=FT.social.getLocationParameter()||decodeURIComponent(document.URL);FT.social.loadLoginWidget({appendInElement:"#ftLogin-box form",successUrl:I,unsuccessfulUrl:"https://registration.ft.com/signup/register?segid\x3d70767\x26location\x3d"+I,target:"HOMEPAGE",
registrationAssetsUrl:"http://reg.ft-static.com"})}}if(document.addEventListener)document.addEventListener("DOMContentLoaded",H,false);else window.attachEvent("onload",H);H()}})();
(function(){var t=qubit.opentag.CustomTag;var a=new t({"dedupe":false,"locationPlaceHolder":"NOT_END","needsConsent":false,"active":true,"url":"subscribe.ft.com/amo.js","timeout":5E3,"async":true,"usesDocumentWrite":false,"name":"CorporateNewAmo","disabled":false,"id":46940279,"locked":false,"locationObject":"HEAD"});var v="prodfalcon.tags.corporatenewamo.Tag";qubit.Define.clientNamespace(v,a);a.htmlContent="";a.addClientFiltersList(["prodfalcon.filters.DefaultFilterMatchAll3","prodfalcon.filters.ExcludeBarriers",
"prodfalcon.filters.ExcludeArticles","prodfalcon.filters.ExcludePresscuttingsArticles"]);a.addClientVariablesMap({});a.addParameters([]);a.genericDependencies=[];a.addClientDependenciesList([]);a.pre=function(){};a.script=function(){};a.post=function(){}})();
(function(){var t=qubit.opentag.CustomTag;var a=new t({"dedupe":false,"locationPlaceHolder":"NOT_END","needsConsent":false,"active":true,"url":"","timeout":5E3,"async":true,"usesDocumentWrite":false,"name":"test-clippings-ft-com","disabled":true,"id":52357373,"locked":false,"locationObject":"HEAD"});var v="prodfalcon.tags.testclippingsftcom.Tag";qubit.Define.clientNamespace(v,a);a.htmlContent='\x3cscript type\x3d"text/javascript"\x3e\n  \nvar content \x3d \'\x3cdiv style\x3d"width: 600px; min-height: 140px; border: 1px solid #B90A0A;margin-top:5px;margin-bottom:5px;background-color: #ffffff; margin: 10px 0 10px 0;"\x3e\'+\n        \'\x3cdiv style\x3d"background-color: #B90A0A;height:20px;color:#ffffff;text-align:center;"\x3ePLANNED DOWNTIME MESSAGE\x3c/div\x3e\'+\n        \'\x3cdiv style\x3d"font-size:16px;margin: 20px 0 10px 10px;"\x3e\'+\n          \'\x3cdiv style\x3d"width:75%;float:left;margin-right: 40px;"\x3e\'+\n           \'\x3cdiv style\x3d"font-size:16px; margin: 0 0 10px 10px;"\x3e\x3cspan style\x3d"font-weight: bold;"\x3eNotice:\x3c/span\x3e Planned downtime \x3cspan style\x3d"font-weight: bold;"\x3e*8th December 2015*\x3c/span\x3e\x3c/div\x3e\'+\n           \'\x3cdiv style\x3d"font-size:16px; margin: 0 0 10px 10px;"\x3eFT\u2019s Clippings tool service will be unavailable on 8th December 2015\x3c/div\x3e\'+\n           \'\x3cdiv style\x3d"margin: 0 0 10px 10px;"\x3eClippings is changing from December 2015. We will resume a new service soon after the upgrade. FT\u2019s Clippings will be relaunched as part of myFT on our new site, \x3ca style\x3d"text-decoration:none;" href\x3d"http://next.ft.com"\x3enext.ft.com\x3c/a\x3e.\x3c/div\x3e\'+\n           \'\x3cdiv style\x3d"margin: 0 0 10px 10px;"\x3eIn the meantime you can start using our new site by opting in \x3ca style\x3d"text-decoration: none;" href\x3d"http://next.ft.com/__opt-in?optedvia\x3dbutton" target\x3d"_blank"\x3ehere\x3c/a\x3e. \\nYour existing clipped articles and lists from Clippings will only appear in myFT after the upgrade is complete.\x3c/div\x3e\'+\n           \'\x3cdiv style\x3d"margin: 10px; 0 10px; 10px;"\x3eFor any more questions \x3ca style\x3d"text-decoration: none;" href\x3d"http://help.ft.com/tools-services/clippings/" target\x3d"_blank"\x3eclick here\x3c/a\x3e\x3c/div\x3e\'+\n          \'\x3c/div\x3e\'+\n          \'\x3cdiv style\x3d"width:16%;height:100%;float:left;"\x3e\x3cimg style\x3d"margin-top: -5px;" src\x3d"http://blogs.ft.com/brusselsblog/files/2015/09/survey-icon.png" alt\x3d"Clippings Notification" title\x3d"Clippings Notification"/\x3e\x3c/div\x3e\'+\n          \'\x3cdiv style\x3d"clear:both;"\x3e\'+\n        \'\x3c/div\x3e\'+\n    \'\x3c/div\x3e\';\n\nFT.$(document).ready(function(e){\n\t"use strict";\n  if (window.location.pathname \x3d\x3d \'/\'){\n    if(FT.$(\'#content ul.mylists\').length) {\n        //this user already has some clipings\n      \tFT.$(\'#content ul.mylists\').prepend(content);\n    } else if(FT.$(\'#content div#clipthisabout\').length) {\n        //this user do not have any clippings\n      \tFT.$(\'#content div#clipthisabout\').prepend(content);\n    }\n  } else {\n      FT.$(\'#content\').prepend(content);\n  }\n});\n\n\x3c/script\x3e';
a.addClientFiltersList(["prodfalcon.filters.DefaultFilterMatchAll7"]);a.addClientVariablesMap({});a.addParameters([]);a.genericDependencies=[];a.addClientDependenciesList([]);a.pre=function(){};a.script=function(){};a.post=function(){}})();
(function(){var t=qubit.opentag.CustomTag;var a=new t({"dedupe":false,"locationPlaceHolder":"NOT_END","needsConsent":false,"active":true,"url":"http://s0.2mdn.net/instream/html5/gpt_proxy.js","timeout":5E3,"async":true,"usesDocumentWrite":false,"name":"GPT Video HTML5 Player proxy","disabled":false,"id":20995880,"locked":false,"locationObject":"HEAD"});var v="prodfalcon.tags.gptvideohtml5playerproxy.Tag";qubit.Define.clientNamespace(v,a);a.htmlContent="";a.addClientFiltersList(["prodfalcon.filters.VideoHubOnly"]);
a.addClientVariablesMap({});a.addParameters([]);a.genericDependencies=[];a.addClientDependenciesList([]);a.pre=function(){};a.script=function(){};a.post=function(){}})();
(function(){var t=qubit.opentag.CustomTag;var a=new t({"dedupe":false,"locationPlaceHolder":"END","needsConsent":false,"active":true,"url":"","timeout":-1,"async":true,"usesDocumentWrite":false,"name":"I320: Google Consumer Survey (aka 402)","disabled":false,"id":57757,"locked":false,"locationObject":"BODY"});var v="prodfalcon.tags.i320googleconsumersurveyaka402.Tag";qubit.Define.clientNamespace(v,a);a.htmlContent="\x3cscript type\x3d\"text/javascript\"\x3e\n  \n  FT.env.dfp_targeting \x3d \"gcs\x3dtrue;pt\x3dart\";\n  \n  $('#storyContent').addClass('p402_premium');\n\n  function GcsSurveyShown () {\n    FT.customEvents.trigger('surveyShown.GCS');\n  }\n  function GcsAccessGranted () {\n    FT.customEvents.trigger('accessGranted.GCS');\n  }\n  \n  var TriggerPrompt \x3d function(articleUrl, contentId) {\n    var ARTICLE_URL \x3d articleUrl;\n    var CONTENT_ID \x3d contentId || '';\n    var el \x3d document.createElement('script');\n    var url \x3d 'http://survey.g.doubleclick.net/survey?site\x3d40467365' +\n              '\x26url\x3d' + encodeURIComponent(ARTICLE_URL) + (CONTENT_ID ? '\x26cid\x3d' + encodeURIComponent(CONTENT_ID) : '') +\n              '\x26random\x3d' + (new Date).getTime() +\n              '\x26after\x3d1' +\n              '\x26divId\x3dstoryContent';\n    el.setAttribute('src', url);\n    var head \x3d document.getElementsByTagName('head')[0] ||\n        document.getElementsByTagName('body')[0];\n    head.appendChild(el);\n  };\n  TriggerPrompt(window.location.href, (new Date()).getTime());\n  if (FT \x26\x26 FT.analytics \x26\x26 FT.analytics.siteIntelligence) {\n    FT.analytics.siteIntelligence.sendAdditionalTracer(\"/eventonpage\", \"type\x3dgcs\x26data\x3drequested\");\n  }\n\n\x3c/script\x3e";
a.addClientFiltersList(["prodfalcon.filters.SearchEngineReferralANDArticle","prodfalcon.filters.ExcludeLoggedInUsers","prodfalcon.filters.FreeArticles","prodfalcon.filters.CorporateIPAccess_27EqualsAnythingOtherThanPVT"]);a.addClientVariablesMap({});a.addParameters([]);a.genericDependencies=[];a.addClientDependenciesList([]);a.pre=function(){};a.script=function(){};a.post=function(){}})();
(function(){var t=qubit.opentag.CustomTag;var a=new t({"dedupe":false,"locationPlaceHolder":"END","needsConsent":false,"active":true,"url":"https://www.ft.com/__opt-template.js","timeout":5E3,"async":true,"usesDocumentWrite":false,"name":"Opt Into Next","disabled":false,"id":35301003,"locked":false,"locationObject":"BODY"});var v="prodfalcon.tags.optintonext.Tag";qubit.Define.clientNamespace(v,a);a.htmlContent="";a.addClientFiltersList(["prodfalcon.filters.CheckLoggedIn"]);a.addClientVariablesMap({});
a.addParameters([]);a.genericDependencies=[];a.addClientDependenciesList([]);a.pre=function(){};a.script=function(){};a.post=function(){}})();
(function(){var t=qubit.opentag.CustomTag;var a=new t({"dedupe":false,"locationPlaceHolder":"NOT_END","needsConsent":false,"active":true,"url":"","timeout":5E3,"async":true,"usesDocumentWrite":false,"name":"MarketsLive: Old browser notification","disabled":false,"id":34550070,"locked":false,"locationObject":"BODY"});var v="prodfalcon.tags.marketsliveoldbrowsernotification.Tag";qubit.Define.clientNamespace(v,a);a.htmlContent="\x3cscript src\x3d\"http://www.ft-static.com/sp/prod/cuts-the-mustard-notification/0.2.3/long/main.js\"\x3e\x3c/script\x3e\n\x3cscript\x3e\n  (function () {\n    var head \x3d document.head || document.getElementsByTagName('head')[0];\n    var scripts;\n    var link;\n    \n    \n    link \x3d document.createElement('link');\n    link.type \x3d 'text/css';\n    link.rel \x3d 'stylesheet';\n    link.href \x3d 'http://www.ft-static.com/sp/prod/cuts-the-mustard-notification/0.2.3/long/main.css';\n    head.appendChild(link);\n  })();\n\x3c/script\x3e\n\n\x3cscript\x3e\n  if (typeof cutsTheMustard !\x3d\x3d 'undefined' \x26\x26 cutsTheMustard \x3d\x3d\x3d false) {\n    cutsTheMustardNotification.init();\n  }\n\x3c/script\x3e";
a.addClientFiltersList(["prodfalcon.filters.MarketsLive"]);a.addClientVariablesMap({});a.addParameters([]);a.genericDependencies=[];a.addClientDependenciesList(["prodfalcon.tags.ctm.Tag"]);a.pre=function(){};a.script=function(){};a.post=function(){}})();
(function(){var t=qubit.opentag.CustomTag;var a=new t({"dedupe":false,"locationPlaceHolder":"NOT_END","needsConsent":false,"active":true,"url":"","timeout":5E3,"async":true,"usesDocumentWrite":false,"name":"NGDA Project - Tracking","disabled":false,"id":41846226,"locked":false,"locationObject":"HEAD"});var v="prodfalcon.tags.ngdaprojecttracking.Tag";qubit.Define.clientNamespace(v,a);a.htmlContent="\x3cscript\x3e\n/*global Track,Origami, cutsTheMustard */\n(function() {\n    \"use strict\";\n\n    function getValueFromCookie(matcher) {\n        return document.cookie.match(matcher) \x26\x26 RegExp.$1 !\x3d\x3d '' \x26\x26 RegExp.$1 !\x3d\x3d 'null' ? RegExp.$1 : null;\n    }\n\n    function getValueFromUrl(matcher) {\n        return document.location.href.match(matcher) \x26\x26 RegExp.$1 !\x3d\x3d '' ? RegExp.$1 : null;\n    }\n\n    function getValueFromJsVariable(str) {\n        if (typeof str !\x3d\x3d 'string') {\n            return null;\n\n        }\n\n        var i;\n        var namespaces \x3d str.split('.');\n        var test \x3d window;\n\n        for (i \x3d 0; i \x3c namespaces.length; i \x3d i + 1) {\n            if (typeof test[namespaces[i]] \x3d\x3d\x3d 'undefined') {\n                return null;\n            }\n\n            test \x3d test[namespaces[i]];\n        }\n\n        return test !\x3d\x3d '' ? test : null;\n    }\n\n    var server \x3d 'https://spoor-api.ft.com/px.gif';\n    var passport_id \x3d getValueFromCookie(/USERID\x3d([0-9]+):/) || getValueFromCookie(/PID\x3d([0-9]+)\\_/);\n    var ft_session \x3d getValueFromCookie(/FTSession\x3d([^;]+)/);\n    var hurdle \x3d getValueFromJsVariable('HurdleType');\n    var asset_type \x3d getValueFromJsVariable('AssetType');\n    var sitemap \x3d getValueFromJsVariable('siteMapTerm');\n    var uuid \x3d getValueFromUrl(/\\/cms\\/s?\\/?\\d?\\/?([a-z0-9]{8}-[a-z0-9]{4}-[a-z0-9]{4}-[a-z0-9]{4}-[a-z0-9]{12})/) || (['front','section'].indexOf(asset_type) \x3e -1 ? null : getValueFromJsVariable(\"pageUUID\"));\n    var step_name \x3d getValueFromJsVariable('sPageName');\n    var step_number \x3d getValueFromJsVariable('sPageNumber');\n    var payment_term \x3d getValueFromJsVariable('sPaymentTerm');\n    var environment \x3d 'p';\n\n    function otrackinginit() {\n        // oTracking\n        var oTracking \x3d Origami['o-tracking'];\n\n        // Setup\n        oTracking.init({\n            server: server,\n            system: {\n                environment: environment,\n                is_live: environment \x3d\x3d\x3d 'p'\n            },\n            context: {\n                product: 'ft.com'\n            },\n            user: {\n                passport_id: passport_id,\n                ft_session: ft_session\n            }\n        });\n        oTracking.link.init();\n\n        // Track page\n        oTracking.page({\n            content: {\n                uuid: uuid,\n                hurdle: hurdle,\n                asset_type: asset_type,\n                sitemap: sitemap\n            }\n        });\n    }\n\n    // CTM\n    if (cutsTheMustard) {\n        var o \x3d document.createElement('script');\n        o.async \x3d o.defer \x3d true;\n        o.src \x3d 'http://origami-build.ft.com/v2/bundles/js?modules\x3do-tracking%401.1.9';\n        var s \x3d document.getElementsByTagName('script')[0];\n\n        if (o.hasOwnProperty('onreadystatechange')) {\n            o.onreadystatechange \x3d function() {\n                if (o.readyState \x3d\x3d\x3d \"loaded\") {\n                    otrackinginit();\n                }\n            };\n        } else {\n            o.onload \x3d otrackinginit;\n        }\n\n        s.parentNode.insertBefore(o, s);\n    } else {\n        var p \x3d new Image();\n        p.src \x3d server+'?data\x3d%7B%22system%22%3A%7B%22environment%22%3A%22'+environment+'%22%2C%22is_live%22%3A%22'+(environment\x3d\x3d\x3d'p')+'%22%2C%22api_key%22%3A%22qUb9maKfKbtpRsdp0p2J7uWxRPGJEP%22%2C%22version%22%3A%221.0.0%22%2C%22source%22%3A%22o-tracking-ftm%22%7D%2C%22context%22%3A%7B%22product%22%3A%22ft.com%22%2C%22content%22%3A%7B%22uuid%22%3A%22'+uuid+'%22%2C%22hurdle%22%3A%22'+hurdle+'%22%2C%22asset_type%22%3A%22'+asset_type+'%22%7D%7D%2C%22user%22%3A%7B%22passport_id%22%3A%22'+passport_id+'%22%2C%22ft_session%22%3A%22'+ft_session+'%22%7D%2C%22category%22%3A%22page%22%2C%22action%22%3A%22view%22%7D';\n        var b \x3d document.getElementsByTagName('body')[0];\n        b.appendChild(p);\n    }\n}());\n\x3c/script\x3e";
a.addClientFiltersList(["prodfalcon.filters.ALLURLs","prodfalcon.filters.Exclude_preditor","prodfalcon.filters.ExcludeFastFT"]);a.addClientVariablesMap({});a.addParameters([]);a.genericDependencies=[];a.addClientDependenciesList(["prodfalcon.tags.polyfillservice.Tag","prodfalcon.tags.ctm.Tag"]);a.pre=function(){};a.script=function(){};a.post=function(){}})();
(function(){var t=qubit.opentag.CustomTag;var a=new t({"dedupe":false,"locationPlaceHolder":"NOT_END","needsConsent":false,"active":true,"url":"","timeout":5E3,"async":false,"usesDocumentWrite":false,"name":"advertising","disabled":false,"id":6293403,"locked":false,"locationObject":"HEAD"});var v="prodfalcon.tags.advertising.Tag";qubit.Define.clientNamespace(v,a);a.htmlContent="\x3cscript\x3e\n//Options set via opentag page variables\nFT.env.advertising \x3d 'ft-' + '${advertising-version}';\nFT.env.suppressKrux \x3d ${suppressKrux};\nFT.env.kruxMaxSegs \x3d ${kruxMaxSegs};\n\nfunction detectAdBlock() {\n\tFT.env.adsBlocked \x3d false;\n\n\t/*\n\t* Test 1 - Inline script errors\n\t* This relys on a quirk with the FT.com setup, when adblock is running our library is blocked causing\n\t* undefined property errors when our inline scripts run, this could cause false positives if our library\n\t* is failing to load for reasons other than adBlock but is a good indicator.\n\t*/\n\twindow.onerror \x3d function(err) {\n\t\tif (err.indexOf \x26\x26 ~err.indexOf('Cannot read property \\'slots\\' of undefined') \x26\x26 !FT.env.adsBlocked) {\n\t\t\tFT.env.adsBlocked \x3d true;\n\t\t\tTrack.IJento.getSiTracker().sendAdditionalTracer('/eventonpage', 'type\x3dadblock\x26data\x3dtrue');\n\t\t}\n\n\t\treturn false;\n\t};\n\n\t/*\n\t* Test 2 - Tempting URL\n\t* This test attaches a small script file to the page, the URL for the script is named such that\n\t* most adBlockers will block the file, If the file fails to load we assume the user is using an\n\t* adblocker. Again there could be false positives if the file is unavailable for some other reason.\n\t*/\n\tvar node \x3d document.getElementsByTagName('script')[0];\n\tvar tag \x3d document.createElement('script');\n\ttag.setAttribute('src', 'http://s2.ft-static.com/m/advertising/ads.js');\n\ttag.async \x3d 'true';\n\n\ttag.onerror \x3d function() {\n\t\tif (!FT.env.adsBlocked) {\n\t\t\tFT.env.adsBlocked \x3d true;\n\t\t\tTrack.IJento.getSiTracker().sendAdditionalTracer('/eventonpage', 'type\x3dadblock\x26data\x3dtrue');\n\t\t}\n\t};\n\n\tnode.parentNode.insertBefore(tag, node);\n\treturn tag;\n}\n\ndetectAdBlock();\n\x3c/script\x3e";
a.addClientFiltersList(["prodfalcon.filters.ALLURLs"]);a.addClientVariablesMap({"suppressKrux":"prodfalcon.variables.RemoveKruxInterchangeAndControlTag","advertising-version":"prodfalcon.variables.TheVersionOfTheAdvertisingLibToBeLoaded","takeover-background":"prodfalcon.variables.TakeoverBackground","kruxMaxSegs":"prodfalcon.variables.MaxNumberOfKruxSegments"});a.addParameters([{"name":"The version of the advertising lib to be loaded","description":null,"token":"advertising-version"},{"name":"remove krux interchange and control tag",
"description":null,"token":"suppressKrux"},{"name":"Max number of Krux Segments","description":null,"token":"kruxMaxSegs"},{"name":"takeover-background","description":null,"token":"takeover-background"}]);a.genericDependencies=[];a.addClientDependenciesList([]);a.pre=function(){};a.script=function(){};a.post=function(){}})();
(function(){var t=qubit.opentag.CustomTag;var a=new t({"dedupe":false,"locationPlaceHolder":"NOT_END","needsConsent":false,"active":true,"url":"","timeout":-1,"async":true,"usesDocumentWrite":false,"name":"US23874 Personalisation switch 1","disabled":true,"id":2383185,"locked":false,"locationObject":"BODY"});var v="prodfalcon.tags.us23874personalisationswitch1.Tag";qubit.Define.clientNamespace(v,a);a.htmlContent='\x3cscript id\x3d"p13n_script" data-base\x3d"http://p13n-int.herokuapp.com/" data-features\x3d"a" src\x3d"http://p13n-int.herokuapp.com/assets/js/personalisation.min.js" async\x3e\x3c/script\x3e';
a.addClientFiltersList(["prodfalcon.filters.IncludeOnSessionCookie"]);a.addClientVariablesMap({});a.addParameters([]);a.genericDependencies=[];a.addClientDependenciesList([]);a.pre=function(){};a.script=function(){};a.post=function(){}})();
(function(){var t=qubit.opentag.CustomTag;var a=new t({"dedupe":false,"locationPlaceHolder":"NOT_END","needsConsent":false,"active":true,"url":"","timeout":5E3,"async":true,"usesDocumentWrite":false,"name":"NGDA Project - Tracking footer","disabled":false,"id":55104439,"locked":false,"locationObject":"BODY"});var v="prodfalcon.tags.ngdaprojecttrackingfooter.Tag";qubit.Define.clientNamespace(v,a);a.htmlContent="\x3cscript\x3e\n(function() {\n    \"use strict\";\n    if (!cutsTheMustard) {\n        return;\n    }\n\n    if (typeof Track \x3d\x3d\x3d \"undefined\") {\n        return;\n    }\n\n    // Rewrite iJento data\n    var old_data \x3d Track.IJento.getSiTracker().trackData;\n    Track.IJento.getSiTracker().trackData \x3d function (a) {\n        old_data.apply(this, arguments);\n\n        a \x3d a.split('\x26').forEach(function(e) {\n            e \x3d e.split(\"\x3d\");\n\n            var o_event \x3d {\n                category: 'page',\n                action: e[0],\n                context: { value: e[1] }\n            };\n\n            document.body.dispatchEvent(new CustomEvent('oTracking.event', { detail: o_event, bubbles: true }));\n        });\n\n        \n    };\n    // End trackData\n\n    // TODO trackLinks\n    /*\n    var old_link \x3d Track.IJento.getSiTracker().trackLink;\n    Track.IJento.getSiTracker().trackLink \x3d function (a) {\n        old_link.apply(this, arguments);\n        document.body.dispatchEvent(new CustomEvent('oTracking.link', { detail: a, bubbles: true }));\n    };\n    */\n    // End trackLinks\n\n    function rename(category, action, context) {\n        // Duplication of event action.\n        delete context.type;\n        \n        var tracking_event \x3d {category: category, action: action, context: context};\n\n        if (/^si\\/comment/.test(category)) {\n          \treturn null;\n          \t/*\n          \ttracking_event.category \x3d 'comment';\n            tracking_event.action \x3d 'post';\n\n            // e.g. si/comment/like\n            var comment_type \x3d category.split('/');\n            \n            if (comment_type.length \x3d\x3d\x3d 3) {\n                tracking_event.action \x3d comment_type.slice(-1)[0];\n            }\n\n            return tracking_event;\n            */\n        }\n\n        switch (category) {\n        case 'eventonpage':\n            tracking_event.category \x3d 'page';\n            if (/^nav\\.headlineload/.test(action)) {\n                tracking_event.action \x3d 'nav.headlineload';\n                tracking_event.context.nav_headlineload \x3d action.replace(/^nav\\.headlineload\\./, '');\n            }\n            break;\n\n        case 'videoevent':\n        case 'video_event':\n            tracking_event.category \x3d 'video';\n            break;\n        case 'si/scroll':\n            tracking_event.category \x3d 'page';\n            tracking_event.action \x3d 'scroll';\n            break;\n        case 'si/tynt_start':\n            tracking_event.category \x3d 'text';\n            tracking_event.action \x3d 'copy';\n            break;\n        }\n\n        return tracking_event;\n    }\n\n    // Run on 10% of requests\n    if (Math.random() \x3c\x3d 2 || document.URL.indexOf('otracking-events') \x3e -1) {    \n        // Rewrite iJento events\n        var old_tracer \x3d Track.IJento.getSiTracker().sendAdditionalTracer;\n        Track.IJento.getSiTracker().sendAdditionalTracer \x3d function (a, b) {\n            old_tracer.apply(this, arguments);\n\n            var ev \x3d {};\n\n            b \x3d b.split('\x26').forEach(function(e) {\n                e \x3d e.split(\"\x3d\");\n                ev[e[0]] \x3d e[1];\n            });\n\n            var tracking_event \x3d rename(a.substring(1), ev.type, ev);\n          \tif (tracking_event) {\n\t          document.body.dispatchEvent(new CustomEvent('oTracking.event', { detail: tracking_event, bubbles: true }));\n            }\n        };\n    }\n}());\n\x3c/script\x3e";
a.addClientFiltersList(["prodfalcon.filters.ALLURLs","prodfalcon.filters.Exclude_preditor","prodfalcon.filters.ExcludeIfCommentsTESTModeIsOnHasCookieFT_Comments_Test4"]);a.addClientVariablesMap({});a.addParameters([]);a.genericDependencies=[];a.addClientDependenciesList(["prodfalcon.tags.ngdaprojecttracking.Tag"]);a.pre=function(){};a.script=function(){};a.post=function(){}})();
(function(){var t=qubit.opentag.CustomTag;var a=new t({"dedupe":false,"locationPlaceHolder":"NOT_END","needsConsent":false,"active":true,"url":"","timeout":5E3,"async":true,"usesDocumentWrite":false,"name":"Livefyre temp workaround: hide permalink avatars","disabled":false,"id":57770,"locked":false,"locationObject":"HEAD"});var v="prodfalcon.tags.livefyretempworkaroundhidepermalinkavatars.Tag";qubit.Define.clientNamespace(v,a);a.htmlContent='\x3cstyle\x3e\n  [data-lf-package^\x3d"streamhub-permalink"] .content .content-author-avatar {\n    display: none !important;\n  }\n\x3c/style\x3e';
a.addClientFiltersList(["prodfalcon.filters.DefaultFilterMatchAll"]);a.addClientVariablesMap({});a.addParameters([]);a.genericDependencies=[];a.addClientDependenciesList([]);a.pre=function(){};a.script=function(){};a.post=function(){}})();
(function(){var t=qubit.opentag.CustomTag;var a=new t({"dedupe":false,"locationPlaceHolder":"NOT_END","needsConsent":false,"active":true,"url":"","timeout":5E3,"async":false,"usesDocumentWrite":false,"name":"CTM","disabled":false,"id":39954046,"locked":false,"locationObject":"HEAD"});var v="prodfalcon.tags.ctm.Tag";qubit.Define.clientNamespace(v,a);a.htmlContent="\x3cscript\x3e\n  var cutsTheMustard \x3d ('querySelector' in document \x26\x26 'localStorage' in window \x26\x26 'addEventListener' in window);\n  \n  if (cutsTheMustard) {\n    // Swap the `core` class on the HTML element for an `enhanced` one\n    // We're doing it early in the head to avoid a flash of unstyled content\n    document.documentElement.className \x3d document.documentElement.className.replace(/\\bcore\\b/g, 'enhanced');\n  }\n\x3c/script\x3e";
a.addClientFiltersList(["prodfalcon.filters.ALLURLs"]);a.addClientVariablesMap({});a.addParameters([]);a.genericDependencies=[];a.addClientDependenciesList([]);a.pre=function(){};a.script=function(){};a.post=function(){}})();
(function(){var t=qubit.opentag.CustomTag;var a=new t({"dedupe":false,"locationPlaceHolder":"END","needsConsent":false,"active":true,"url":"","timeout":5E3,"async":true,"usesDocumentWrite":false,"name":"US19952 Chartbeat","disabled":false,"id":1839843,"locked":false,"locationObject":"BODY"});var v="prodfalcon.tags.us19952chartbeat.Tag";qubit.Define.clientNamespace(v,a);a.htmlContent='\x3cscript\x3e\n    /*global FT,$,Track*/\n    try {\n        if (FT \x26\x26 (\n            (FT.isPage \x26\x26 (FT.isPage.Site !\x3d\x3d 1 || FT.isPage.Section !\x3d\x3d 0 || FT.isPage.Front !\x3d\x3d 0)) ||\n            (FT.env \x26\x26 (\n                FT.env.dfp_site \x3d\x3d\x3d "ftcom.5887.bus-school-rankings" ||\n                FT.env.dfp_site \x3d\x3d\x3d "ftcom.5887.markets-data" ||\n                FT.env.dfp_site \x3d\x3d\x3d "ftcom.5887.video"  ||\n                FT.env.dfp_site \x3d\x3d\x3d "ftcom.5887.topics" ||\n                FT.env.dfp_site \x3d\x3d\x3d "ftcom.5887.podcast" ||\n                FT.env.dfp_site \x3d\x3d\x3d "ftcom.5887.clippings" ||\n                FT.env.dfp_site \x3d\x3d\x3d "ftcom.5887.cuttings" ||\n                FT.env.dfp_site \x3d\x3d\x3d "ftcom.5887.blogs" ||\n                FT.env.dfp_site \x3d\x3d\x3d "ftcom.5887.alphaville" ||\n                FT.env.dfp_site \x3d\x3d\x3d "ftcom.5887.business-education" ||\n                FT.env.dfp_site \x3d\x3d\x3d "ftcom.5887.technology" ||\n                FT.env.dfp_site \x3d\x3d\x3d "ftcom.5887.comment" ||\n                FT.env.dfp_site \x3d\x3d\x3d "ftcom.5887.search"\n            ))  ||\n            window.siteMapTerm \x3d\x3d\x3d "Products.Lexicon"\n        ))\n        {\n          \n          // We are setting a flag for the Sticky Ads trial.\n          // This flag should be removed after the sticky ads trial has completed.\n          if (typeof mmcore !\x3d\x3d \'undefined\' \x26\x26 typeof mmcore.GenInfo !\x3d\x3d \'undefined\' \x26\x26 typeof mmcore.GenInfo[\'VC25_Sticky_ads\'] !\x3d\x3d \'undefined\'){\n              FT.stickyAd \x3d (mmcore.GenInfo[\'VC25_Sticky_ads\'].element9998 \x3d\x3d\x3d \'stickyads\') ? \'1\' : \'0\';\n          }\n\n            /** CONFIGURATION START **/\n            var _sf_async_config \x3d {\n                uid: 14181,\n                domain: "ft.com",\n                useCanonical: true,\n                enableAdRefresh: true\n            };\n\n            _sf_async_config.sections \x3d (function () {\n                "use strict";\n                var siteMapTermSectionName \x3d typeof window.siteMapTerm !\x3d\x3d "undefined" ? window.siteMapTerm : "",\n                        typeOfPage;\n                siteMapTermSectionName \x3d siteMapTermSectionName.replace(/([^\\.]*)\\./, "");\n\n                if (FT.isPage.Context \x3d\x3d\x3d 1 \x26\x26 FT.isPage.Story \x3d\x3d\x3d 1) {\n                    typeOfPage \x3d \'articles\';\n                } else if (FT.isPage.Site \x3d\x3d\x3d 1) {\n                    if (FT.isPage.Front \x3d\x3d\x3d 1) {\n                        typeOfPage \x3d \'frontpages\';\n                    } else if (FT.isPage.Section \x3d\x3d\x3d 1) {\n                        typeOfPage \x3d \'sections\';\n                    }\n                }\n               if (FT.env.dfp_site\x3d\x3d\x3d"ftcom.5887.markets-data" || FT.env.dfp_site\x3d\x3d\x3d"ftcom.5887.bus-school-rankings"  || siteMapTerm \x3d\x3d\x3d "Products.Lexicon" || FT.env.dfp_site \x3d\x3d\x3d "ftcom.5887.video"  || FT.env.dfp_site \x3d\x3d\x3d "ftcom.5887.topics" || FT.env.dfp_site \x3d\x3d\x3d "ftcom.5887.podcast" || FT.env.dfp_site \x3d\x3d\x3d "ftcom.5887.clippings" ||\n               FT.env.dfp_site \x3d\x3d\x3d "ftcom.5887.cuttings" || FT.env.dfp_site \x3d\x3d\x3d "ftcom.5887.blogs" || FT.env.dfp_site \x3d\x3d\x3d "ftcom.5887.alphaville" || FT.env.dfp_site \x3d\x3d\x3d "ftcom.5887.business-education" || FT.env.dfp_site \x3d\x3d\x3d "ftcom.5887.technology" || FT.env.dfp_site \x3d\x3d\x3d "ftcom.5887.comment" ||\n               FT.env.dfp_site \x3d\x3d\x3d "ftcom.5887.search") {typeOfPage\x3d"sections";}\n                return siteMapTermSectionName + \', \' + typeOfPage;\n            }());\n            //advertising site and zone data\n            _sf_async_config.zone\x3d FT.ads.metadata.page().dfpSite + "/" + FT.ads.metadata.page().dfpZone;\n            /** CONFIGURATION END **/\n\n            (function () {\n                "use strict";\n                function loadChartbeat() {\n                    window._sf_startpt \x3d (FT.analytics.timerStore.getTimers().hasOwnProperty(\'perceivedLoadTime\') ? FT.analytics.timerStore.getTimers().perceivedLoadTime.start : (new Date()).getTime() - 1000);\n                    window._sf_endpt \x3d (new Date()).getTime();\n                    if (FT.isPage.Context \x3d\x3d\x3d 1 \x26\x26 FT.isPage.Story \x3d\x3d\x3d 1) {\n                        window._sf_async_config.authors \x3d ($(".byline span").text().replace(/By +/, ""));\n                    }\n                    else if ((\n                      FT.env.dfp_site \x3d\x3d\x3d "ftcom.5887.blogs" ||\n                      FT.env.dfp_site \x3d\x3d\x3d "ftcom.5887.alphaville" ||\n                      FT.env.dfp_site \x3d\x3d\x3d "ftcom.5887.business-education"\n                      ) \x26\x26  $(\'.entry-meta strong a\')[0]) {\n                         window._sf_async_config.authors \x3d $(\'.entry-meta strong a\')[0].text.replace(/(\\t|\\n)/g,\'\');\n                    }\n\n                    window._cbq \x3d window._cbq || [];\n\n                   // user edition\n                   var userEdition \x3d FT.cookie.getParam(\'AYSC\', 28),\n                         userTypes \x3d {\n                            1: \'anon\',\n                            2: \'lgdin\',\n                            3: \'paid\',\n                            4: \'lgdin_inactive\',\n                            5: \'paid_inactive\'\n                         },\n                         ftpCookie \x3d FT.cookie.get("FT_P"),\n                         cohortCode \x3d 1,\n                         prods,\n                         e;\n\n                   if (userEdition \x26\x26 userEdition !\x3d\x3d \'PVT\') {\n                      window._cbq.push(["_edt", userEdition]);\n                   } else {\n                      window._cbq.push(["_edt", "default"]);\n                   }\n\n                   // cohort, user type\n                   if (ftpCookie) {\n                      prods \x3d ftpCookie.match(/prod\x3d([^_]*)/) ? RegExp.$1 : null;\n                      cohortCode \x3d Track.Util.findSubType(prods);\n                   }\n                   window._cbq.push(["_acct", userTypes[cohortCode]]);\n\n                   // demographic data\n                   var demographicData \x3d "",\n                         userObj \x3d FT.ads.metadata.user(),\n                         demographicCodes \x3d {\n                            \'02\' : userObj.gender, // Gender\n                            \'05\' : userObj.industry, // Industry\n                            \'06\' : userObj.job_responsibility, // Responsibility\n                            \'07\' : userObj.job_position, // Position\n                            \'19\' : userObj.company_size, // Company Size\n                            \'40\' : userObj.DB_company_size, // DB Company Size\n                            \'41\' : userObj.DB_industry, // DB Industry\n                            \'42\' : userObj.DB_company_turnover, // DB Company Takeover\n                            \'46\' : userObj.cameo_investor_code, // Cameo Investor\n                            \'51\' : userObj.cameo_property_code, // Cameo Property\n                            \'slv\' : ((userObj.subscription_level) ? userObj.subscription_level : \'anon\'),\n                            \'99\' : FT.stickyAd // temporary flag set for sticky ads trial\n                            }; // subscriber level\n\n                   function blankIfInvalid( value ) {\n                      return (!value || value.match(/(NULL)|(null)/)) ? "" : value;\n                   }\n\n                   // add demographics data\n                   for (var key in demographicCodes) {\n                      if (demographicData.length !\x3d\x3d 0) demographicData +\x3d ",";\n                      demographicData \x3d demographicData + key + "\x3d" + blankIfInvalid(demographicCodes[key]);\n                   }\n\n                   window._cbq.push(["_demo", demographicData]);\n\n                    e \x3d document.createElement("script");\n                    e.setAttribute("language", "javascript");\n                    e.setAttribute("type", "text/javascript");\n                    e.setAttribute("src",  "//static.chartbeat.com/js/chartbeat_ad.js");\n                    document.body.appendChild(e);\n                }\n\n                $(document).ready(function () {\n                    loadChartbeat();\n                });\n            }());\n        }\n    } catch (e) {\n        //if (window.console) {\n        //    console.log(e);\n        //}\n    }\n\x3c/script\x3e';
a.addClientFiltersList(["prodfalcon.filters.ALLURLs","prodfalcon.filters.Exclude_preditor","prodfalcon.filters.ExcludePreviews","prodfalcon.filters.ExcludeInternalStories"]);a.addClientVariablesMap({});a.addParameters([]);a.genericDependencies=[];a.addClientDependenciesList([]);a.pre=function(){};a.script=function(){};a.post=function(){}})();
(function(){var t=qubit.opentag.CustomTag;var a=new t({"dedupe":false,"locationPlaceHolder":"END","needsConsent":false,"active":true,"url":"","timeout":5E3,"async":true,"usesDocumentWrite":false,"name":"FT-Clippings-Articles-On-ft.com","disabled":true,"id":47115498,"locked":false,"locationObject":"HEAD"});var v="prodfalcon.tags.ftclippingsarticlesonftcom.Tag";qubit.Define.clientNamespace(v,a);a.htmlContent='\x3cscript type\x3d"text/javascript"\x3e\n  FT.$(document).ready(function(e){ \n      FT.$(\'.syndicationHeadline\').append("\x3cscript type\x3d\'text/javascript\'\x3e"+\n                                          "function pushNotification(){ "+ \n                                          "var content \x3d \'\x3cdiv id\x3d\\"cp-notification\\" style\x3d\\"width: 370px; min-height: 140px; border: 1px solid #B90A0A;margin-top:5px;margin-bottom:5px;background-color: #ffffff; margin: 5px 0 10px 0;\\"\x3e" +\n                                          " \x3cdiv style\x3d\\"background-color: #B90A0A;height:20px;color:#ffffff;text-align:center;\\"\x3ePLANNED DOWNTIME MESSAGE\x3c/div\x3e"+\n                                          "\x3cdiv style\x3d\\"font-size:16px;margin: 20px 0 10px 10px;\\"\x3e"+\n                                          "\x3cdiv style\x3d\\"float:left;margin-right: 5px;\\"\x3e"+\n                                          "\x3cdiv style\x3d\\"font-size:16px; margin: 0 0 10px 10px;\\"\x3e\x3cspan style\x3d\\"font-weight: bold;\\"\x3eNotice:\x3c/span\x3e Planned downtime \x3cspan style\x3d\\"font-weight: bold;\\"\x3e9th December 2015\x3c/span\x3e\x3c/div\x3e"+\n                                          "\x3cdiv style\x3d\\"margin: 0 0 10px 10px;\\"\x3eFT\u2019s Clippings tool service will be unavailable on 9th December 2015. We will resume a new service soon after the upgrade. FT\u2019s Clippings will be relaunched as part of myFT on our new site, \x3ca style\x3d\\"text-decoration:none;\\" href\x3d\\"http://next.ft.com\\" target\x3d\\"_blank\\"\x3enext.ft.com\x3c/a\x3e.\x3c/div\x3e"+\n                                          "\x3c/div\x3e"+\n                                          "\x3cdiv style\x3d\\"clear:both;\\"\x3e"+\n                                          "\x3c/div\x3e\'; if (FT.$(\'div.ftclippings-form div#cp-notification\').length \x3d\x3d 0){FT.$(\'div.ftclippings-form form.clipthisform\').prepend(content);} }"+\n                                          "function clippings_notification_display(){ setTimeout(pushNotification,2000); }"+\n                                          "FT.$(\'body\').on(\'click\',\'a.ftclippings-clipthislink\',function(){ clippings_notification_display(); });\x3c\\/script\x3e");\n                                          \n  });\n\x3c/script\x3e';
a.addClientFiltersList(["prodfalcon.filters.DefaultFilterMatchAll4"]);a.addClientVariablesMap({});a.addParameters([]);a.genericDependencies=[];a.addClientDependenciesList([]);a.pre=function(){};a.script=function(){};a.post=function(){}})();
(function(){var t=qubit.opentag.CustomTag;var a=new t({"dedupe":false,"locationPlaceHolder":"NOT_END","needsConsent":false,"active":true,"url":"http://www.ft-static.com/sp/prod/maxymiser/long/56339/mmcore.js","timeout":5E3,"async":false,"usesDocumentWrite":true,"name":"Maxymiser - mmcore.js","disabled":false,"id":30340584,"locked":false,"locationObject":"HEAD"});var v="prodfalcon.tags.maxymisermmcorejs.Tag";qubit.Define.clientNamespace(v,a);a.htmlContent="";a.addClientFiltersList(["prodfalcon.filters.AllURLs1",
"prodfalcon.filters.Exclude_preditor"]);a.addClientVariablesMap({});a.addParameters([]);a.genericDependencies=[];a.addClientDependenciesList([]);a.pre=function(){};a.script=function(){};a.post=function(){}})();
(function(){var t=qubit.opentag.CustomTag;var a=new t({"dedupe":false,"locationPlaceHolder":"END","needsConsent":false,"active":true,"url":"","timeout":5E3,"async":true,"usesDocumentWrite":false,"name":"FT-Clippings-NewsLines-Above-Annotations-Tab","disabled":false,"id":47131494,"locked":false,"locationObject":"HEAD"});var v="prodfalcon.tags.ftclippingsnewslinesaboveannotationstab.Tag";qubit.Define.clientNamespace(v,a);a.htmlContent='\x3cscript type\x3d"text/javascript"\x3e\n  \nvar content \x3d \'\x3cdiv style\x3d"width: 600px; min-height: 140px; border: 1px solid #B90A0A;margin-top:5px;margin-bottom:5px;background-color: #ffffff; margin: 10px 0 10px 0;"\x3e\'+\n        \'\x3cdiv style\x3d"background-color: #B90A0A;height:20px;color:#ffffff;text-align:center;"\x3ePLANNED DOWNTIME MESSAGE\x3c/div\x3e\'+\n        \'\x3cdiv style\x3d"font-size:16px;margin: 20px 0 10px 10px;"\x3e\'+\n          \'\x3cdiv style\x3d"width:75%;float:left;margin-right: 40px;"\x3e\'+\n           \'\x3cdiv style\x3d"font-size:16px; margin: 0 0 10px 10px;"\x3e\x3cspan style\x3d"font-weight: bold;"\x3eNotice:\x3c/span\x3e Planned downtime \x3cspan style\x3d"font-weight: bold;"\x3e*9th December 2015*\x3c/span\x3e\x3c/div\x3e\'+\n           \'\x3cdiv style\x3d"font-size:16px; margin: 0 0 10px 10px;"\x3eFT\u2019s Clippings tool service will be unavailable on 9th December 2015\x3c/div\x3e\'+\n           \'\x3cdiv style\x3d"margin: 0 0 10px 10px;"\x3eClippings is changing from December 2015. We will resume a new service soon after the upgrade. FT\u2019s Clippings will be relaunched as part of myFT on our new site, \x3ca style\x3d"text-decoration:none;" href\x3d"http://next.ft.com"\x3enext.ft.com\x3c/a\x3e.\x3c/div\x3e\'+\n           \'\x3cdiv style\x3d"margin: 10px; 0 10px; 10px;"\x3eFor any more questions \x3ca style\x3d"text-decoration: none;" href\x3d"http://help.ft.com/tools-services/clippings/" target\x3d"_blank"\x3eclick here\x3c/a\x3e\x3c/div\x3e\'+\n          \'\x3c/div\x3e\'+\n          \'\x3cdiv style\x3d"width:16%;height:100%;float:left;"\x3e\x3cimg style\x3d"margin-top: -5px;" src\x3d"http://blogs.ft.com/brusselsblog/files/2015/09/survey-icon.png" alt\x3d"Clippings Notification" title\x3d"Clippings Notification"/\x3e\x3c/div\x3e\'+\n          \'\x3cdiv style\x3d"clear:both;"\x3e\'+\n        \'\x3c/div\x3e\'+\n    \'\x3c/div\x3e\';\n\nFT.$(document).ready(function(e){\n\t"use strict";\n    FT.$(\'.annotationstabs\').prepend(content);\n});\n\n\x3c/script\x3e';
a.addClientFiltersList(["prodfalcon.filters.DefaultFilterMatchAll6"]);a.addClientVariablesMap({});a.addParameters([]);a.genericDependencies=[];a.addClientDependenciesList([]);a.pre=function(){};a.script=function(){};a.post=function(){}})();
(function(){var t=qubit.opentag.CustomTag;var a=new t({"dedupe":false,"locationPlaceHolder":"NOT_END","needsConsent":false,"active":true,"url":"","timeout":5E3,"async":true,"usesDocumentWrite":false,"name":"Origami bundle CSS - o-overlay, o-author-alerts, o-ft-icons, o-ft-buttons","disabled":false,"id":39954068,"locked":false,"locationObject":"HEAD"});var v="prodfalcon.tags.origamibundlecssooverlayoauthoralertsofticonsoftbuttons.Tag";qubit.Define.clientNamespace(v,a);a.htmlContent="\x3cscript\x3e\n  (function () {\n    var link \x3d document.createElement('link');\n    link.rel \x3d 'stylesheet';\n    link.href \x3d '//origami-build.ft.com/v2/bundles/css?modules\x3do-author-alerts@v3.0.0,o-comments@3.2.0,o-overlay@1.8.3,o-buttons@2.0.4,o-ft-icons@3.5.2';\n    document.getElementsByTagName('head')[0].appendChild(link);\n  })();\n\x3c/script\x3e";
a.addClientFiltersList(["prodfalcon.filters.ALLURLs","prodfalcon.filters.ExcludeIfCommentsTESTModeIsOnHasCookieFT_Comments_Test3"]);a.addClientVariablesMap({});a.addParameters([]);a.genericDependencies=[];a.addClientDependenciesList([]);a.pre=function(){};a.script=function(){};a.post=function(){}})();
(function(){var t=qubit.opentag.CustomTag;var a=new t({"dedupe":false,"locationPlaceHolder":"NOT_END","needsConsent":false,"active":true,"url":"","timeout":5E3,"async":true,"usesDocumentWrite":false,"name":"Cookie service","disabled":false,"id":47300490,"locked":false,"locationObject":"HEAD"});var v="prodfalcon.tags.cookieservice.Tag";qubit.Define.clientNamespace(v,a);a.htmlContent="\x3cscript\x3e\n(function () {\n\t\"use strict\";\n\n\tvar cookieServiceUrl \x3d 'https://cookie-svc.memb.ft.com/cookie/px?client-app-id\x3dft-cms';\n\n\tvar cookie \x3d {};\n\tcookie.set \x3d function (name, value, days, domain) {\n\t\tvar expires;\n\n\t\tif (days) {\n\t\t\tvar date \x3d new Date();\n\t\t\tdate.setTime(date.getTime() + (days * 24 * 60 * 60 * 1000));\n\t\t\texpires \x3d \"; expires\x3d\"+date.toGMTString();\n\t\t}\n\t\telse {\n\t\t\texpires \x3d \"\";\n\t\t}\n\t\tdocument.cookie \x3d name + \"\x3d\" + value + expires + \"; path\x3d/\" + (domain ? '; domain\x3d' + domain : '');\n\t};\n\n\tcookie.get \x3d function(name) {\n\t\tvar nameEQ \x3d name + \"\x3d\";\n\t\tvar ca \x3d document.cookie.split(';');\n\t\tfor (var i \x3d 0; i \x3c ca.length; i++) {\n\t\t\tvar c \x3d ca[i];\n\t\t\twhile (c.charAt(0) \x3d\x3d\x3d ' ') {\n\t\t\t\tc \x3d c.substring(1, c.length);\n\t\t\t}\n\t\t\tif (c.indexOf(nameEQ) \x3d\x3d\x3d 0) {\n\t\t\t\treturn c.substring(nameEQ.length, c.length);\n\t\t\t}\n\t\t}\n\t\treturn null;\n\t};\n\n\tcookie.remove \x3d function (name) {\n\t\tcookie.set(name, \"\", -1);\n\t};\n\n\n\tvar cookieService \x3d {};\n\tcookieService.call \x3d function () {\n\t\tvar img \x3d new Image();\n\t\timg.src \x3d cookieServiceUrl + '\x26_\x3d' + new Date().getTime();\n\t};\n\n\n\n\tvar localStorageKey \x3d 'cookie-service';\n\tvar cookieKey \x3d 'cs';\n\n\tvar getLastDateRun \x3d function () {\n\t\tif (typeof Storage !\x3d\x3d \"undefined\") {\n\t\t\treturn localStorage.getItem(localStorageKey);\n\t\t} else {\n\t\t\treturn cookie.get(cookieKey);\n\t\t}\n\t};\n\n\tvar setLastDateRun \x3d function () {\n\t\tif (typeof Storage !\x3d\x3d \"undefined\") {\n\t\t\tlocalStorage.setItem(localStorageKey, new Date().getTime());\n\t\t} else {\n\t\t\tcookie.set(cookieKey, new Date().getTime(), 1, '.ft.com');\n\t\t}\n\t};\n  \n  var removeLastDateRun \x3d function () {\n    \tif (typeof Storage !\x3d\x3d \"undefined\") {\n\t\t\tlocalStorage.removeItem(localStorageKey);\n\t\t} else {\n\t\t\tcookie.remove(cookieKey);\n\t\t}\n  };\n\n\tvar init \x3d function () {\n\t\tif (cookie.get('FTSession')) {\n\t\t\tvar lastDate \x3d getLastDateRun();\n\n\t\t\tif (!cookie.get('FT_U') || !cookie.get('FT_User') || !cookie.get('FT_P') || !cookie.get('AYSC')) {\n\t\t\t\tcookieService.call();\n\t\t\t\tsetLastDateRun();\n\t\t\t} else {\n\t\t\t\tif (!lastDate || new Date().getTime() - lastDate \x3e 4 * 60 * 60 * 1000) {\n\t\t\t\t\tcookieService.call();\n\t\t\t\t\tsetLastDateRun();\n\t\t\t\t}\n\t\t\t}\n        } else {\n          \tremoveLastDateRun();\n        }\n\t};\n\n\n\tinit();\n}());\n\x3c/script\x3e";
a.addClientFiltersList(["prodfalcon.filters.ALLURLs","prodfalcon.filters.Exclude_preditor"]);a.addClientVariablesMap({});a.addParameters([]);a.genericDependencies=[];a.addClientDependenciesList([]);a.pre=function(){};a.script=function(){};a.post=function(){}})();
(function(){var t=qubit.opentag.CustomTag;var a=new t({"dedupe":false,"locationPlaceHolder":"END","needsConsent":false,"active":true,"url":"","timeout":5E3,"async":false,"usesDocumentWrite":false,"name":"Origami bundle JS - o-overlay, o-author-alerts, o-ft-icons, o-ft-buttons","disabled":false,"id":39954059,"locked":false,"locationObject":"HEAD"});var v="prodfalcon.tags.origamibundlejsooverlayoauthoralertsofticonsoftbuttons.Tag";qubit.Define.clientNamespace(v,a);a.htmlContent='\x3cscript src\x3d"//origami-build.ft.com/v2/bundles/js?modules\x3do-author-alerts@v3.0.0,o-overlay@1.8.3,o-comments@3.2.0,o-autoinit@1.2.0\x26export\x3dorigamiBundles"\x3e\x3c/script\x3e';
a.addClientFiltersList(["prodfalcon.filters.CTM","prodfalcon.filters.Exclude_preditor","prodfalcon.filters.ExcludeIfCommentsTESTModeIsOnHasCookieFT_Comments_Test2"]);a.addClientVariablesMap({});a.addParameters([]);a.genericDependencies=[];a.addClientDependenciesList(["prodfalcon.tags.ctm.Tag"]);a.pre=function(){};a.script=function(){};a.post=function(){}})();
(function(){var t=qubit.opentag.CustomTag;var a=new t({"dedupe":false,"locationPlaceHolder":"NOT_END","needsConsent":false,"active":true,"url":"http://amch.questionmarket.com/adsc/d1146465/2/1154160/randm.js","timeout":5E3,"async":true,"usesDocumentWrite":false,"name":"Advertising Mill Ward Brown","disabled":false,"id":20256431,"locked":false,"locationObject":"HEAD"});var v="prodfalcon.tags.advertisingmillwardbrown.Tag";qubit.Define.clientNamespace(v,a);a.htmlContent="";a.addClientFiltersList(["prodfalcon.filters.ALLURLs"]);
a.addClientVariablesMap({});a.addParameters([]);a.genericDependencies=[];a.addClientDependenciesList([]);a.pre=function(){};a.script=function(){};a.post=function(){}})();
(function(){var t=qubit.opentag.CustomTag;var a=new t({"dedupe":false,"locationPlaceHolder":"END","needsConsent":false,"active":true,"url":"","timeout":-1,"async":true,"usesDocumentWrite":false,"name":"DE4384 (workaround)","disabled":false,"id":454063,"locked":false,"locationObject":"BODY"});var v="prodfalcon.tags.de4384workaround.Tag";qubit.Define.clientNamespace(v,a);a.htmlContent='\x3cscript type\x3d"text/javascript"\x3e\nFT.wrapper \x3d FT.wrapper || {};\nFT.wrapper.initialisers \x3d FT.wrapper.initialisers || [];\nFT.wrapper.initialisers.push(function() {\n\t$("#deviceSwitchingLink").css("display","none");\n});\n\x3c/script\x3e';
a.addClientFiltersList(["prodfalcon.filters.ALLURLs","prodfalcon.filters.MobileRedirectTesting"]);a.addClientVariablesMap({});a.addParameters([]);a.genericDependencies=[];a.addClientDependenciesList([]);a.pre=function(){};a.script=function(){};a.post=function(){}})();
(function(){var t=qubit.opentag.CustomTag;var a=new t({"dedupe":false,"locationPlaceHolder":"NOT_END","needsConsent":false,"active":true,"url":"http://d3c3cq33003psk.cloudfront.net/opentag-31604-2026226.js","timeout":5E3,"async":false,"usesDocumentWrite":false,"name":"Comments TEST mode","disabled":false,"id":18408731,"locked":false,"locationObject":"HEAD"});var v="prodfalcon.tags.commentstestmode.Tag";qubit.Define.clientNamespace(v,a);a.htmlContent="";a.addClientFiltersList(["prodfalcon.filters.EnableIfFT_Comments_TestCookieIsSet"]);
a.addClientVariablesMap({});a.addParameters([]);a.genericDependencies=[];a.addClientDependenciesList(["prodfalcon.tags.ctm.Tag"]);a.pre=function(){};a.script=function(){};a.post=function(){}})();
(function(){var t=qubit.opentag.CustomTag;var a=new t({"dedupe":false,"locationPlaceHolder":"NOT_END","needsConsent":false,"active":true,"url":"","timeout":5E3,"async":true,"usesDocumentWrite":false,"name":"Author alerts unsubscribe/autosubscribe page","disabled":false,"id":26202326,"locked":false,"locationObject":"HEAD"});var v="prodfalcon.tags.authoralertsunsubscribeautosubscribepage.Tag";qubit.Define.clientNamespace(v,a);a.htmlContent="\x3cscript type\x3d\"text/javascript\"\x3e\n  (function() {\n    \n    var addScript \x3d function(src) {\n      var script \x3d document.createElement('script');\n      script.type \x3d 'text/javascript';\n      script.async \x3d true;\n      script.src \x3d src;\n      var scripts \x3d  document.getElementsByTagName('script');\n      scripts[scripts.length-1].parentNode.appendChild(script);\n    };\n    \n    if(('addEventListener' in document) \x26\x26 ('querySelector' in document)) {\n      addScript('http://www.ft-static.com/sp/prod/author_alerts/long/1.0.0/jsinclude.min.js');\n    } else {\n      addScript('http://www.ft-static.com/sp/prod/author_alerts/long/0.2.13/jsinclude.min.js');\n    }\n  }());\n\x3c/script\x3e";
a.addClientFiltersList(["prodfalcon.filters.OnlyOnUnsubscribePage","prodfalcon.filters.OnlyOnUnsubscribePageWithIntlInPath"]);a.addClientVariablesMap({});a.addParameters([]);a.genericDependencies=[];a.addClientDependenciesList(["prodfalcon.tags.ctm.Tag"]);a.pre=function(){};a.script=function(){};a.post=function(){}})();
(function(){var t=qubit.opentag.CustomTag;var a=new t({"dedupe":false,"locationPlaceHolder":"NOT_END","needsConsent":false,"active":true,"url":"","timeout":5E3,"async":true,"usesDocumentWrite":false,"name":"TyntBlocker","disabled":false,"id":31588126,"locked":false,"locationObject":"BODY"});var v="prodfalcon.tags.tyntblocker.Tag";qubit.Define.clientNamespace(v,a);a.htmlContent="\x3cscript\x3e\nif (typeof FT !\x3d\x3d 'undefined' \x26\x26\ntypeof FT.env !\x3d\x3d 'undefined' \x26\x26\nFT.env.dfp_site \x3d\x3d\x3d 'ftcom.5887.arts-and-leisure'){\nFT.Tynt \x3d \"blocked\";\n}\n\x3c/script\x3e";
a.addClientFiltersList(["prodfalcon.filters.ALLURLs"]);a.addClientVariablesMap({});a.addParameters([]);a.genericDependencies=[];a.addClientDependenciesList([]);a.pre=function(){};a.script=function(){};a.post=function(){}})();
(function(){var t=qubit.opentag.CustomTag;var a=new t({"dedupe":false,"locationPlaceHolder":"END","needsConsent":false,"active":true,"url":"","timeout":5E3,"async":true,"usesDocumentWrite":false,"name":"Livefyre commenting","disabled":false,"id":22878890,"locked":false,"locationObject":"BODY"});var v="prodfalcon.tags.livefyrecommenting.Tag";qubit.Define.clientNamespace(v,a);a.htmlContent="\x3cscript\x3e\n  FT.$(document).ready(function () {\n    \"use strict\";\n    \n    var isOnFtDomain \x3d function () {\n      return window.location.hostname.indexOf('www.ft.com', window.location.hostname.length - 'www.ft.com'.length) !\x3d\x3d -1;\n    };\n    \n    if (FT \x26\x26 FT.isPage \x26\x26 FT.isPage.Story \x3d\x3d\x3d 1 \x26\x26 FT.$('#ft-article-comments').length \x26\x26 isOnFtDomain()) {\n      var pollForOrigamiBundleObj \x3d function (callback) {\n        var max \x3d 100;\n        var current \x3d 0;\n        \n        var check \x3d function () {\n          current++;\n          \n          if (window.origamiBundles \x26\x26 window.origamiBundles['o-comments']) {\n            clearInterval(interval);\n            callback();\n          }\n          \n          if (current \x3e max) {\n            clearInterval(interval);\n          }\n        };\n        \n        var interval \x3d setInterval(check, 300);\n        check();\n      };\n      \n      pollForOrigamiBundleObj(function () {\n        FT.$.ajax({\n          url: 'http://www.ft-static.com/sp/prod/comments/4.2.2/long/ftcomIntegration.min.js',\n          dataType: 'script',\n          cache: true,\n          success: function () {\n            FT.$('#ft-article-comments')\n            .css({'clear': 'both', 'padding-top': '20px'})\n            .append('\x3cdiv id\x3d\"livefyre-app-ft-' + articleUUID + '\"\x3e\x3c/div\x3e');\n                        \n            var commentsObj \x3d commentsFtIntegration.init(FT.$);\n            \n            var ftCommentsWidget \x3d new commentsObj.Widget('#livefyre-app-ft-' + articleUUID, {\n              title: document.title,\n              url: FT.$('link[rel\x3dcanonical]').attr('href') || document.location.href,\n              articleId: articleUUID,\n              authPageReload: true\n            });\n            \n            ftCommentsWidget.deferredLoad();\n          }\n        });\n      });\n    }\n  });\n\x3c/script\x3e";
a.addClientFiltersList(["prodfalcon.filters.ALLURLs","prodfalcon.filters.ExcludeFromPreditor","prodfalcon.filters.ExcludeFromMethodePreview","prodfalcon.filters.ExcludeIfCommentsTESTModeIsOnHasCookieFT_Comments_Test"]);a.addClientVariablesMap({});a.addParameters([]);a.genericDependencies=[];a.addClientDependenciesList([]);a.pre=function(){};a.script=function(){};a.post=function(){}})();
(function(){var t=qubit.opentag.CustomTag;var a=new t({"dedupe":false,"locationPlaceHolder":"END","needsConsent":false,"active":true,"url":"","timeout":5E3,"async":true,"usesDocumentWrite":false,"name":"Recommended reads","disabled":false,"id":34357156,"locked":false,"locationObject":"BODY"});var v="prodfalcon.tags.recommendedreads.Tag";qubit.Define.clientNamespace(v,a);a.htmlContent="\x3cscript\x3e\n  FT.$(window).one('scroll', function () {    \n    var link \x3d document.createElement('link');\n    link.rel \x3d 'stylesheet';\n    link.href \x3d '//h2.ft.com/recommends/css/recommend.css?_\x3dfingerprint2';\n    document.getElementsByTagName('head')[0].appendChild(link);\n        \n    FT.$.ajax({\n      url: '//h2.ft.com/recommends/js/recommend_v2.js?_\x3dfingerprint2',\n      dataType: 'script',\n      cache: true,\n      success: function () {\n        setTimeout(function () {\n          if (window.recommendedReads) {\n            recommendedReads.recommend.init('');\n          }\n        }, 50);\n      }\n    });\n  });\n\x3c/script\x3e";
a.addClientFiltersList(["prodfalcon.filters.OnlyArticlePages","prodfalcon.filters.OnlyArticlePagesIntl","prodfalcon.filters.Exclude_preditor","prodfalcon.filters.ExcludeIfCommentsTESTModeIsOnHasCookieFT_Comments_Test1"]);a.addClientVariablesMap({});a.addParameters([]);a.genericDependencies=[];a.addClientDependenciesList([]);a.pre=function(){};a.script=function(){};a.post=function(){}})();
(function(){var t=qubit.opentag.Container;var a=new t({"maxCookieLength":300,"cookieDomain":"","pingServerUrl":"","delayDocWrite":false,"name":"PROD: Falcon","gzip":false,"disabled":false,"tellLoadTimesProbability":1,"containerId":31253});var v="prodfalcon.Container";qubit.Define.clientNamespace(v,a)})();(function(){try{qubit.opentag.Main.run()}catch(t){try{console.error("Errors during opentag main runtime.",t)}catch(a){}}})();
